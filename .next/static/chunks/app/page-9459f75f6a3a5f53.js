(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{5535:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>sn});var t=a(5155),n=a(6841),r=a(2115),l=a(6874),i=a.n(l),c=a(6766),o=a(8199),d=a(7434),h=a(1007),m=a(381),u=a(7580),x=a(5525),g=a(1264),p=a(227),j=a(6474),b=a(7863),f=a(4213),v=a(4835),N=a(4416),y=a(4783),w=a(5169),S=a(2098),k=a(3509),A=a(1362),C=a(7168),T=a(7133);function D(){let{setTheme:e,theme:s}=(0,A.D)(),[a,n]=r.useState(!1);return(r.useEffect(()=>{n(!0)},[]),a)?(0,t.jsxs)(T.rI,{children:[(0,t.jsx)(T.ty,{asChild:!0,children:(0,t.jsxs)(C.$,{variant:"ghost",size:"sm",className:"rounded-full h-8 w-8 p-0",children:[(0,t.jsx)(S.A,{className:"h-[1rem] w-[1rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,t.jsx)(k.A,{className:"absolute h-[1rem] w-[1rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,t.jsx)("span",{className:"sr-only",children:"Chuyển giao diện s\xe1ng/tối"})]})}),(0,t.jsxs)(T.SQ,{align:"end",children:[(0,t.jsxs)(T._2,{onClick:()=>e("light"),className:"light"===s?"bg-accent text-accent-foreground":"",children:[(0,t.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"S\xe1ng"]}),(0,t.jsxs)(T._2,{onClick:()=>e("dark"),className:"dark"===s?"bg-accent text-accent-foreground":"",children:[(0,t.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Tối"]}),(0,t.jsxs)(T._2,{onClick:()=>e("system"),className:"system"===s?"bg-accent text-accent-foreground":"",children:[(0,t.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Theo hệ thống"]})]})]}):(0,t.jsxs)(C.$,{variant:"ghost",size:"sm",className:"rounded-full h-8 w-8 p-0",children:[(0,t.jsx)("div",{className:"h-[1rem] w-[1rem]"})," "]})}var L=a(9663),P=a(3119);function I(e){var s,a;let{currentView:l,onViewChange:S}=e,{user:k,logout:A,showLoginModal:I,showRegisterModal:E}=(0,n.A)(),U=(0,P.a)(),[M,R]=(0,r.useState)(!1),[F,B]=(0,r.useState)(!1),_=[{id:"dashboard",label:"Dashboard",icon:o.A},{id:"submissions",label:"Submissions",icon:d.A},{id:"profile",label:"Hồ sơ",icon:h.A},{id:"settings",label:"C\xe0i đặt",icon:m.A},...(null==k?void 0:k.role)==="Label Manager"?[{id:"users",label:"Quản l\xfd Users",icon:u.A},{id:"admin",label:"Admin Panel",icon:x.A},{id:"email",label:"Email Center",icon:g.A},{id:"logs",label:"System Logs",icon:d.A}]:[]];return(0,t.jsxs)("nav",{className:"fixed top-0 w-full z-50 bg-background/95 backdrop-blur-sm shadow-sm border-b transition-all duration-300 ".concat(F?"h-12":"h-auto"),children:[(0,t.jsxs)("div",{className:"flex justify-between items-center px-4 py-2",children:[(0,t.jsxs)(i(),{href:"/",className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"bg-primary/10 rounded-full p-1.5",children:(0,t.jsx)(c.default,{src:"/face.png",alt:"AKs Studio Logo",className:"h-7 w-7",width:28,height:28})}),!F&&(0,t.jsx)("span",{className:"font-dosis-semibold text-lg whitespace-nowrap ml-1",children:"AKs Studio"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[!F&&k&&(0,t.jsxs)("div",{className:"hidden lg:flex items-center gap-3 mr-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-purple-500/10 rounded-full",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 text-purple-600"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"0 Submissions"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-blue-500/10 rounded-full",children:[(0,t.jsx)(p.A,{className:"h-4 w-4 text-blue-600"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"0 Tracks"})]}),"Label Manager"===k.role&&(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-orange-500/10 rounded-full",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 text-orange-600"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"1 Nghệ sĩ"})]})]}),(0,t.jsx)(C.$,{variant:"ghost",size:"sm",onClick:()=>{B(!F)},className:"hidden md:flex",children:F?(0,t.jsx)(j.A,{className:"h-4 w-4"}):(0,t.jsx)(b.A,{className:"h-4 w-4"})}),k&&(0,t.jsxs)(T.rI,{children:[(0,t.jsx)(T.ty,{asChild:!0,children:(0,t.jsxs)(C.$,{variant:"ghost",size:"sm",className:"flex items-center gap-2 hover:bg-primary/10",children:[(0,t.jsxs)(L.eu,{className:"w-8 h-8",children:[(0,t.jsx)(L.BK,{src:k.avatar||"/face.png",alt:k.fullName||k.username||"User avatar"}),(0,t.jsx)(L.q5,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white font-medium text-sm",children:(null==(s=k.fullName)?void 0:s.charAt(0))||(null==(a=k.username)?void 0:a.charAt(0))||"A"})]}),!F&&(0,t.jsxs)("div",{className:"hidden sm:flex flex-col items-start",children:[(0,t.jsx)("span",{className:"text-sm font-medium leading-none",children:k.fullName||k.username}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground leading-none mt-0.5",children:k.role})]})]})}),(0,t.jsxs)(T.SQ,{className:"w-56",align:"end",forceMount:!0,children:[(0,t.jsx)(T.lp,{className:"font-normal",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium leading-none",children:k.fullName||k.username}),(0,t.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:k.email||"Kh\xf4ng c\xf3 email"}),(0,t.jsxs)("p",{className:"text-xs leading-none text-muted-foreground",children:["Vai tr\xf2: ",k.role]})]})}),(0,t.jsx)(T.mB,{}),(0,t.jsxs)(T._2,{onClick:()=>S("profile"),children:[(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Hồ sơ c\xe1 nh\xe2n"})]}),(0,t.jsxs)(T._2,{onClick:()=>S("settings"),children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"C\xe0i đặt"})]}),"Label Manager"===k.role&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(T._2,{onClick:()=>S("admin"),children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Quản l\xfd hệ thống"})]}),(0,t.jsxs)(T._2,{onClick:()=>S("admin"),children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Admin Panel"})]}),(0,t.jsxs)(T._2,{onClick:()=>S("email"),children:[(0,t.jsx)(g.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Email Center"})]}),(0,t.jsxs)(T._2,{onClick:()=>S("logs"),children:[(0,t.jsx)(d.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"System Logs"})]})]}),(0,t.jsx)(T.mB,{}),(0,t.jsxs)(T._2,{onClick:A,className:"text-red-600",children:[(0,t.jsx)(v.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Đăng xuất"})]})]})]}),!k&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(C.$,{variant:"ghost",size:"sm",onClick:I,className:"h-9 px-3 text-muted-foreground hover:text-primary hover:bg-primary/10  transition-all duration-300 border border-transparent hover:border-primary/20 backdrop-blur-sm group relative overflow-hidden",children:[(0,t.jsxs)("span",{className:"relative z-10 flex items-center gap-2",children:[(0,t.jsx)(h.A,{className:"h-4 w-4"}),"Login"]}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/0 via-primary/5 to-primary/0  translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-500"})]}),(0,t.jsxs)(C.$,{variant:"outline",size:"sm",onClick:E,className:"h-9 px-3 bg-gradient-to-r from-primary/10 to-purple-600/10  border-primary/30 hover:border-primary/50 text-foreground hover:text-primary hover:bg-gradient-to-r hover:from-primary/20 hover:to-purple-600/20 transition-all duration-300 backdrop-blur-sm group relative overflow-hidden hover:shadow-lg hover:shadow-primary/20",children:[(0,t.jsxs)("span",{className:"relative z-10 flex items-center gap-2",children:[(0,t.jsx)("i",{className:"fas fa-user-plus text-xs"}),"Register"]}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/0 via-primary/10 to-primary/0  translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"})]})]}),U&&(0,t.jsx)(C.$,{variant:"ghost",size:"icon",onClick:()=>{R(!M)},className:"md:hidden","aria-expanded":M,"aria-label":"Toggle menu",children:M?(0,t.jsx)(N.A,{className:"h-5 w-5"}):(0,t.jsx)(y.A,{className:"h-5 w-5"})}),(0,t.jsx)(D,{})]})]}),!F&&(0,t.jsx)("div",{className:"".concat(U?M?"flex":"hidden":"flex"," flex-col md:flex-row items-start md:items-center justify-between px-4 py-1.5 font-dosis mobile-menu-transition border-t border-border/30"),children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-3 w-full md:w-auto",children:[_.map((e,s)=>{let a=e.icon,n=l===e.id;return(0,t.jsxs)(C.$,{variant:n?"secondary":"ghost",size:"sm",className:"rounded-full hover:bg-primary/10 w-full md:w-auto justify-start ".concat(n?"bg-primary/20 text-primary":""),onClick:a=>{a.preventDefault(),a.stopPropagation(),console.log("TopNavBar: Clicked on ".concat(e.id," (index: ").concat(s,")")),S(e.id)},children:[(0,t.jsx)(a,{className:"h-[1rem] w-[1rem] mr-1"}),(0,t.jsx)("span",{className:"text-sm",children:e.label})]},"".concat(e.id,"-").concat(s))}),(0,t.jsx)("div",{className:"hidden md:block w-px h-4 bg-border mx-2"}),(0,t.jsxs)(C.$,{variant:"ghost",size:"sm",className:"rounded-full hover:bg-primary/10 w-full md:w-auto justify-start",onClick:()=>window.history.back(),children:[(0,t.jsx)(w.A,{className:"h-[1rem] w-[1rem] mr-1"}),(0,t.jsx)("span",{className:"text-sm",children:"Quay lại"})]})]})})]})}var E=a(8482),U=a(9869);function M(){let[e,s]=(0,r.useState)({}),[a,l]=(0,r.useState)({username:"ankun",password:"admin123"}),{user:i,login:c,logout:o}=(0,n.A)(),d=async e=>{try{console.log("Testing ".concat(e,"..."));let a=await fetch(e),t=await a.json();console.log("".concat(e," result:"),t),s(s=>({...s,[e]:{status:a.status,success:a.ok,data:t}}))}catch(a){console.error("Error testing ".concat(e,":"),a),s(s=>({...s,[e]:{status:"ERROR",success:!1,error:a instanceof Error?a.message:String(a)}}))}},h=async()=>{let e=await c(a.username,a.password);console.log("Login result:",e),s(s=>({...s,"/api/auth/login":{status:e?200:401,success:e,data:e?"Login successful":"Login failed"}}))};return(0,t.jsxs)(E.Zp,{className:"mb-6",children:[(0,t.jsx)(E.aR,{children:(0,t.jsx)(E.ZB,{children:"\uD83D\uDD27 Quick API Debug"})}),(0,t.jsx)(E.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-blue-50 rounded",children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"\uD83D\uDD10 Login Test"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"text-sm",children:["Current user: ",i?i.username:"Not logged in"]}),(0,t.jsx)(C.$,{onClick:h,size:"sm",children:"Test Login (ankun/admin123)"})]})]}),(0,t.jsx)(C.$,{onClick:()=>{d("/api/artists"),d("/api/submissions"),d("/api/admin/stats"),d("/api/logs"),d("/api/email/stats")},className:"w-full",children:"Test All APIs"}),(0,t.jsx)("div",{className:"space-y-2",children:Object.entries(e).map(e=>{var s;let[a,n]=e;return(0,t.jsxs)("div",{className:"p-2 bg-muted rounded text-sm",children:[(0,t.jsxs)("strong",{children:[a,":"]}),(0,t.jsx)("span",{className:n.success?"text-green-600":"text-red-600",children:n.status}),(null==(s=n.data)?void 0:s.count)&&(0,t.jsxs)("span",{children:[" - Count: ",n.data.count]}),n.error&&(0,t.jsxs)("span",{className:"text-red-600",children:[" - ",n.error]})]},a)})})]})})]})}function R(){let[e,s]=(0,r.useState)({}),[a,n]=(0,r.useState)({}),l=async function(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r=arguments.length>3?arguments[3]:void 0;n(s=>({...s,[e]:!0}));try{let n={method:t,headers:{"Content-Type":"application/json"}};r&&"GET"!==t&&(n.body=JSON.stringify(r)),console.log("Testing ".concat(e," API..."));let l=await fetch(a,n),i=await l.json();s(s=>({...s,[e]:{status:l.status,statusText:l.statusText,data:i,success:l.ok,timestamp:new Date().toLocaleTimeString()}}))}catch(a){s(s=>({...s,[e]:{error:a instanceof Error?a.message:String(a),success:!1,timestamp:new Date().toLocaleTimeString()}}))}finally{n(s=>({...s,[e]:!1}))}},i=[{name:"Artists",url:"/api/artists"},{name:"Submissions",url:"/api/submissions"},{name:"Auth",url:"/api/auth/login",method:"POST",body:{username:"test",password:"invalid"}}];return(0,t.jsx)("div",{className:"p-6 space-y-4",children:(0,t.jsxs)(E.Zp,{children:[(0,t.jsx)(E.aR,{children:(0,t.jsx)(E.ZB,{children:"\uD83E\uDDEA API Debugger"})}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:i.map(s=>{var n;return(0,t.jsxs)(C.$,{onClick:()=>l(s.name,s.url,s.method,s.body),disabled:a[s.name],variant:(null==(n=e[s.name])?void 0:n.success)?"default":"outline",children:[a[s.name]?"⏳":"\uD83E\uDDEA"," Test ",s.name]},s.name)})}),(0,t.jsx)(C.$,{onClick:()=>i.forEach(e=>l(e.name,e.url,e.method,e.body)),className:"w-full mb-4",children:"\uD83D\uDE80 Test All APIs"}),(0,t.jsx)("div",{className:"space-y-4",children:Object.entries(e).map(e=>{let[s,a]=e;return(0,t.jsxs)(E.Zp,{className:"border-2 ".concat(a.success?"border-green-200":"border-red-200"),children:[(0,t.jsx)(E.aR,{className:"pb-2",children:(0,t.jsxs)(E.ZB,{className:"text-sm flex justify-between",children:[(0,t.jsxs)("span",{children:[s," API"]}),(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(a.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:a.success?"✅ Success":"❌ Failed"})]})}),(0,t.jsx)(E.Wu,{children:(0,t.jsxs)("div",{className:"text-xs space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Time:"})," ",a.timestamp]}),a.status&&(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Status:"})," ",a.status," ",a.statusText]}),a.error&&(0,t.jsxs)("div",{className:"text-red-600",children:[(0,t.jsx)("strong",{children:"Error:"})," ",a.error]}),a.data&&(0,t.jsxs)("details",{children:[(0,t.jsx)("summary",{className:"cursor-pointer font-semibold",children:"Response Data"}),(0,t.jsx)("pre",{className:"mt-2 p-2 bg-gray-100 rounded text-xs overflow-auto",children:JSON.stringify(a.data,null,2)})]})]})})]},s)})})]})]})})}function F(e){let{onViewChange:s}=e,[a,n]=(0,r.useState)({totalSubmissions:0,totalTracks:0,totalArtists:0}),[l,i]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{try{var e,s,a;i(!0);let t={success:!1,count:0};try{let e=await fetch("/api/submissions");e.ok?t=await e.json():console.warn("Submissions API returned:",e.status)}catch(e){console.error("Failed to fetch submissions:",e)}let r={success:!1,count:0};try{let e=await fetch("/api/artists");e.ok?r=await e.json():console.warn("Artists API returned:",e.status)}catch(e){console.error("Failed to fetch artists:",e)}let l={totalSubmissions:t.success&&null!=(e=t.count)?e:0,totalTracks:t.success&&null!=(s=t.count)?s:0,totalArtists:r.success&&null!=(a=r.count)?a:0};n(l)}catch(e){console.error("Failed to fetch dashboard stats:",e),n({totalSubmissions:0,totalTracks:0,totalArtists:0})}finally{i(!1)}})()},[]),(0,t.jsxs)("div",{className:"pt-4 p-6 pb-20 bg-background transition-all duration-300",children:[(0,t.jsx)(M,{}),(0,t.jsx)("div",{className:"mb-8 bg-card rounded-lg shadow-sm p-6 border",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Dashboard - Nền tảng ph\xe2n phối nhạc số"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Quản l\xfd v\xe0 theo d\xf5i c\xe1c bản ph\xe1t h\xe0nh \xe2m nhạc của bạn"})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,t.jsxs)(E.Zp,{className:"bg-gradient-to-br from-purple-500 to-pink-500 text-white border-0 shadow-lg hover:shadow-xl transition-shadow",children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium opacity-90",children:"Tổng Submissions"}),(0,t.jsx)(d.A,{className:"h-5 w-5 opacity-80"})]}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold",children:l?"...":a.totalSubmissions}),(0,t.jsx)("p",{className:"text-xs opacity-80 mt-1",children:0===a.totalSubmissions?"Chưa c\xf3 submission n\xe0o":"".concat(a.totalSubmissions," submissions")})]})]}),(0,t.jsxs)(E.Zp,{className:"bg-gradient-to-br from-blue-500 to-cyan-500 text-white border-0 shadow-lg hover:shadow-xl transition-shadow",children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium opacity-90",children:"Tracks Đ\xe3 Ph\xe1t H\xe0nh"}),(0,t.jsx)(p.A,{className:"h-5 w-5 opacity-80"})]}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold",children:l?"...":a.totalTracks}),(0,t.jsx)("p",{className:"text-xs opacity-80 mt-1",children:0===a.totalTracks?"Chưa c\xf3 track n\xe0o":"Sẵn s\xe0ng ph\xe1t h\xe0nh"})]})]}),(0,t.jsxs)(E.Zp,{className:"bg-gradient-to-br from-green-500 to-emerald-500 text-white border-0 shadow-lg hover:shadow-xl transition-shadow",children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium opacity-90",children:"Upload Nhanh"}),(0,t.jsx)(U.A,{className:"h-5 w-5 opacity-80"})]}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold",children:"Sẵn S\xe0ng"}),(0,t.jsx)("p",{className:"text-xs opacity-80 mt-1",children:"Tải nhạc l\xean ngay"})]})]}),(0,t.jsxs)(E.Zp,{className:"bg-gradient-to-br from-orange-500 to-red-500 text-white border-0 shadow-lg hover:shadow-xl transition-shadow",children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium opacity-90",children:"Nghệ Sĩ"}),(0,t.jsx)(u.A,{className:"h-5 w-5 opacity-80"})]}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold",children:l?"...":a.totalArtists}),(0,t.jsx)("p",{className:"text-xs opacity-80 mt-1",children:"Nghệ sĩ đang hoạt động"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(E.Zp,{className:"shadow-sm border",children:[(0,t.jsx)(E.aR,{className:"border-b",children:(0,t.jsxs)(E.ZB,{className:"text-foreground flex items-center space-x-2",children:[(0,t.jsx)(d.A,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("span",{children:"Hoạt Động Gần Đ\xe2y"})]})}),(0,t.jsx)(E.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(d.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,t.jsx)("h3",{className:"font-medium text-foreground mb-2",children:"Chưa c\xf3 hoạt động n\xe0o"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Tải l\xean track đầu ti\xean để bắt đầu!"}),(0,t.jsx)("button",{className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm hover:bg-primary/90 transition-colors",onClick:()=>null==s?void 0:s("upload"),children:"Bắt Đầu Upload"})]})})]}),(0,t.jsxs)(E.Zp,{className:"shadow-sm border",children:[(0,t.jsx)(E.aR,{className:"border-b",children:(0,t.jsxs)(E.ZB,{className:"text-foreground flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,t.jsx)("span",{children:"Trạng Th\xe1i Hệ Thống"})]})}),(0,t.jsx)(E.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-500/10 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"font-medium text-foreground",children:"Nền Tảng"})]}),(0,t.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Trực Tuyến"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-500/10 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("span",{className:"font-medium text-foreground",children:"Dịch Vụ Upload"})]}),(0,t.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Sẵn S\xe0ng"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-500/10 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,t.jsx)("span",{className:"font-medium text-foreground",children:"Ph\xe2n Phối"})]}),(0,t.jsx)("span",{className:"text-sm text-yellow-600 font-medium",children:"Chế Độ Demo"})]})]})})]})]}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsxs)(E.Zp,{children:[(0,t.jsx)(E.aR,{children:(0,t.jsx)(E.ZB,{children:"\uD83D\uDD27 API Debug Tool"})}),(0,t.jsx)(E.Wu,{children:(0,t.jsx)(R,{})})]})})]})}var B=a(9852),_=a(5784),J=a(2714),O=a(9474),V=a(6981),Z=a(5196),z=a(3999);let $=r.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(V.bL,{ref:s,className:(0,z.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...n,children:(0,t.jsx)(V.C1,{className:(0,z.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(Z.A,{className:"h-4 w-4"})})})});$.displayName=V.bL.displayName;var W=a(4059),G=a(9428);let H=r.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(W.bL,{className:(0,z.cn)("grid gap-2",a),...n,ref:s})});H.displayName=W.bL.displayName;let X=r.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(W.q7,{ref:s,className:(0,z.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...n,children:(0,t.jsx)(W.C1,{className:"flex items-center justify-center",children:(0,t.jsx)(G.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});X.displayName=W.q7.displayName;var K=a(4964),q=a(70),Q=function(e){return e.PENDING="PENDING",e.APPROVED="APPROVED",e.REJECTED="REJECTED",e.PROCESSING="PROCESSING",e.PUBLISHED="PUBLISHED",e.CANCELLED="CANCELLED",e.DRAFT="DRAFT",e}({}),Y=function(e){return e.SINGLE="SINGLE",e.EP="EP",e.ALBUM="ALBUM",e.COMPILATION="COMPILATION",e}({}),ee=a(7461),es=a(9964),ea=a(2178),et=a(5690),en=a(2525),er=a(4616),el=a(3398);class ei{normalizeSubmissions(e){return e.map(e=>{var s,a,t,n,r,l,i,c,o,d,h,m,u,x,g,p,j,b,f,v,N,y;let w=null!=(a=null!=(s=e.artist_name)?s:e.artists)?a:"";return w&&""!==w.trim()?w.split(/[,&]|feat\.|featuring|ft\./gi).length>3&&(w="Various Artist"):w="Various Artist",{...e,cover_art_url:null!=(n=null!=(t=e.cover_art_url)?t:e.artwork_path)?n:"/dianhac.jpg",artwork_path:null!=(l=null!=(r=e.artwork_path)?r:e.cover_art_url)?l:"/dianhac.jpg",imageUrl:null!=(o=null!=(c=null!=(i=e.imageUrl)?i:e.cover_art_url)?c:e.artwork_path)?o:"/dianhac.jpg",audio_file_url:null!=(h=null!=(d=e.audio_file_url)?d:e.file_path)?h:"/VNA2P25XXXXX.wav",file_path:null!=(u=null!=(m=e.file_path)?m:e.audio_file_url)?u:"/VNA2P25XXXXX.wav",audioUrl:null!=(p=null!=(g=null!=(x=e.audioUrl)?x:e.audio_file_url)?g:e.file_path)?p:"/VNA2P25XXXXX.wav",track_title:null!=(b=null!=(j=e.track_title)?j:e.title)?b:"Untitled Track",artist_name:w,status:null!=(f=e.status)?f:"pending",genre:null!=(v=e.genre)?v:"Unknown",submission_date:null!=(y=null!=(N=e.submission_date)?N:e.created_at)?y:new Date().toISOString()}})}async initialize(){console.log("✅ Database API Service initialized (API-based)")}async authenticateUser(e,s){el.v.info("DatabaseApiService: Authentication attempt",{component:"DatabaseApiService",action:"authenticateUser",data:{username:e}});try{var a,t,n;let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s})}),l=await r.json();if(l.success)return el.v.info("DatabaseApiService: Authentication successful",{component:"DatabaseApiService",action:"authenticateUser",userId:null==(a=l.user)?void 0:a.id}),console.log("✅ API authentication successful for ".concat(null==(t=l.user)?void 0:t.role)),{success:!0,data:l.user,source:"API"};return el.v.error("DatabaseApiService: Authentication failed",{component:"DatabaseApiService",action:"authenticateUser",error:l.message}),{success:!1,message:null!=(n=l.message)?n:"Authentication failed"}}catch(s){let e=s instanceof Error?s.message:"Unknown error";return el.v.error("DatabaseApiService: Authentication error",{component:"DatabaseApiService",action:"authenticateUser",error:e}),console.error("API auth failed:",s),{success:!1,message:"Authentication service unavailable.",error:e}}}async createUser(e){let{username:s,email:a,password:t,fullName:n}=e;if(!s||!a||!t||!n)return{success:!1,message:"Missing required fields for user creation."};try{var r;let e=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,email:a,password:t,fullName:n})}),l=await e.json();if(l.success)return{success:!0,data:l.user,source:"API"};return{success:!1,message:null!=(r=l.message)?r:"User creation failed"}}catch(e){return console.error("API createUser failed:",e),{success:!1,message:"User creation service unavailable."}}}async getArtists(){try{var e;let s=await fetch("/api/artists"),a=await s.json();if(a.success)return{success:!0,data:a.data,source:"API"};return{success:!1,data:[],message:null!=(e=a.error)?e:"Failed to retrieve artists"}}catch(e){return console.error("API: Failed to get artists:",e),{success:!1,data:[],message:"Artist service unavailable."}}}async updateArtistProfile(e,s){try{var a;let t=await fetch("/api/profile/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,role:"Artist",...s})}),n=await t.json();if(n.success)return{success:!0,data:n.data,source:"API"};return{success:!1,message:null!=(a=n.error)?a:"Artist profile update failed"}}catch(e){return console.error("API: Failed to update artist profile:",e),{success:!1,message:"Artist profile update service unavailable."}}}async updateLabelManagerProfile(e,s){try{var a;let t=await fetch("/api/profile/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,role:"Label Manager",...s})}),n=await t.json();if(n.success)return{success:!0,data:n.data,source:"API"};return{success:!1,message:null!=(a=n.error)?a:"Label Manager profile update failed"}}catch(e){return console.error("API: Failed to update label manager profile:",e),{success:!1,message:"Label Manager profile update service unavailable."}}}async getUserAvatar(e,s){try{var a;let t=await fetch("/api/images/avatar/".concat(e).concat(s?"?type=".concat(s):"")),n=await t.json();if(n.success)return{success:!0,data:n.data,source:"API"};return{success:!1,message:null!=(a=n.error)?a:"Failed to get user avatar"}}catch(e){return console.error("API: Failed to get user avatar:",e),{success:!1,message:"Avatar service unavailable."}}}async updateUserAvatar(e,s){try{var a;let t=new FormData;t.append("file",s.file),t.append("artistName",s.artistName),t.append("userId",e);let n=await fetch("/api/upload/avatar",{method:"POST",body:t}),r=await n.json();if(r.success)return{success:!0,data:{url:r.url,path:r.path},source:"API"};return{success:!1,message:null!=(a=r.error)?a:"Failed to update user avatar"}}catch(e){return console.error("API: Failed to update user avatar:",e),{success:!1,message:"Avatar update service unavailable."}}}async getSubmissions(e){el.v.info("DatabaseApiService: Getting submissions",{component:"DatabaseApiService",action:"getSubmissions",data:{username:e}});try{var s;let a=e?"?username=".concat(e):"",t=await fetch("/api/submissions".concat(a)),n=await t.json();if(n.success){let e=this.normalizeSubmissions(n.data);return{success:!0,data:e,source:"API"}}return{success:!1,data:[],message:null!=(s=n.error)?s:"Failed to retrieve submissions"}}catch(s){let e=s instanceof Error?s.message:"Unknown error";return el.v.error("DatabaseApiService: Get submissions error",{component:"DatabaseApiService",action:"getSubmissions",error:e}),console.error("API: Failed to get submissions:",s),{success:!1,data:[],message:"Submission service unavailable.",error:e}}}async getSubmissionById(e){try{var s;let a=await fetch("/api/submissions/".concat(e)),t=await a.json();if(t.success)return{success:!0,data:t.data,source:"API"};return{success:!1,message:null!=(s=t.error)?s:"Failed to get submission"}}catch(e){return console.error("API: Failed to get submission by ID:",e),{success:!1,message:"Submission service unavailable."}}}async createSubmission(e){el.v.info("DatabaseApiService: Creating submission",{component:"DatabaseApiService",action:"createSubmission"});try{var s,a;let t=await fetch("/api/submissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(n.success)return el.v.info("DatabaseApiService: Submission created",{component:"DatabaseApiService",action:"createSubmission",submissionId:null==(s=n.data)?void 0:s.id}),{success:!0,data:n.data,source:"API"};return el.v.error("DatabaseApiService: Create submission failed",{component:"DatabaseApiService",action:"createSubmission",error:n.error}),{success:!1,message:null!=(a=n.error)?a:"Create submission failed"}}catch(s){let e=s instanceof Error?s.message:"Unknown error";return el.v.error("DatabaseApiService: Create submission error",{component:"DatabaseApiService",action:"createSubmission",error:e}),{success:!1,message:"Create submission service unavailable.",error:e}}}async saveSubmission(e){let s=await this.createSubmission(e);return s.success&&s.data?{success:!0,data:s.data.id,source:s.source}:{success:!1,error:s.message}}async updateSubmission(e,s){el.v.info("DatabaseApiService: Updating submission",{component:"DatabaseApiService",action:"updateSubmission",data:{id:e}});try{var a;let t=await fetch("/api/submissions/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),n=await t.json();if(n.success)return el.v.info("DatabaseApiService: Submission updated",{component:"DatabaseApiService",action:"updateSubmission",submissionId:e}),{success:!0,data:n.data,source:"API"};return el.v.error("DatabaseApiService: Submission update failed",{component:"DatabaseApiService",action:"updateSubmission",error:n.error}),{success:!1,message:null!=(a=n.error)?a:"Update failed"}}catch(s){let e=s instanceof Error?s.message:"Unknown error";return el.v.error("DatabaseApiService: Update submission error",{component:"DatabaseApiService",action:"updateSubmission",error:e}),console.error("API: Failed to update submission:",s),{success:!1,message:"Update service unavailable.",error:e}}}async updateSubmissionStatus(e,s){el.v.info("DatabaseApiService: Updating submission status",{component:"DatabaseApiService",action:"updateSubmissionStatus",data:{id:e,status:s}});try{var a;let t=await fetch("/api/submissions/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})}),n=await t.json();if(n.success)return{success:!0,data:!0,source:"API"};return{success:!1,message:null!=(a=n.error)?a:"Update status failed"}}catch(s){let e=s instanceof Error?s.message:"Unknown error";return el.v.error("DatabaseApiService: Update submission status error",{component:"DatabaseApiService",action:"updateSubmissionStatus",error:e}),{success:!1,message:"Update status service unavailable.",error:e}}}async deleteSubmission(e){el.v.info("DatabaseApiService: Deleting submission",{component:"DatabaseApiService",action:"deleteSubmission",data:{id:e}});try{var s;let a=await fetch("/api/submissions/".concat(e),{method:"DELETE"}),t=await a.json();if(t.success)return el.v.info("DatabaseApiService: Submission deleted",{component:"DatabaseApiService",action:"deleteSubmission",submissionId:e}),{success:!0,data:!0,source:"API"};return el.v.error("DatabaseApiService: Submission deletion failed",{component:"DatabaseApiService",action:"deleteSubmission",error:t.error}),{success:!1,message:null!=(s=t.error)?s:"Deletion failed"}}catch(s){let e=s instanceof Error?s.message:"Unknown error";return el.v.error("DatabaseApiService: Delete submission error",{component:"DatabaseApiService",action:"deleteSubmission",error:e}),{success:!1,message:"Delete service unavailable.",error:e}}}async createTrack(e){el.v.info("DatabaseApiService: Creating track",{component:"DatabaseApiService",action:"createTrack",data:{submissionId:e.submissionId,title:e.title}});try{var s,a;let t=await fetch("/api/tracks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(n.success)return el.v.info("DatabaseApiService: Track created",{component:"DatabaseApiService",action:"createTrack",trackId:null==(s=n.data)?void 0:s.id}),{success:!0,data:n.data,source:"API"};return el.v.error("DatabaseApiService: Create track failed",{component:"DatabaseApiService",action:"createTrack",error:n.error}),{success:!1,message:null!=(a=n.error)?a:"Create track failed"}}catch(s){let e=s instanceof Error?s.message:"Unknown error";return el.v.error("DatabaseApiService: Create track error",{component:"DatabaseApiService",action:"createTrack",error:e}),{success:!1,message:"Create track service unavailable.",error:e}}}async updateTrack(e,s){el.v.info("DatabaseApiService: Updating track",{component:"DatabaseApiService",action:"updateTrack",data:{trackId:e}});try{var a;let t=await fetch("/api/tracks/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),n=await t.json();if(n.success)return el.v.info("DatabaseApiService: Track updated",{component:"DatabaseApiService",action:"updateTrack",trackId:e}),{success:!0,data:n.data,source:"API"};return el.v.error("DatabaseApiService: Track update failed",{component:"DatabaseApiService",action:"updateTrack",error:n.error}),{success:!1,message:null!=(a=n.error)?a:"Update track failed"}}catch(s){let e=s instanceof Error?s.message:"Unknown error";return el.v.error("DatabaseApiService: Update track error",{component:"DatabaseApiService",action:"updateTrack",error:e}),{success:!1,message:"Update track service unavailable.",error:e}}}async getTracksBySubmissionId(e){el.v.info("DatabaseApiService: Getting tracks by submission ID",{component:"DatabaseApiService",action:"getTracksBySubmissionId",data:{submissionId:e}});try{var s;let a=await fetch("/api/submissions/".concat(e,"/tracks")),t=await a.json();if(t.success)return{success:!0,data:t.data,source:"API"};return{success:!1,data:[],message:null!=(s=t.error)?s:"Failed to get tracks"}}catch(s){let e=s instanceof Error?s.message:"Unknown error";return el.v.error("DatabaseApiService: Get tracks by submission ID error",{component:"DatabaseApiService",action:"getTracksBySubmissionId",error:e}),{success:!1,data:[],message:"Get tracks service unavailable.",error:e}}}async getTrackById(e){try{var s;let a=await fetch("/api/tracks/".concat(e)),t=await a.json();if(t.success)return{success:!0,data:t.data,source:"API"};return{success:!1,message:null!=(s=t.error)?s:"Failed to get track"}}catch(e){return console.error("API: Failed to get track by ID:",e),{success:!1,message:"Track service unavailable."}}}async deleteTrack(e){el.v.info("DatabaseApiService: Deleting track",{component:"DatabaseApiService",action:"deleteTrack",data:{trackId:e}});try{var s;let a=await fetch("/api/tracks/".concat(e),{method:"DELETE"}),t=await a.json();if(t.success)return el.v.info("DatabaseApiService: Track deleted",{component:"DatabaseApiService",action:"deleteTrack",trackId:e}),{success:!0,data:!0,source:"API"};return el.v.error("DatabaseApiService: Track deletion failed",{component:"DatabaseApiService",action:"deleteTrack",error:t.error}),{success:!1,message:null!=(s=t.error)?s:"Track deletion failed"}}catch(s){let e=s instanceof Error?s.message:"Unknown error";return el.v.error("DatabaseApiService: Delete track error",{component:"DatabaseApiService",action:"deleteTrack",error:e}),{success:!1,message:"Delete track service unavailable.",error:e}}}async createSubmissionWithTracks(e,s){el.v.info("DatabaseApiService: Creating submission with tracks",{component:"DatabaseApiService",action:"createSubmissionWithTracks",data:{title:e.title,trackCount:s.length}});try{var a,t,n;let r=await fetch("/api/submissions/with-tracks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission:e,tracks:s})}),l=await r.json();if(l.success)return el.v.info("DatabaseApiService: Submission with tracks created",{component:"DatabaseApiService",action:"createSubmissionWithTracks",submissionId:null==(t=l.data)||null==(a=t.submission)?void 0:a.id}),{success:!0,data:l.data,source:"API"};return el.v.error("DatabaseApiService: Create submission with tracks failed",{component:"DatabaseApiService",action:"createSubmissionWithTracks",error:l.error}),{success:!1,message:null!=(n=l.error)?n:"Create submission with tracks failed"}}catch(s){let e=s instanceof Error?s.message:"Unknown error";return el.v.error("DatabaseApiService: Create submission with tracks error",{component:"DatabaseApiService",action:"createSubmissionWithTracks",error:e}),{success:!1,message:"Create submission with tracks service unavailable.",error:e}}}async createSubmissionFromLegacy(e){try{var s,a;let{submission:t,tracks:n}={submission:{id:(s=e).id,title:s.songTitle,artist:s.artistName,UPC:s.upc||null,type:{single:"SINGLE",ep:"EP",lp:"ALBUM",album:"ALBUM",compilation:"COMPILATION"}[s.releaseType]||"SINGLE",coverImagePath:s.imageFile||s.imageUrl,releaseDate:new Date(s.releaseDate),status:{pending:"PENDING",approved:"APPROVED",rejected:"REJECTED",processing:"PROCESSING",published:"PUBLISHED",cancelled:"CANCELLED",draft:"DRAFT","Đ\xe3 nhận, đang chờ duyệt":"PENDING","Đ\xe3 duyệt, từ chối ph\xe1t h\xe0nh":"REJECTED","Đ\xe3 duyệt, đang chờ ph\xe1t h\xe0nh!":"APPROVED","Đ\xe3 ph\xe1t h\xe0nh, đang chờ ra mắt":"PROCESSING","Ho\xe0n th\xe0nh ph\xe1t h\xe0nh!":"PUBLISHED","Đ\xe3 hủy":"CANCELLED","Bản nh\xe1p":"DRAFT"}[s.status]||"PENDING",metadataLocked:s.metadataLocked||!1,published:s.published||!1,albumName:s.albumName||null,mainCategory:s.mainCategory||null,subCategory:s.subCategory||null,platforms:s.platforms?{platforms:s.platforms}:null,distributionLink:s.distributionLink||null,distributionPlatforms:s.distributionPlatforms?{platforms:s.distributionPlatforms}:null,statusVietnamese:s.statusVietnamese||null,rejectionReason:s.rejectionReason||null,notes:s.notes||null,signedDocumentPath:null,signedAt:null,signerFullName:null,isDocumentSigned:!1,userId:s.userId,labelId:s.labelId||""},tracks:(null==(a=s.trackInfos)?void 0:a.map(e=>({title:e.songTitle,artist:e.artistName,filePath:e.filePath||"",duration:e.duration||0,isrc:e.isrc||null,fileName:e.fileName||null,artistFullName:e.artistFullName||null,fileSize:e.fileSize||null,format:e.format||null,bitrate:e.bitrate||null,sampleRate:e.sampleRate||null,mainCategory:null,subCategory:null,lyrics:null})))||[]};return await this.createSubmissionWithTracks(t,n)}catch(s){let e=s instanceof Error?s.message:"Unknown error";return el.v.error("DatabaseApiService: Create submission from legacy error",{component:"DatabaseApiService",action:"createSubmissionFromLegacy",error:e}),{success:!1,message:"Legacy submission conversion failed.",error:e}}}async getVideos(e){try{var s;let a=e?"?".concat(new URLSearchParams(e).toString()):"",t=await fetch("/api/videos".concat(a)),n=await t.json();return n.success?{success:!0,data:n.data,source:"API"}:{success:!1,data:[],message:null!=(s=n.error)?s:"Failed to get videos"}}catch(e){return console.error("API: Failed to get videos:",e),{success:!1,data:[],message:"Video service unavailable."}}}async saveVideo(e){try{var s,a;let t=await fetch("/api/videos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();return n.success?{success:!0,data:null==(s=n.data)?void 0:s.id,source:"API"}:{success:!1,message:null!=(a=n.error)?a:"Save video failed"}}catch(e){return{success:!1,message:"Save video service unavailable.",error:e instanceof Error?e.message:"Unknown error"}}}async getFiles(e){try{var s;let a=await fetch("/api/files".concat(e?"?folderId=".concat(e):"")),t=await a.json();return t.success?{success:!0,data:t.data,source:"API"}:{success:!1,data:[],message:null!=(s=t.error)?s:"Failed to get files"}}catch(e){return console.error("API: Failed to get files:",e),{success:!1,data:[],message:"File service unavailable."}}}async getFolders(e){try{var s;let a=await fetch("/api/folders".concat(e?"?parentId=".concat(e):"")),t=await a.json();return t.success?{success:!0,data:t.data,source:"API"}:{success:!1,data:[],message:null!=(s=t.error)?s:"Failed to get folders"}}catch(e){return console.error("API: Failed to get folders:",e),{success:!1,data:[],message:"Folder service unavailable."}}}async getStatus(){try{let e=await fetch("".concat("","/api/database-status")),s=await e.json();return{api:this.apiAvailable,prisma:s.success,database:s.success}}catch(e){return console.error("API: Failed to get status:",e),{api:!1,prisma:!1,database:!1}}}async testConnection(){el.v.info("DatabaseApiService: Testing connection",{component:"DatabaseApiService",action:"testConnection"});try{let e=await fetch("".concat("","/api/database-status")),s=await e.json();return{success:s.success,data:s.success,source:"API"}}catch(s){let e=s instanceof Error?s.message:"Unknown error";return console.error("❌ Database connection test failed:",e),{success:!1,message:"Connection test failed.",error:e}}}constructor(){this.apiAvailable=!0,console.log("DatabaseApiService: Initialized (Production Only - API Based)")}}let ec=new ei;var eo=a(9509);function ed(e){let{onSubmissionAdded:s,showModal:a}=e,{user:l}=(0,n.A)(),[i,c]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[m,u]=(0,r.useState)("singer"),[x,g]=(0,r.useState)(""),[p,j]=(0,r.useState)(""),[b,f]=(0,r.useState)(""),[v,y]=(0,r.useState)("pop"),[w,S]=(0,r.useState)("official"),[k,A]=(0,r.useState)("single"),[T,L]=(0,r.useState)("yes"),[P,I]=(0,r.useState)("no"),[M,R]=(0,r.useState)([]),[F,V]=(0,r.useState)("no"),[Z,W]=(0,r.useState)(""),[G,el]=(0,r.useState)(""),[ei,ed]=(0,r.useState)(!1),[eh,em]=(0,r.useState)(1e3),[eu,ex]=(0,r.useState)(null),[eg,ep]=(0,r.useState)(""),[ej,eb]=(0,r.useState)([]),[ef,ev]=(0,r.useState)(null),eN=(0,r.useRef)({});if((0,r.useEffect)(()=>{if(el((0,z.ww)()),l){var e,s;c(null!=(e=l.fullName)?e:""),d("Artist"===l.role?l.username:""),f(null!=(s=l.email)?s:"")}},[l]),!l)return(0,t.jsx)("div",{className:"p-6 min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Đang tải th\xf4ng tin"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Vui l\xf2ng chờ trong gi\xe2y l\xe1t..."})]})});let ey=(e,s,a,t)=>{eb(n=>n.map(n=>n.id===e?{...n,info:{...n.info,additionalArtists:n.info.additionalArtists.map((e,n)=>n===s?{...e,[a]:t}:e)}}:n))},ew=async e=>{let{files:s}=e.target,t=null==s?void 0:s[0];if(t)try{let e=await (0,z.Wl)(t);if(!e.valid)return void a("Lỗi",e.errors,"error");ex(t),ep(URL.createObjectURL(t))}catch(e){a("Lỗi",["C\xf3 lỗi xảy ra khi tải ảnh"],"error")}},eS=async()=>{let e=[];x.trim()||e.push("Vui l\xf2ng nhập t\xean b\xe0i h\xe1t"),o.trim()||e.push("Vui l\xf2ng nhập t\xean nghệ sĩ"),i.trim()||e.push("Vui l\xf2ng nhập họ t\xean đầy đủ"),b.trim()||e.push("Vui l\xf2ng nhập email"),b.includes("@")||e.push("Email kh\xf4ng hợp lệ"),0===ej.length&&e.push("Vui l\xf2ng upload \xedt nhất một file nhạc"),eu||e.push("Vui l\xf2ng upload ảnh b\xeca"),G||e.push("Vui l\xf2ng chọn ng\xe0y ph\xe1t h\xe0nh");let t=ej.filter(e=>!e.info.songTitle.trim());if(t.length>0&&e.push("".concat(t.length," track chưa c\xf3 t\xean b\xe0i h\xe1t")),ej.forEach(s=>{s.info.additionalArtists.forEach((a,t)=>{a.name.trim()||e.push('Track "'.concat(s.info.songTitle,'": Nghệ sĩ phối hợp #').concat(t+1," chưa c\xf3 t\xean"))})}),e.length>0)return void a("Lỗi",e,"error");ed(!0);try{var n,r,c;let e;(0,q.Pv)("form","upload-submission-form",{trackCount:ej.length,hasImage:!!eu,mainCategory:v,subCategory:w,releaseType:k}),e=eh,eb(s=>s.map(s=>{if(!s.info.isrc||""===s.info.isrc){let{isrc:a,newCounter:t}=((e,s)=>{let a=s+1,t=new Date().getFullYear().toString().slice(2);return{isrc:"VNA2P".concat(t).concat(String(a).padStart(5,"0")),newCounter:a}})(0,e);return e=t,{...s,info:{...s.info,isrc:a}}}return s})),em(e),await new Promise(e=>setTimeout(e,100));let t=(null==(n=ej[0])?void 0:n.info.isrc)||"VNA2P".concat(new Date().getFullYear().toString().slice(2),"00001"),d=new FormData;eu&&d.append("file",eu),d.append("type","image"),d.append("userId",l.id),d.append("artistName",o),d.append("songTitle",x),d.append("isrc",t);let h=await fetch("/api/upload",{method:"POST",body:d}),u=await h.json();if(!u.success)throw Error("Lỗi upload ảnh: ".concat(u.message));let g=[];for(let e of ej){let s=new FormData;s.append("file",e.file),s.append("type","audio"),s.append("userId",l.id),s.append("artistName",o),s.append("songTitle",e.info.songTitle),s.append("isrc",e.id);let a=await fetch("/api/upload",{method:"POST",body:s}),t=await a.json();if(!t.success)throw Error("Lỗi upload \xe2m thanh ".concat(e.file.name,": ").concat(t.message));g.push({title:e.info.songTitle,artist:e.info.artistName,filePath:t.url,duration:e.info.duration||0,isrc:e.id,fileName:e.file.name,artistFullName:e.info.artistFullName,fileSize:e.file.size,format:e.file.type,bitrate:null,sampleRate:null,mainCategory:e.info.mainCategory||null,subCategory:e.info.subCategory||null,lyrics:e.info.lyrics||null})}let j="single"===k?Y.SINGLE:"ep"===k?Y.EP:"album"===k||"lp"===k?Y.ALBUM:Y.SINGLE,f={title:x,artist:o,UPC:null,type:j,coverImagePath:u.url,releaseDate:new Date(G),status:Q.PENDING,metadataLocked:!1,published:!1,albumName:p||null,mainCategory:v,subCategory:w||null,platforms:"yes"===P?{platforms:M}:null,distributionLink:null,distributionPlatforms:null,statusVietnamese:"Đ\xe3 nhận, đang chờ duyệt",rejectionReason:null,notes:"yes"===F?Z:null,signedDocumentPath:null,signedAt:null,signerFullName:null,isDocumentSigned:!1,userId:l.id,labelId:l.id},N=await ec.createSubmissionWithTracks(f,g);if(!N.success)throw Error(N.message||"Kh\xf4ng thể tạo submission");let y={id:N.data.submission.id,userId:l.id,isrc:(null==(r=g[0])?void 0:r.isrc)||"",uploaderUsername:l.username,artistName:o,songTitle:x,albumName:p,userEmail:b,imageFile:null!=(c=null==eu?void 0:eu.name)?c:"",imageUrl:u.url,audioUrl:1===g.length?g[0].filePath:void 0,audioUrls:g.map(e=>e.filePath),audioFilesCount:g.length,status:"Đ\xe3 nhận, đang chờ duyệt",submissionDate:new Date().toISOString(),mainCategory:v,subCategory:w,releaseType:k,isCopyrightOwner:T,hasBeenReleased:P,platforms:"yes"===P?M:[],hasLyrics:F,lyrics:"yes"===F?Z:"",releaseDate:G,artistRole:m,fullName:i,additionalArtists:[],trackInfos:ej.map(e=>e.info)};s(y),(0,q.kF)(N.data.submission.id,"create","success",{artistName:o,songTitle:x,trackCount:g.length,mainCategory:v,subCategory:w,releaseType:k,releaseDate:G}),ek(),a("Th\xe0nh c\xf4ng",["Đ\xe3 gửi b\xe0i h\xe1t để chờ duyệt!"],"success")}catch(s){let e=s instanceof Error?s.message:"C\xf3 lỗi xảy ra khi gửi b\xe0i h\xe1t";(0,q.kF)("Kh\xf4ng x\xe1c định","create","error",{artistName:o,songTitle:x,error:e,trackCount:ej.length}),a("Lỗi",[e],"error")}finally{ed(!1)}},ek=()=>{var e;d("Artist"===l.role?l.username:""),g(""),j(""),f(null!=(e=l.email)?e:""),y("pop"),S("official"),A("single"),L("yes"),I("no"),R([]),V("no"),W(""),ex(null),ep(""),eb([]),el((0,z.ww)())};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-blue-950 p-4",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"\uD83C\uDFB5 Upload nhạc để ph\xe1t h\xe0nh to\xe0n cầu"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:eo.env.COMPANY_DESCRIPTION})]}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)(D,{})})]}),(0,t.jsxs)(K.tU,{defaultValue:"basic",className:"w-full",onValueChange:e=>{(0,q.Pv)("tab",e,{formStep:e})},children:[(0,t.jsxs)(K.j7,{className:"grid w-full grid-cols-4",children:[(0,t.jsxs)(K.Xi,{value:"basic",className:"flex items-center gap-2",children:[(0,t.jsx)(h.A,{className:"h-4 w-4"}),"Th\xf4ng tin cơ bản"]}),(0,t.jsxs)(K.Xi,{value:"media",className:"flex items-center gap-2",children:[(0,t.jsx)(U.A,{className:"h-4 w-4"}),"Media Files"]}),(0,t.jsxs)(K.Xi,{value:"metadata",className:"flex items-center gap-2",children:[(0,t.jsx)(ee.A,{className:"h-4 w-4"}),"Metadata"]}),(0,t.jsxs)(K.Xi,{value:"release",className:"flex items-center gap-2",children:[(0,t.jsx)(es.A,{className:"h-4 w-4"}),"Ph\xe1t h\xe0nh"]})]}),(0,t.jsx)(K.av,{value:"basic",className:"space-y-6",children:(0,t.jsx)(E.Zp,{children:(0,t.jsxs)(E.Wu,{className:"p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Th\xf4ng tin nghệ sĩ"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"fullName",children:"Họ v\xe0 t\xean đầy đủ *"}),(0,t.jsx)(B.p,{id:"fullName",value:i,onChange:e=>c(e.target.value),placeholder:"V\xed dụ: Nguyễn Mạnh A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"artistName",children:"T\xean nghệ sĩ *"}),(0,t.jsx)(B.p,{id:"artistName",value:o,onChange:e=>d(e.target.value),placeholder:"V\xed dụ: An Kun"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"userEmail",children:"Email *"}),(0,t.jsx)(B.p,{id:"userEmail",type:"email",value:b,onChange:e=>f(e.target.value),placeholder:eo.env.COMPANY_EMAIL})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"artistRole",children:"Vai tr\xf2 ch\xednh *"}),(0,t.jsxs)(_.l6,{value:m,onValueChange:e=>u(e),children:[(0,t.jsx)(_.bq,{children:(0,t.jsx)(_.yv,{})}),(0,t.jsxs)(_.gC,{children:[(0,t.jsx)(_.eb,{value:"singer",children:"Ca sĩ"}),(0,t.jsx)(_.eb,{value:"singer-songwriter",children:"Singer-Songwriter"}),(0,t.jsx)(_.eb,{value:"rapper",children:"Rapper"}),(0,t.jsx)(_.eb,{value:"producer",children:"Producer"}),(0,t.jsx)(_.eb,{value:"composer",children:"Composer"}),(0,t.jsx)(_.eb,{value:"songwriter",children:"Songwriter"}),(0,t.jsx)(_.eb,{value:"instrumental",children:"Instrumental"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"songTitle",children:"T\xean b\xe0i h\xe1t *"}),(0,t.jsx)(B.p,{id:"songTitle",value:x,onChange:e=>g(e.target.value),placeholder:"T\xean b\xe0i h\xe1t của bạn"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"albumName",children:"T\xean album (t\xf9y chọn)"}),(0,t.jsx)(B.p,{id:"albumName",value:p,onChange:e=>j(e.target.value),placeholder:"T\xean b\xe0i h\xe1t - Single hoặc Album - EP"})]})]})]})})}),(0,t.jsx)(K.av,{value:"media",className:"space-y-6",children:(0,t.jsx)(E.Zp,{children:(0,t.jsxs)(E.Wu,{className:"p-6 space-y-6",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Tải l\xean Media Files"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"imageUpload",children:"Ảnh b\xeca b\xe0i h\xe1t (JPG, 4000x4000px, tối đa 10MB) *"}),(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,t.jsx)("input",{id:"imageUpload",type:"file",accept:"image/jpeg,image/jpg",onChange:ew,className:"hidden"}),(0,t.jsxs)(C.$,{type:"button",variant:"outline",onClick:()=>{var e;return null==(e=document.getElementById("imageUpload"))?void 0:e.click()},className:"mb-4",children:[(0,t.jsx)(U.A,{className:"mr-2 h-4 w-4"}),"Chọn b\xeca ảnh đĩa"]}),eg&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("img",{src:eg,alt:"Xem trước n\xe8",className:"mx-auto max-w-xs rounded-lg"}),(0,t.jsxs)(C.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{ex(null),ep("")},className:"mt-2",children:[(0,t.jsx)(N.A,{className:"h-4 w-4 mr-2"}),"X\xf3a ảnh"]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"audioUpload",children:"File nhạc (WAV 24-bit, 2 k\xeanh, 192kHz, tối đa 100MB mỗi file) *"}),(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,t.jsx)("input",{id:"audioUpload",type:"file",accept:"audio/wav",multiple:!0,onChange:e=>{let{files:s}=e.target;s&&0!==s.length&&Array.from(s).forEach(async e=>{try{let s=(0,z.XN)(e);if(!s.valid)return void a("Lỗi",["".concat(e.name,": ").concat(s.errors.join(", "))],"error");let t="temp-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),n={file:e,id:t,info:{fileName:e.name,isrc:"",songTitle:e.name.replace(/\.[^/.]+$/,""),artistName:o,artistFullName:i,additionalArtists:[]}};eb(e=>[...e,n])}catch(s){a("Lỗi",["C\xf3 lỗi xảy ra khi tải file ".concat(e.name)],"error")}})},className:"hidden"}),(0,t.jsxs)(C.$,{type:"button",variant:"outline",onClick:()=>{var e;return null==(e=document.getElementById("audioUpload"))?void 0:e.click()},className:"mb-4",children:[(0,t.jsx)(U.A,{className:"mr-2 h-4 w-4"}),"Chọn file nhạc"]}),ej.length>0&&(0,t.jsx)("div",{className:"mt-4 space-y-4",children:ej.map((e,s)=>(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"font-medium",children:e.file.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(C.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{var s,a,t,n;return s=e.id,a=URL.createObjectURL(e.file),void(ef===s?(null==(t=eN.current[s])||t.pause(),ev(null)):(ef&&(null==(n=eN.current[ef])||n.pause()),!eN.current[s]&&(eN.current[s]=new Audio(a),eN.current[s].addEventListener("ended",()=>{ev(null)})),eN.current[s].play(),ev(s)))},children:ef===e.id?(0,t.jsx)(ea.A,{className:"h-4 w-4"}):(0,t.jsx)(et.A,{className:"h-4 w-4"})}),(0,t.jsx)(C.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{if(eb(s=>s.filter(s=>s.id!==e)),ef===e){var s;null==(s=eN.current[e])||s.pause(),ev(null)}eN.current[e]&&(URL.revokeObjectURL(eN.current[e].src),delete eN.current[e])})(e.id),children:(0,t.jsx)(en.A,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"track-title-".concat(e.id),children:"T\xean b\xe0i h\xe1t"}),(0,t.jsx)(B.p,{id:"track-title-".concat(e.id),value:e.info.songTitle,onChange:s=>{eb(a=>a.map(a=>a.id===e.id?{...a,info:{...a.info,songTitle:s.target.value}}:a))},placeholder:"Nhập t\xean b\xe0i h\xe1t",className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(J.J,{htmlFor:"track-isrc-".concat(e.id),children:["ISRC (t\xf9y chọn)",(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"- Để trống nếu chưa c\xf3, sẽ tự tạo khi release"})]}),(0,t.jsx)(B.p,{id:"track-isrc-".concat(e.id),value:e.info.isrc,onChange:s=>{var a,t;return a=e.id,t=s.target.value,void eb(e=>e.map(e=>e.id===a?{...e,info:{...e.info,isrc:t}}:e))},placeholder:"VNA2P25XXXXX hoặc để trống",className:"mt-1",maxLength:12}),e.info.isrc&&(0,t.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:["✓ ISRC đ\xe3 c\xf3: ",e.info.isrc]}),!e.info.isrc&&(0,t.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"\uD83D\uDCCB Sẽ tự tạo ISRC khi gửi submission"})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)(J.J,{children:"Nghệ sĩ tham gia ft. (t\xf9y chọn)"}),(0,t.jsxs)(C.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{var s;return s=e.id,void eb(e=>e.map(e=>e.id===s?{...e,info:{...e.info,additionalArtists:[...e.info.additionalArtists,{name:"",fullName:"",role:"featuring",percentage:0}]}}:e))},children:[(0,t.jsx)(er.A,{className:"h-4 w-4 mr-2"}),"Th\xeam nghệ sĩ"]})]}),e.info.additionalArtists.map((s,a)=>(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 mb-2 p-2 bg-gray-50 rounded",children:[(0,t.jsx)(B.p,{placeholder:"T\xean nghệ sĩ",value:s.name,onChange:s=>ey(e.id,a,"name",s.target.value)}),(0,t.jsx)(B.p,{placeholder:"Họ t\xean đầy đủ",value:s.fullName||"Theo giấy tờ CCCD",onChange:s=>ey(e.id,a,"fullName",s.target.value)}),(0,t.jsxs)(_.l6,{value:s.role,onValueChange:s=>ey(e.id,a,"role",s),children:[(0,t.jsx)(_.bq,{children:(0,t.jsx)(_.yv,{})}),(0,t.jsxs)(_.gC,{children:[(0,t.jsx)(_.eb,{value:"featuring",children:"Featuring"}),(0,t.jsx)(_.eb,{value:"vocalist",children:"Vocalist"}),(0,t.jsx)(_.eb,{value:"rapper",children:"Rapper"}),(0,t.jsx)(_.eb,{value:"producer",children:"Producer"}),(0,t.jsx)(_.eb,{value:"composer",children:"Composer"}),(0,t.jsx)(_.eb,{value:"songwriter",children:"Songwriter"}),(0,t.jsx)(_.eb,{value:"instrumental",children:"Instrumental"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(B.p,{type:"number",placeholder:"% quyền",min:"0",max:"100",value:s.percentage,onChange:s=>ey(e.id,a,"percentage",parseInt(s.target.value)||0)}),(0,t.jsx)(C.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{var s;return s=e.id,void eb(e=>e.map(e=>e.id===s?{...e,info:{...e.info,additionalArtists:e.info.additionalArtists.filter((e,s)=>s!==a)}}:e))},children:(0,t.jsx)(N.A,{className:"h-4 w-4"})})]})]},a))]})]},e.id))})]})]})]})})}),(0,t.jsx)(K.av,{value:"metadata",className:"space-y-6",children:(0,t.jsx)(E.Zp,{children:(0,t.jsxs)(E.Wu,{className:"p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Th\xf4ng tin metadata"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"mainCategory",children:"Thể loại ch\xednh *"}),(0,t.jsxs)(_.l6,{value:v,onValueChange:e=>y(e),children:[(0,t.jsx)(_.bq,{children:(0,t.jsx)(_.yv,{})}),(0,t.jsxs)(_.gC,{children:[(0,t.jsx)(_.eb,{value:"pop",children:"Pop"}),(0,t.jsx)(_.eb,{value:"singer-songwriter",children:"Singer-Songwriter"}),(0,t.jsx)(_.eb,{value:"hiphoprap",children:"Hip Hop/Rap"}),(0,t.jsx)(_.eb,{value:"edm",children:"EDM"}),(0,t.jsx)(_.eb,{value:"rnb",children:"R&B"}),(0,t.jsx)(_.eb,{value:"ballad",children:"Ballad"}),(0,t.jsx)(_.eb,{value:"acoustic",children:"Acoustic"}),(0,t.jsx)(_.eb,{value:"indie",children:"Indie"}),(0,t.jsx)(_.eb,{value:"other_main",children:"Kh\xe1c"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"subCategory",children:"Thể loại phụ *"}),(0,t.jsxs)(_.l6,{value:w,onValueChange:e=>S(e),children:[(0,t.jsx)(_.bq,{children:(0,t.jsx)(_.yv,{})}),(0,t.jsxs)(_.gC,{children:[(0,t.jsx)(_.eb,{value:"official",children:"Official"}),(0,t.jsx)(_.eb,{value:"cover",children:"Cover"}),(0,t.jsx)(_.eb,{value:"vpop",children:"V-Pop"}),(0,t.jsx)(_.eb,{value:"lofi",children:"Lo-fi"}),(0,t.jsx)(_.eb,{value:"chill",children:"Chill"}),(0,t.jsx)(_.eb,{value:"trap",children:"Trap"}),(0,t.jsx)(_.eb,{value:"house",children:"House"}),(0,t.jsx)(_.eb,{value:"alternative",children:"Alternative"}),(0,t.jsx)(_.eb,{value:"folk",children:"Folk"}),(0,t.jsx)(_.eb,{value:"other_sub",children:"Kh\xe1c"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"releaseType",children:"Loại ph\xe1t h\xe0nh *"}),(0,t.jsxs)(_.l6,{value:k,onValueChange:e=>A(e),children:[(0,t.jsx)(_.bq,{children:(0,t.jsx)(_.yv,{})}),(0,t.jsxs)(_.gC,{children:[(0,t.jsx)(_.eb,{value:"single",children:"Single"}),(0,t.jsx)(_.eb,{value:"ep",children:"EP"}),(0,t.jsx)(_.eb,{value:"lp",children:"LP"}),(0,t.jsx)(_.eb,{value:"album",children:"Album"})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"Bạn c\xf3 sở hữu bản quyền của b\xe0i h\xe1t n\xe0y kh\xf4ng? *"}),(0,t.jsxs)(H,{value:T,onValueChange:e=>L(e),className:"flex gap-4 mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(X,{value:"yes",id:"copyright-yes"}),(0,t.jsx)(J.J,{htmlFor:"copyright-yes",children:"C\xf3"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(X,{value:"no",id:"copyright-no"}),(0,t.jsx)(J.J,{htmlFor:"copyright-no",children:"Kh\xf4ng"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"B\xe0i h\xe1t n\xe0y đ\xe3 từng được ph\xe1t h\xe0nh chưa? *"}),(0,t.jsxs)(H,{value:P,onValueChange:e=>I(e),className:"flex gap-4 mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(X,{value:"yes",id:"released-yes"}),(0,t.jsx)(J.J,{htmlFor:"released-yes",children:"Đ\xe3 ph\xe1t h\xe0nh"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(X,{value:"no",id:"released-no"}),(0,t.jsx)(J.J,{htmlFor:"released-no",children:"Chưa ph\xe1t h\xe0nh"})]})]})]}),"yes"===P&&(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"C\xe1c nền tảng đ\xe3 ph\xe1t h\xe0nh:"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:[{value:"youtube",label:"YouTube"},{value:"spotify",label:"Spotify"},{value:"apple_music",label:"Apple Music"},{value:"soundcloud",label:"SoundCloud"},{value:"other_platform",label:"Kh\xe1c"}].map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)($,{id:e.value,checked:M.includes(e.value),onCheckedChange:s=>{var a;return a=e.value,void(s?R(e=>[...e,a]):R(e=>e.filter(e=>e!==a)))}}),(0,t.jsx)(J.J,{htmlFor:e.value,children:e.label})]},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"B\xe0i h\xe1t c\xf3 lời kh\xf4ng? *"}),(0,t.jsxs)(H,{value:F,onValueChange:e=>V(e),className:"flex gap-4 mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(X,{value:"yes",id:"lyrics-yes"}),(0,t.jsx)(J.J,{htmlFor:"lyrics-yes",children:"C\xf3 lời"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(X,{value:"no",id:"lyrics-no"}),(0,t.jsx)(J.J,{htmlFor:"lyrics-no",children:"Instrumental"})]})]})]}),"yes"===F&&(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"lyrics",children:"Lời b\xe0i h\xe1t"}),(0,t.jsx)(O.T,{id:"lyrics",value:Z,onChange:e=>W(e.target.value),placeholder:"Nhập lời b\xe0i h\xe1t của bạn...",rows:8})]})]})})}),(0,t.jsx)(K.av,{value:"release",className:"space-y-6",children:(0,t.jsx)(E.Zp,{children:(0,t.jsxs)(E.Wu,{className:"p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Th\xf4ng tin ph\xe1t h\xe0nh"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"releaseDate",children:"Ng\xe0y ph\xe1t h\xe0nh mong muốn *"}),(0,t.jsx)(B.p,{id:"releaseDate",type:"date",value:G,onChange:e=>el(e.target.value),min:(0,z.ww)()}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Ng\xe0y ph\xe1t h\xe0nh phải \xedt nhất 2 ng\xe0y kể từ h\xf4m nay hoặc đ\xe3 từng ph\xe1t h\xe0nh th\xec nhập ng\xe0y cũ"})]}),(0,t.jsxs)("div",{className:"bg-secondary/50 border border-border/50 p-4 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-semibold mb-2 text-foreground",children:"\uD83D\uDCCB T\xf3m tắt th\xf4ng tin"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm text-foreground",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Nghệ sĩ:"})," ",o||"Chưa nhập"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"B\xe0i h\xe1t:"})," ",x||"Chưa nhập"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Album:"})," ",p||"Kh\xf4ng c\xf3"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Thể loại:"})," ",v," - ",w]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Loại ph\xe1t h\xe0nh:"})," ",k]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Files \xe2m thanh:"})," ",ej.length," file(s)"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"C\xf3 ảnh b\xeca:"})," ",eu?"C\xf3":"Chưa c\xf3"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Ng\xe0y ph\xe1t h\xe0nh:"})," ",G||"Chưa chọn"]})]})]}),(0,t.jsx)(C.$,{onClick:eS,disabled:ei||!x||!o||0===ej.length,className:"w-full",size:"lg",children:ei?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Đang gửi..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(es.A,{className:"mr-2 h-4 w-4"}),"Gửi để tớ duyệt nhanh duyệt lẹ n\xe0o"]})})]})})})]})]})})}var eh=a(3786),em=a(1788);function eu(e){let{isOpen:s,onClose:a,submission:n,onUpdateStatus:l,onUpdateSubmission:i,onDeleteSubmission:o,showModal:d,isLabelManager:h=!1}=e,[m,u]=(0,r.useState)(""),[x,g]=(0,r.useState)(""),[p,j]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{n&&(u(n.upc||""),g(n.distributionLink||""))},[n]),!s||!n)return null;let b=n.status&&(n.status.includes("Đ\xe3 ph\xe1t h\xe0nh")||n.status.includes("Ho\xe0n th\xe0nh ph\xe1t h\xe0nh")),f=["Đ\xe3 nhận, đang chờ duyệt","Đ\xe3 duyệt, từ chối ph\xe1t h\xe0nh","Đ\xe3 duyệt, đang chờ ph\xe1t h\xe0nh!","Đ\xe3 ph\xe1t h\xe0nh, đang chờ ra mắt","Ho\xe0n th\xe0nh ph\xe1t h\xe0nh!"],v=e=>{l&&n&&(l(n.id,e),d&&d("Cập nhật th\xe0nh c\xf4ng",['Đ\xe3 cập nhật trạng th\xe1i của "'.concat(n.songTitle,'" th\xe0nh "').concat(e,'"')],"success"))};return(0,t.jsx)("div",{className:"fixed inset-0 bg-gray-900/85 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:e=>{e.target===e.currentTarget&&a()},children:(0,t.jsxs)("div",{className:"bg-gray-800 text-gray-200 p-8 rounded-xl shadow-2xl border border-gray-700 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,t.jsxs)("h3",{className:"text-2xl font-semibold text-purple-400",children:["Chi Tiết: ",n.songTitle]}),(0,t.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-white text-3xl",children:(0,t.jsx)(N.A,{})})]}),(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"ID:"}),(0,t.jsx)("span",{className:"ml-2 font-light",children:n.id})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"ISRC:"}),(0,t.jsx)("span",{className:"ml-2 font-light text-green-400",children:n.isrc||"N/A"})]}),b&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"UPC:"}),h&&p?(0,t.jsx)(B.p,{value:m,onChange:e=>u(e.target.value),className:"ml-2 inline-block w-64 h-7 bg-gray-700 border-gray-600",placeholder:"Nhập UPC..."}):(0,t.jsx)("span",{className:"ml-2 font-light text-yellow-400",children:n.upc||"Chưa c\xf3"}),h&&!p&&(0,t.jsx)("button",{onClick:()=>j(!0),className:"ml-2 text-xs text-blue-400 hover:text-blue-300",children:"Chỉnh sửa"})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"T\xean b\xe0i h\xe1t:"}),(0,t.jsx)("span",{className:"ml-2 font-light",children:n.songTitle})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Nghệ sĩ ch\xednh:"}),(0,t.jsxs)("span",{className:"ml-2 font-light",children:[n.artistName," (T\xean thật: ",n.fullName||"N/A",") - Vai tr\xf2: ",n.artistRole]})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Người gửi:"}),(0,t.jsxs)("span",{className:"ml-2 font-light",children:[n.userEmail," (Username: ",n.uploaderUsername,")"]})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Ng\xe0y gửi:"}),(0,t.jsx)("span",{className:"ml-2 font-light",children:n.submissionDate})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Ng\xe0y ph\xe1t h\xe0nh:"}),(0,t.jsx)("span",{className:"ml-2 font-light",children:n.releaseDate?new Date(n.releaseDate).toLocaleDateString("vi-VN"):"N/A"})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Trạng th\xe1i:"}),(0,t.jsx)("span",{className:"status-badge ml-2 px-2 py-1 rounded-full text-xs font-semibold uppercase tracking-wide ".concat((0,z.qY)(n.status)),children:n.status}),l&&(0,t.jsxs)(_.l6,{value:n.status,onValueChange:v,children:[(0,t.jsx)(_.bq,{className:"inline-block ml-4 w-64 h-8 bg-gray-700 border-gray-600",children:(0,t.jsx)(_.yv,{placeholder:"Cập nhật trạng th\xe1i"})}),(0,t.jsx)(_.gC,{children:f.map(e=>(0,t.jsx)(_.eb,{value:e,children:e},e))})]})]}),b&&(0,t.jsxs)("div",{className:"py-2 px-3 bg-gray-750 rounded-md",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("strong",{children:"Link ph\xe2n phối:"}),h&&p&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(C.$,{variant:"default",size:"sm",onClick:()=>{i&&n&&(i(n.id,{upc:m,distributionLink:x}),d&&d("Cập nhật th\xe0nh c\xf4ng",["Đ\xe3 cập nhật th\xf4ng tin ph\xe2n phối th\xe0nh c\xf4ng"],"success"),j(!1))},className:"h-7 text-xs bg-green-600 hover:bg-green-700",children:"Lưu th\xf4ng tin"}),(0,t.jsx)(C.$,{variant:"outline",size:"sm",onClick:()=>j(!1),className:"h-7 text-xs",children:"Hủy"})]}),h&&!p&&(0,t.jsx)(C.$,{variant:"outline",size:"sm",onClick:()=>j(!0),className:"h-7 text-xs",children:"Chỉnh sửa th\xf4ng tin"})]}),h&&p?(0,t.jsx)(B.p,{value:x,onChange:e=>g(e.target.value),className:"mt-2 w-full h-8 bg-gray-700 border-gray-600",placeholder:"Nhập FFM.to link..."}):x?(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 flex items-center gap-1",children:[x," ",(0,t.jsx)(eh.A,{size:14})]}),(0,t.jsx)(()=>x&&(x.includes("ffm.to")||x.includes("featuredmusic.to")||x.includes("feature.fm"))?(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-3",children:[(0,t.jsxs)("a",{href:"https://open.spotify.com/search/".concat(encodeURIComponent(n.songTitle)),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-green-400 hover:text-green-300 transition-colors",children:[(0,t.jsx)("div",{className:"w-5 h-5 relative",children:(0,t.jsx)(c.default,{src:"/platforms/spotify.png",alt:"Spotify",width:20,height:20})}),(0,t.jsx)("span",{children:"Spotify"}),(0,t.jsx)(eh.A,{size:12})]}),(0,t.jsxs)("a",{href:"https://music.apple.com/search?term=".concat(encodeURIComponent(n.songTitle)),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-red-400 hover:text-red-300 transition-colors",children:[(0,t.jsx)("div",{className:"w-5 h-5 relative",children:(0,t.jsx)(c.default,{src:"/platforms/apple.png",alt:"Apple Music",width:20,height:20})}),(0,t.jsx)("span",{children:"Apple Music"}),(0,t.jsx)(eh.A,{size:12})]}),(0,t.jsxs)("a",{href:"https://www.youtube.com/results?search_query=".concat(encodeURIComponent(n.songTitle+" "+n.artistName)),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-red-500 hover:text-red-400 transition-colors",children:[(0,t.jsx)("div",{className:"w-5 h-5 relative",children:(0,t.jsx)(c.default,{src:"/platforms/youtube.png",alt:"YouTube",width:20,height:20})}),(0,t.jsx)("span",{children:"YouTube"}),(0,t.jsx)(eh.A,{size:12})]})]}):null,{})]}):(0,t.jsx)("p",{className:"mt-2 text-gray-400 italic",children:"Chưa c\xf3 link ph\xe2n phối"})]}),(0,t.jsx)("hr",{className:"my-3 border-gray-700"}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{children:(0,t.jsx)("strong",{children:"Ảnh b\xeca:"})}),(0,t.jsxs)(C.$,{variant:"outline",size:"sm",onClick:()=>{if(n.imageUrl&&n.imageUrl.startsWith("data:")){let e=document.createElement("a");e.href=n.imageUrl,e.download="".concat(n.isrc,".jpg"),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},className:"text-xs",children:[(0,t.jsx)(em.A,{className:"h-4 w-4 mr-1"}),"Tải xuống"]})]}),n.imageUrl&&(0,t.jsx)("div",{className:"mt-2 rounded-md overflow-hidden w-full max-w-xs mx-auto",children:(0,t.jsx)("div",{className:"relative w-full aspect-square",children:(0,t.jsx)(c.default,{src:"Various Artist"===n.artistName?"/placeholders/various-artist.jpg":n.imageUrl||"/placeholders/default-cover.jpg",alt:"Cover for ".concat(n.songTitle),className:"object-contain rounded-lg border border-gray-600",fill:!0,sizes:"(max-width: 768px) 100vw, 300px",onError:e=>{e.target.src="Various Artist"===n.artistName?"/placeholders/various-artist.jpg":"/placeholders/default-cover.jpg"}})})}),(0,t.jsx)("hr",{className:"my-3 border-gray-700"}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Thể loại ch\xednh:"}),(0,t.jsx)("span",{className:"ml-2 font-light",children:n.mainCategory})]}),n.subCategory&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Thể loại phụ:"}),(0,t.jsx)("span",{className:"ml-2 font-light",children:n.subCategory})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Định dạng ph\xe1t h\xe0nh:"}),(0,t.jsxs)("span",{className:"ml-2 font-light",children:[n.releaseType," (",n.audioFilesCount," track)"]})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"T\xean file ảnh b\xeca:"}),(0,t.jsx)("span",{className:"ml-2 font-light",children:n.imageFile})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Bản quyền:"}),(0,t.jsx)("span",{className:"ml-2 font-light",children:"yes"===n.isCopyrightOwner?"Ch\xednh chủ":"Cover/Remix"})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Đ\xe3 ph\xe1t h\xe0nh trước đ\xf3:"}),(0,t.jsx)("span",{className:"ml-2 font-light",children:"yes"===n.hasBeenReleased?"Rồi":"Chưa"})]}),"yes"===n.hasBeenReleased&&n.platforms&&n.platforms.length>0&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Nền tảng đ\xe3 ph\xe1t h\xe0nh:"}),(0,t.jsx)("span",{className:"ml-2 font-light",children:n.platforms.join(", ")})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"C\xf3 lời:"}),(0,t.jsx)("span",{className:"ml-2 font-light",children:"yes"===n.hasLyrics?"C\xf3":"Kh\xf4ng"})]}),"yes"===n.hasLyrics&&n.lyrics&&(0,t.jsxs)("div",{className:"mt-2 p-3 bg-gray-750 rounded-md",children:[(0,t.jsx)("strong",{className:"block mb-1 text-gray-400",children:"Lời b\xe0i h\xe1t:"}),(0,t.jsx)("pre",{className:"whitespace-pre-wrap text-xs font-light",children:n.lyrics})]}),n.additionalArtists&&n.additionalArtists.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{className:"my-3 border-gray-700"}),(0,t.jsx)("p",{children:(0,t.jsx)("strong",{children:"Nghệ sĩ hợp t\xe1c:"})}),(0,t.jsx)("ul",{className:"list-disc list-inside ml-4 font-light",children:n.additionalArtists.map((e,s)=>(0,t.jsxs)("li",{children:[e.name," (Vai tr\xf2: ",e.role,", T\xean thật: ",e.fullName||"N/A",")"]},s))})]}),n.trackInfos&&n.trackInfos.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{className:"my-3 border-gray-700"}),(0,t.jsx)("p",{children:(0,t.jsx)("strong",{children:"Chi tiết từng track:"})}),(0,t.jsx)("div",{className:"space-y-2",children:n.trackInfos.map((e,s)=>(0,t.jsxs)("div",{className:"p-2 bg-gray-700 rounded",children:[(0,t.jsxs)("p",{className:"text-xs",children:[(0,t.jsxs)("strong",{children:["Track ",s+1,":"]})," ",e.songTitle||e.fileName]}),(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:["Nghệ sĩ: ",e.artistName," (",e.artistFullName,")"]}),e.additionalArtists&&e.additionalArtists.length>0&&(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:["Hợp t\xe1c: ",e.additionalArtists.map(e=>e.name).join(", ")]})]},s))})]}),n.notes&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{className:"my-3 border-gray-700"}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Ghi ch\xfa:"}),(0,t.jsx)("span",{className:"ml-2 font-light",children:n.notes})]})]}),(0,t.jsx)("hr",{className:"my-3 border-gray-700"}),n.audioUrl&&(0,t.jsxs)("div",{className:"my-3",children:[(0,t.jsx)("strong",{children:"Nghe thử nhạc:"}),(0,t.jsx)("audio",{controls:!0,src:n.audioUrl,className:"w-full mt-2",children:"Tr\xecnh duyệt của bạn kh\xf4ng hỗ trợ audio."})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("strong",{className:"block mb-2",children:"Cập nhật trạng th\xe1i:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:f.map((e,s)=>(0,t.jsx)(C.$,{variant:n.status===e?"default":"outline",size:"sm",onClick:()=>v(e),className:"text-xs rounded-full",children:e},s))})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,t.jsxs)(C.$,{onClick:a,className:"flex-1 rounded-full bg-purple-600 hover:bg-purple-700",children:[(0,t.jsx)(N.A,{className:"h-5 w-5 mr-2"}),"Đ\xf3ng"]}),h&&o&&(0,t.jsxs)(C.$,{onClick:()=>{n&&o&&window.confirm('Bạn c\xf3 chắc chắn muốn x\xf3a b\xe0i nộp "'.concat(n.songTitle,'" kh\xf4ng?\nH\xe0nh động n\xe0y kh\xf4ng thể ho\xe0n t\xe1c.'))&&(o(n.id),a())},className:"rounded-full bg-red-600 hover:bg-red-700",variant:"destructive",children:[(0,t.jsx)(en.A,{className:"h-5 w-5 mr-2"}),"X\xf3a"]})]})]})})}class ex{static canViewSubmission(e,s){return"Label Manager"===e.role?{allowed:!0}:"Artist"===e.role?s.artist_id===e.id||s.user_id===e.id?{allowed:!0}:{allowed:!1,reason:"Artists can only view their own submissions"}:{allowed:!1,reason:"Unauthorized role"}}static canEditSubmission(e,s){return"Label Manager"===e.role?{allowed:!0}:"Artist"===e.role?s.artist_id!==e.id&&s.user_id!==e.id?{allowed:!1,reason:"Artists can only edit their own submissions"}:"pending"!==s.status?{allowed:!1,reason:"Artists can only edit submissions that are still pending approval"}:{allowed:!0}:{allowed:!1,reason:"Unauthorized role"}}static canDeleteSubmission(e){return"Label Manager"===e.role?{allowed:!0}:{allowed:!1,reason:"Only Label Managers can delete submissions"}}static canAccessSystemSettings(e){return"Label Manager"===e.role?{allowed:!0}:{allowed:!1,reason:"Only Label Managers can access system settings"}}static canUseDebugTools(e){return"Label Manager"===e.role?{allowed:!0}:{allowed:!1,reason:"Only Label Managers can use debug tools"}}static canViewFullStatistics(e){return"Label Manager"===e.role?{allowed:!0}:{allowed:!1,reason:"Only Label Managers can view full statistics"}}static canApproveRejectSubmission(e){return"Label Manager"===e.role?{allowed:!0}:{allowed:!1,reason:"Only Label Managers can approve or reject submissions"}}static canResubmitAfterRejection(e,s){return"Artist"!==e.role?{allowed:!1,reason:"Only artists can resubmit rejected submissions"}:s.artist_id!==e.id&&s.user_id!==e.id?{allowed:!1,reason:"Artists can only resubmit their own submissions"}:"rejected"!==s.status?{allowed:!1,reason:"Can only resubmit rejected submissions"}:{allowed:!0}}static validateReleaseDate(e,s,a){var t,n;let r=new Date(null!=(n=null!=(t=s.submission_date)?t:s.created_at)?n:new Date),l=new Date(a);if("published"===s.status)return{allowed:!0};let i=new Date(r.getTime()+1728e5);return l<r||l>i?{allowed:!1,reason:"Release date must be between ".concat(r.toDateString()," and ").concat(i.toDateString())}:{allowed:!0}}static filterSubmissionsForUser(e,s){return"Label Manager"===e.role?s:"Artist"===e.role?s.filter(s=>s.artist_id===e.id||s.user_id===e.id):[]}static generateUserStatistics(e,s){let a=this.filterSubmissionsForUser(e,s),t={total:a.length,pending:a.filter(e=>"pending"===e.status).length,approved:a.filter(e=>"approved"===e.status).length,rejected:a.filter(e=>"rejected"===e.status).length,published:a.filter(e=>"published"===e.status).length,cancelled:a.filter(e=>"cancelled"===e.status).length};return"Label Manager"===e.role?{...t,userRole:"Label Manager",canViewAll:!0,totalArtists:[...new Set(s.map(e=>{var s;return null!=(s=e.artist_id)?s:e.user_id}))].length,recentSubmissions:s.slice(0,10)}:{...t,userRole:"Artist",canViewAll:!1,artistName:e.fullName}}}var eg=a(5273),ep=a(2657),ej=a(3717),eb=a(2915),ef=a(311);function ev(e){let{viewType:s,onUpdateStatus:a,showModal:l,onViewChange:i,submissions:o}=e,{user:h}=(0,n.A)(),[m,u]=(0,r.useState)(null),[x,g]=(0,r.useState)(!1),[j,b]=(0,r.useState)("");if(!h)return(0,t.jsx)("div",{className:"p-6 min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Đang tải th\xf4ng tin"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Vui l\xf2ng chờ trong gi\xe2y l\xe1t..."})]})});let f=("mySubmissions"===s?o.filter(e=>e.uploaderUsername===h.username):o).filter(e=>{if(!j)return!0;let s=j.toLowerCase(),a=e=>null!=e&&String(e).toLowerCase().includes(s);return a(e.artistName)||a(e.songTitle)||a(e.albumName)||a(e.id)||a(e.isrc)||a(e.status)}),v=async e=>{try{console.log("Đang x\xf3a submission ".concat(e));let s=await fetch("/api/submissions/".concat(e),{method:"DELETE"}),a=await s.json();a.success?(l("X\xf3a th\xe0nh c\xf4ng",['Đ\xe3 x\xf3a b\xe0i nộp "'.concat((null==m?void 0:m.songTitle)||"",'" th\xe0nh c\xf4ng')],"success"),g(!1),u(null)):l("Lỗi x\xf3a b\xe0i nộp",[a.message||"Kh\xf4ng thể x\xf3a b\xe0i nộp"],"error")}catch(e){console.error("Error deleting submission:",e),l("Lỗi x\xf3a b\xe0i nộp",["Đ\xe3 xảy ra lỗi khi thực hiện x\xf3a b\xe0i nộp"],"error")}},N=["Đ\xe3 nhận, đang chờ duyệt","Đ\xe3 duyệt, từ chối ph\xe1t h\xe0nh","Đ\xe3 duyệt, đang chờ ph\xe1t h\xe0nh!","Đ\xe3 ph\xe1t h\xe0nh, đang chờ ra mắt","Ho\xe0n th\xe0nh ph\xe1t h\xe0nh!"],y="Label Manager"===h.role,w=y?o:o.filter(e=>e.uploaderUsername===h.username),S=w.length,k=w.filter(e=>["Đ\xe3 duyệt, đang chờ ph\xe1t h\xe0nh!","Ho\xe0n th\xe0nh ph\xe1t h\xe0nh!","Đ\xe3 ph\xe1t h\xe0nh, đang chờ ra mắt"].includes(e.status)).length,A=w.filter(e=>"Đ\xe3 nhận, đang chờ duyệt"===e.status).length,T=w.filter(e=>"Đ\xe3 duyệt, từ chối ph\xe1t h\xe0nh"===e.status).length,D=w.filter(e=>"Đ\xe3 ph\xe1t h\xe0nh, đang chờ ra mắt"===e.status).length,L=w.filter(e=>"Ho\xe0n th\xe0nh ph\xe1t h\xe0nh!"===e.status).length,P=w.reduce((e,s)=>e+(Array.isArray(s.trackInfos)?s.trackInfos.length:0),0),I=w.reduce((e,s)=>e+(Array.isArray(s.audioUrls)?s.audioUrls.length:+!!s.audioUrl),0),M=w.reduce((e,s)=>{let a=s.mainCategory||"other_main";return e[a]||(e[a]=0),e[a]++,e},{}),R=w.reduce((e,s)=>(Array.isArray(s.platforms)&&s.platforms.forEach(s=>{e[s]||(e[s]=0),e[s]++}),e),{}),F=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("vi-VN",{year:"numeric",month:"short",day:"numeric"})}catch(s){return e}},B=async(e,s)=>{try{console.log("Sending update for submission ".concat(e,":"),s);let a={upc:s.upc,distributionLink:s.distributionLink},t=await fetch("/api/submissions/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok){let e=await t.text();throw Error("HTTP error ".concat(t.status,": ").concat(e))}let n=await t.json();n.success?(m&&m.id===e&&u({...m,...a}),l("Cập nhật th\xe0nh c\xf4ng",["Th\xf4ng tin ph\xe2n phối đ\xe3 được cập nhật th\xe0nh c\xf4ng"],"success")):l("Lỗi cập nhật",[n.error||"Kh\xf4ng thể cập nhật th\xf4ng tin"],"error")}catch(e){console.error("Error updating submission:",e),l("Lỗi cập nhật",[e instanceof Error?e.message:"Đ\xe3 xảy ra lỗi khi cập nhật th\xf4ng tin"],"error")}},J=async e=>{try{let s=await fetch("/api/submissions/approve-reject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submissionId:e,action:"approve"})}),t=await s.json();t.success?(a(e,"approved"),l("Duyệt th\xe0nh c\xf4ng",["B\xe0i nộp đ\xe3 được duyệt"],"success")):l("Lỗi duyệt b\xe0i",[t.message||"Kh\xf4ng thể duyệt b\xe0i nộp"],"error")}catch(e){console.error("Error approving submission:",e),l("Lỗi duyệt b\xe0i",["Đ\xe3 xảy ra lỗi khi duyệt b\xe0i nộp"],"error")}},O=async e=>{let s=prompt("Nhập l\xfd do từ chối (t\xf9y chọn):");try{let t=await fetch("/api/submissions/approve-reject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submissionId:e,action:"reject",comment:s||void 0})}),n=await t.json();n.success?(a(e,"rejected"),l("Từ chối th\xe0nh c\xf4ng",["B\xe0i nộp đ\xe3 bị từ chối"],"success")):l("Lỗi từ chối b\xe0i",[n.message||"Kh\xf4ng thể từ chối b\xe0i nộp"],"error")}catch(e){console.error("Error rejecting submission:",e),l("Lỗi từ chối b\xe0i",["Đ\xe3 xảy ra lỗi khi từ chối b\xe0i nộp"],"error")}};return(0,t.jsxs)("div",{className:"p-2 md:p-6",children:[(0,t.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Submissions"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Quản l\xfd c\xe1c b\xe0i nhạc bạn đ\xe3 gửi l\xean hệ thống"})]}),(0,t.jsx)("div",{className:"w-full md:w-64",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",placeholder:"T\xecm kiếm submissions...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",value:j,onChange:e=>b(e.target.value)}),(0,t.jsx)("button",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400",onClick:()=>b(""),children:j?"\xd7":"\uD83D\uDD0D"})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium text-gray-300",children:"Tổng submissions"}),(0,t.jsx)(d.A,{className:"h-4 w-4 text-purple-500"})]}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:S}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Tổng số b\xe0i gửi l\xean"})]})]}),(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium text-gray-300",children:"Đ\xe3 duyệt"}),(0,t.jsx)(p.A,{className:"h-4 w-4 text-green-500"})]}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:k}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Sẵn s\xe0ng ph\xe1t h\xe0nh"})]})]}),(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium text-gray-300",children:"Chờ duyệt"}),(0,t.jsx)(d.A,{className:"h-4 w-4 text-yellow-500"})]}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:A}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Đang chờ kiểm duyệt"})]})]}),(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium text-gray-300",children:"Bị từ chối"}),(0,t.jsx)(d.A,{className:"h-4 w-4 text-red-500"})]}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:T}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Đ\xe3 bị từ chối ph\xe1t h\xe0nh"})]})]}),(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium text-gray-300",children:"Đang ph\xe1t h\xe0nh"}),(0,t.jsx)(eg.A,{className:"h-4 w-4 text-blue-400"})]}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:D}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Đang chờ ra mắt"})]})]}),(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium text-gray-300",children:"Ho\xe0n th\xe0nh ph\xe1t h\xe0nh"}),(0,t.jsx)(p.A,{className:"h-4 w-4 text-pink-400"})]}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:L}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Đ\xe3 ho\xe0n th\xe0nh ph\xe1t h\xe0nh"})]})]}),(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium text-gray-300",children:"Tổng số track"}),(0,t.jsx)(p.A,{className:"h-4 w-4 text-blue-500"})]}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:P}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"C\xe1c track đ\xe3 gửi"})]})]}),(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium text-gray-300",children:"Tổng file \xe2m thanh"}),(0,t.jsx)(p.A,{className:"h-4 w-4 text-purple-400"})]}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:I}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"C\xe1c file \xe2m thanh đ\xe3 gửi"})]})]})]}),(0,t.jsxs)(E.Zp,{className:"mt-6 bg-gray-800 border border-gray-700",children:[(0,t.jsxs)(E.aR,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(eg.A,{className:"mr-3 text-purple-400 w-8 h-8"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.ZB,{className:"text-white",children:j?"Kết quả t\xecm kiếm":"Danh s\xe1ch submissions"}),j&&(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["T\xecm thấy ",f.length," kết quả cho “",j,"”"]})]})]}),(0,t.jsxs)(C.$,{className:"bg-purple-600 hover:bg-purple-700 text-white",onClick:()=>null==i?void 0:i("upload"),children:[(0,t.jsx)(U.A,{className:"h-4 w-4 mr-2"}),"Upload New Track"]})]}),(0,t.jsx)(E.Wu,{className:"p-0",children:0===f.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(p.A,{className:"h-12 w-12 text-gray-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-400",children:j?"Kh\xf4ng t\xecm thấy submissions khớp với từ kh\xf3a":"Kh\xf4ng t\xecm thấy submissions n\xe0o"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:j?"Thử t\xecm với từ kh\xf3a kh\xe1c":"Tải l\xean b\xe0i h\xe1t đầu ti\xean của bạn để bắt đầu"}),(0,t.jsxs)(C.$,{className:"mt-4 bg-purple-600 hover:bg-purple-700 text-white",onClick:()=>null==i?void 0:i("upload"),children:[(0,t.jsx)(U.A,{className:"h-4 w-4 mr-2"}),"Upload Track"]})]}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,t.jsx)("thead",{className:"bg-gray-750",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"ISRC"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"ID"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Ảnh B\xeca"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Nghệ Sĩ"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"T\xean B\xe0i H\xe1t"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Audio"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Ng\xe0y Gửi"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Ng\xe0y Ph\xe1t H\xe0nh"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Trạng Th\xe1i"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"H\xe0nh Động"})]})}),(0,t.jsx)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:f.map(e=>{var s;return(0,t.jsxs)("tr",{className:"hover:bg-gray-750 transition-colors duration-150",children:[(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("span",{className:"text-xs font-mono text-green-400",children:e.isrc||"N/A"})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("span",{className:"text-xs font-mono text-purple-400",children:e.id})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"relative h-10 w-10 overflow-hidden rounded-md border border-gray-600",children:(0,t.jsx)(c.default,{src:"Various Artist"===e.artistName?"/placeholders/various-artist.jpg":e.imageUrl||"/placeholders/default-cover.jpg",alt:"Cover",width:40,height:40,className:"h-10 w-10 object-cover",style:{objectPosition:"center"},unoptimized:null==(s=e.imageUrl)?void 0:s.startsWith("data:"),onError:s=>{s.target.src="Various Artist"===e.artistName?"/placeholders/various-artist.jpg":"/placeholders/default-cover.jpg"}})}),(0,t.jsx)(C.$,{variant:"ghost",size:"sm",onClick:()=>(e=>{if(e.imageUrl&&e.imageUrl.startsWith("data:")){let s=document.createElement("a");s.href=e.imageUrl,s.download="".concat(e.songTitle,"_cover.jpg"),document.body.appendChild(s),s.click(),document.body.removeChild(s),l("Tải Xuống Th\xe0nh C\xf4ng",['Đ\xe3 tải ảnh b\xeca "'.concat(e.songTitle,'"')],"success")}else l("Th\xf4ng B\xe1o",["Kh\xf4ng thể tải xuống ảnh b\xeca."],"error")})(e),className:"p-1",title:"Tải xuống ảnh b\xeca",children:(0,t.jsx)(em.A,{className:"h-4 w-4"})})]})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("span",{className:"text-sm text-gray-200 font-medium",children:e.artistName})}),(0,t.jsxs)("td",{className:"px-4 py-3",children:[(0,t.jsx)("span",{className:"text-sm text-gray-300",children:e.songTitle}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[e.audioFilesCount," track(s)"]})]}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[Array.isArray(e.audioUrls)&&e.audioUrls.length>0?e.audioUrls.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("audio",{controls:!0,src:e,className:"h-8",preload:"none",style:{maxWidth:180}}),(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:["Track ",s+1]})]},e)):e.audioUrl?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("audio",{controls:!0,src:e.audioUrl,className:"h-8",preload:"none",style:{maxWidth:180}}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"Single"})]}):(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Kh\xf4ng c\xf3 audio"}),(0,t.jsx)("div",{className:"flex items-center space-x-2 mt-1",children:(0,t.jsx)(C.$,{variant:"ghost",size:"sm",onClick:()=>{l("Tải Xuống Audio",["Đang chuẩn bị tải ".concat(e.audioFilesCount,' file audio cho "').concat(e.songTitle,'". T\xednh năng đang ph\xe1t triển.')],"success")},className:"p-1",title:"Tải xuống audio",children:(0,t.jsx)(em.A,{className:"h-4 w-4"})})})]})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("span",{className:"text-sm text-gray-400",children:F(e.submissionDate)})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("span",{className:"text-sm text-gray-400",children:e.releaseDate?F(e.releaseDate):"N/A"})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("span",{className:"status-badge ".concat(function(e){switch(e){case"Đ\xe3 nhận, đang chờ duyệt":case"pending":return"bg-yellow-600 text-yellow-100";case"Đ\xe3 duyệt, từ chối ph\xe1t h\xe0nh":case"rejected":return"bg-red-600 text-red-100";case"Đ\xe3 duyệt, đang chờ ph\xe1t h\xe0nh!":case"approved":return"bg-blue-600 text-blue-100";case"Đ\xe3 ph\xe1t h\xe0nh, đang chờ ra mắt":case"processing":return"bg-purple-600 text-purple-100";case"Ho\xe0n th\xe0nh ph\xe1t h\xe0nh!":case"published":return"bg-green-600 text-green-100";default:return"bg-gray-600 text-gray-100"}}(e.status)),children:function(e){switch(e){case"pending":return"Đ\xe3 nhận, đang chờ duyệt";case"approved":return"Đ\xe3 duyệt, đang chờ ph\xe1t h\xe0nh!";case"rejected":return"Đ\xe3 duyệt, từ chối ph\xe1t h\xe0nh";case"processing":return"Đ\xe3 ph\xe1t h\xe0nh, đang chờ ra mắt";case"published":return"Ho\xe0n th\xe0nh ph\xe1t h\xe0nh!";case"cancelled":return"Đ\xe3 hủy";case"draft":return"Bản nh\xe1p";default:return e}}(e.status)})}),(0,t.jsxs)("td",{className:"px-4 py-3 text-sm space-x-2 whitespace-nowrap",children:[(0,t.jsxs)(C.$,{variant:"outline",size:"sm",onClick:()=>(e=>{let s=o.find(s=>s.id===e);s&&(u(s),g(!0))})(e.id),className:"text-xs",children:[(0,t.jsx)(ep.A,{className:"h-4 w-4 mr-1"}),"Xem"]}),"                        ",ex.canEditSubmission(h,{id:e.id,track_title:e.songTitle,artist_name:e.artistName,user_id:e.userId,genre:e.mainCategory||"pop",submission_date:e.submissionDate,status:"pending"}).allowed&&(0,t.jsxs)(C.$,{variant:"outline",size:"sm",onClick:()=>{u(e),g(!0),l("Chỉnh sửa b\xe0i nộp",['Mở form chỉnh sửa cho "'.concat(e.songTitle,'"')],"success")},className:"text-xs text-blue-400 hover:text-blue-300",children:[(0,t.jsx)(ej.A,{className:"h-4 w-4 mr-1"}),"Sửa"]}),ex.canDeleteSubmission(h).allowed&&(0,t.jsxs)(C.$,{variant:"outline",size:"sm",onClick:()=>v(e.id),className:"text-xs text-red-400 hover:text-red-300",children:[(0,t.jsx)(en.A,{className:"h-4 w-4 mr-1"}),"X\xf3a"]}),ex.canApproveRejectSubmission(h).allowed&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(C.$,{variant:"outline",size:"sm",onClick:()=>J(e.id),className:"text-xs text-green-400 hover:text-green-300",children:[(0,t.jsx)(eb.A,{className:"h-4 w-4 mr-1"}),"Duyệt"]}),(0,t.jsxs)(C.$,{variant:"outline",size:"sm",onClick:()=>O(e.id),className:"text-xs text-red-400 hover:text-red-300",children:[(0,t.jsx)(ef.A,{className:"h-4 w-4 mr-1"}),"Hủy"]})]}),"Label Manager"===h.role&&(0,t.jsxs)(_.l6,{value:e.status,onValueChange:s=>a(e.id,s),children:[(0,t.jsx)(_.bq,{className:"w-auto text-xs py-1.5 h-auto",children:(0,t.jsx)(_.yv,{})}),(0,t.jsx)(_.gC,{children:N.map(e=>(0,t.jsx)(_.eb,{value:e,className:"text-xs",children:e},e))})]})]})]},e.id)})})]})})})]}),Object.keys(M).length>0&&(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border-gray-700 col-span-1 md:col-span-2 lg:col-span-4",children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium text-gray-300",children:"Ph\xe2n loại theo thể loại"}),(0,t.jsx)(d.A,{className:"h-4 w-4 text-indigo-500"})]}),(0,t.jsx)(E.Wu,{children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(M).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"px-2 py-1 bg-gray-700 rounded-md text-xs",children:[(0,t.jsx)("span",{className:"font-semibold",children:{pop:"Pop","singer-songwriter":"Singer-Songwriter",hiphoprap:"Hip Hop/Rap",edm:"EDM",rnb:"R&B",ballad:"Ballad",acoustic:"Acoustic",indie:"Indie",other_main:"Kh\xe1c"}[s]||s}),": ",a]},s)})})})]}),Object.keys(R).length>0&&(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border-gray-700 col-span-1 md:col-span-2 lg:col-span-4",children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium text-gray-300",children:"Ph\xe2n loại theo nền tảng"}),(0,t.jsx)(d.A,{className:"h-4 w-4 text-orange-500"})]}),(0,t.jsx)(E.Wu,{children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(R).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"px-2 py-1 bg-gray-700 rounded-md text-xs",children:[(0,t.jsx)("span",{className:"font-semibold",children:{youtube:"YouTube",spotify:"Spotify",apple_music:"Apple Music",soundcloud:"SoundCloud",other_platform:"Kh\xe1c"}[s]||s}),": ",a]},s)})})})]}),m&&(0,t.jsx)(eu,{isOpen:x,onClose:()=>g(!1),submission:m,onUpdateStatus:a,onUpdateSubmission:B,showModal:l,isLabelManager:y,onDeleteSubmission:v})]})}var eN=a(3311),ey=a(4357),ew=a(9074);function eS(e){let{icon:s,className:a,solid:n=!0,regular:r=!1,brands:l=!1,light:i=!1,duotone:c=!1,thin:o=!1,size:d,fixedWidth:h=!1,spin:m=!1,pulse:u=!1,rotate:x,...g}=e,p=n?"fas":"";p=r?"far":p,p=l?"fab":p,p=i?"fal":p,p=c?"fad":p,p=o?"fat":p,s&&!p&&["facebook","twitter","instagram","youtube","tiktok","spotify","apple","google","amazon"].some(e=>s.includes(e))&&(p="fab");let j=[p,s,d?"fa-".concat(d):"",h?"fa-fw":"",m?"fa-spin":"",u?"fa-pulse":"",x?"fa-rotate-".concat(x):"",a||""].filter(Boolean);return(0,t.jsx)("i",{className:(0,z.cn)(j.join(" ")),...g})}function ek(e){var s;let{showModal:a}=e,{user:l,login:i}=(0,n.A)(),[o,d]=(0,r.useState)({username:"",fullName:"",email:"",bio:"",avatar:"",socialLinks:{facebook:"",youtube:"",spotify:"",appleMusic:"",tiktok:"",instagram:""}}),[m,u]=(0,r.useState)("/face.png");if((0,r.useEffect)(()=>{if(l){var e,s,a,t,n,r;d({username:l.username||"",fullName:l.fullName||"",email:l.email||"",bio:l.bio||"",avatar:l.avatar||"/face.png",socialLinks:{facebook:(null==(e=l.socialLinks)?void 0:e.facebook)||"",youtube:(null==(s=l.socialLinks)?void 0:s.youtube)||"",spotify:(null==(a=l.socialLinks)?void 0:a.spotify)||"",appleMusic:(null==(t=l.socialLinks)?void 0:t.appleMusic)||"",tiktok:(null==(n=l.socialLinks)?void 0:n.tiktok)||"",instagram:(null==(r=l.socialLinks)?void 0:r.instagram)||""}}),u(l.avatar||"/face.png")}},[l]),!l)return(0,t.jsx)("div",{className:"p-6 min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Đang tải th\xf4ng tin"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Vui l\xf2ng chờ trong gi\xe2y l\xe1t..."})]})});let p=(e,s)=>{if(e.startsWith("socialLinks.")){let a=e.replace("socialLinks.",""),t=v(a,s);d(e=>({...e,socialLinks:{...e.socialLinks,[a]:t}}))}else d(a=>({...a,[e]:s}))},j=async e=>{var s,t;let n=null==(s=e.target.files)?void 0:s[0];if(n){if(!["image/jpeg","image/png","image/jpg"].includes(n.type)){a("Lỗi Tải Ảnh","Chỉ nhận JPG/PNG."),e.target.value="";return}a("Đang Xử L\xfd","Đang tải v\xe0 xử l\xfd ảnh đại diện...");let s=new FormData;s.append("file",n),s.append("artistName",l.username||"default-user"),s.append("userId",l.id||"default-id"),s.append("role",l.role||"Artist");try{a("Đang xử l\xfd","Đang tải ảnh l\xean, vui l\xf2ng đợi...");let e=await fetch("/api/upload/avatar",{method:"POST",body:s});if(!e.ok){let s=await e.text();throw console.error("API error response:",s),Error("HTTP error ".concat(e.status,": ").concat(s))}let n=await e.json();n.success&&n.url?(u(n.url),d(e=>({...e,avatar:n.url})),a("Th\xe0nh c\xf4ng","Ảnh đại diện đ\xe3 được cập nhật","success"),l&&await i(l.username,"")):(console.error("Upload failed:",n),a("Lỗi Upload",null!=(t=n.message)?t:"Kh\xf4ng upload được ảnh đại diện!"))}catch(s){let e=s instanceof Error?s.message:"Lỗi kh\xf4ng x\xe1c định";console.error("Detailed error:",s),a("Lỗi Upload","Kh\xf4ng thể kết nối server: ".concat(e))}}},b=async(e,s)=>{if(!e)return void a("Chưa c\xf3 Link","Vui l\xf2ng nhập link trước khi copy.","error");try{await navigator.clipboard.writeText(e),a("Copy Th\xe0nh C\xf4ng","Đ\xe3 copy link ".concat(s,": ").concat(e),"success")}catch(e){console.error("Clipboard copy failed:",e),a("Lỗi Copy","Kh\xf4ng thể copy link v\xe0o clipboard.")}},f=async e=>{e.preventDefault();try{a("Đang xử l\xfd","Đang cập nhật th\xf4ng tin profile...");let e={...o,id:l.id,username:l.username,role:l.role,table:"Label Manager"===l.role?"label_manager":"artist",avatar:o.avatar||("/face.png"!==m?m:l.avatar),socialLinks:Object.fromEntries(Object.entries(o.socialLinks).filter(e=>{let[,s]=e;return""!==s.trim()}))};console.log("Gửi dữ liệu cập nhật profile:",e);let s=await fetch("/api/profile/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.text();throw Error("HTTP error ".concat(s.status,": ").concat(e))}let t=await s.json();if(t.success){if(t.user){let e=JSON.parse(localStorage.getItem("currentUser")||"{}"),s={...e,fullName:t.user.fullName||e.fullName,email:t.user.email||e.email,bio:t.user.bio||e.bio,avatar:t.user.avatar||e.avatar,socialLinks:t.user.socialLinks||e.socialLinks};localStorage.setItem("currentUser",JSON.stringify(s)),window.location.reload()}a("Th\xe0nh C\xf4ng","Đ\xe3 cập nhật profile th\xe0nh c\xf4ng!","success")}else throw Error(t.message||"Cập nhật kh\xf4ng th\xe0nh c\xf4ng")}catch(s){console.error("Error updating profile:",s);let e=s instanceof Error?s.message:"Lỗi kh\xf4ng x\xe1c định";a("Lỗi Cập Nhật","C\xf3 lỗi xảy ra khi cập nhật profile: ".concat(e),"error")}},v=(e,s)=>{if(!s.trim())return"";switch(e){case"facebook":case"instagram":return s.replace("@","").trim();case"youtube":case"tiktok":if(s.startsWith("@"))return s.trim();return"@".concat(s.trim());case"spotify":case"appleMusic":if(s.includes("/")){let e=s.split("/");return e[e.length-1].trim()}return s.trim();default:return s.trim()}};return(0,t.jsxs)("div",{className:"p-2 md:p-6",children:[(0,t.jsxs)("h2",{className:"text-3xl font-bold text-white mb-6 flex items-center",children:[(0,t.jsx)(h.A,{className:"mr-3 text-purple-400"}),"Hồ sơ nghệ sĩ của t\xf4i"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsx)(E.Zp,{className:"bg-gray-800 border border-gray-700 max-w-2xl mx-auto",children:(0,t.jsx)(E.Wu,{className:"p-6 md:p-10",children:(0,t.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"username",children:"T\xean đăng nhập"}),(0,t.jsx)(B.p,{id:"username",value:o.username,readOnly:!0,className:"rounded-xl mt-1 bg-gray-600 cursor-not-allowed"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(J.J,{htmlFor:"fullName",children:["Họ t\xean đầy đủ",(0,t.jsx)("span",{className:"text-red-500 font-bold ml-0.5",children:"*"})]}),(0,t.jsx)(B.p,{id:"fullName",value:o.fullName,onChange:e=>p("fullName",e.target.value),required:!0,className:"rounded-xl mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(J.J,{htmlFor:"email",children:["Email",(0,t.jsx)("span",{className:"text-red-500 font-bold ml-0.5",children:"*"})]}),(0,t.jsx)(B.p,{id:"email",type:"email",value:o.email,onChange:e=>p("email",e.target.value),required:!0,className:"rounded-xl mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"avatarFile",children:"Ảnh đại diện (JPG/PNG, tự động crop về 1:1)"}),(0,t.jsx)(B.p,{id:"avatarFile",type:"file",accept:"image/jpeg,image/png",onChange:j,className:"mt-1"}),(0,t.jsx)("div",{className:"mt-3 rounded-full w-32 h-32 border-2 border-gray-600 mx-auto overflow-hidden",children:(0,t.jsx)(c.default,{src:m||"/placeholder.svg",alt:"Avatar Preview",width:128,height:128,className:"object-cover w-full h-full",style:{aspectRatio:"1/1"}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{htmlFor:"bio",children:"Tiểu sử nghệ sĩ"}),(0,t.jsx)(O.T,{id:"bio",value:o.bio,onChange:e=>p("bio",e.target.value),rows:5,className:"rounded-xl mt-1",placeholder:"Giới thiệu nghệ sĩ"}),(0,t.jsxs)(C.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=["L\xe0 một ".concat(l.role," t\xe0i năng, ").concat(o.fullName||l.username," lu\xf4n mang đến những l\xe0n gi\xf3 mới cho \xe2m nhạc Việt."),"Với đam m\xea ch\xe1y bỏng, ".concat(o.fullName||l.username," đang từng bước khẳng định vị tr\xed của m\xecnh. #GenZMusic"),"\xc2m nhạc của ".concat(o.fullName||l.username," l\xe0 sự kết hợp độc đ\xe1o giữa truyền thống v\xe0 hiện đại, chạm đến cảm x\xfac người nghe."),"".concat(o.fullName||l.username," - nghệ sĩ GenZ với phong c\xe1ch ri\xeang biệt, lu\xf4n t\xecm t\xf2i v\xe0 s\xe1ng tạo trong từng giai điệu."),"Từ những beat chill đến những bản ballad s\xe2u lắng, ".concat(o.fullName||l.username," chinh phục tr\xe1i tim người nghe bằng \xe2m nhạc ch\xe2n th\xe0nh.")],s=e[Math.floor(Math.random()*e.length)];d(e=>({...e,bio:s})),a("Gợi \xdd Bio","Đ\xe3 c\xf3 bio mẫu! Bạn c\xf3 thể chỉnh sửa th\xeam nh\xe9!","success")},className:"mt-2 rounded-full",children:[(0,t.jsx)(eN.A,{className:"h-4 w-4 mr-2"}),"Gợi \xdd Bio"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-purple-400 pt-4 border-t border-gray-600 mb-4",children:"Li\xean kết mạng x\xe3 hội"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(o.socialLinks).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"block text-xs font-medium text-gray-400 mb-1 capitalize",children:"appleMusic"===s?"Apple Music":s}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(B.p,{value:a,onChange:e=>p("socialLinks.".concat(s),e.target.value),className:"rounded-xl rounded-r-none flex-grow",placeholder:"facebook"===s?"iamankun":"youtube"===s?"@ankun_music":"spotify"===s?"5NIqsUlRfxkY4d2WjhcmXs":"appleMusic"===s?"1545463988":"tiktok"===s?"@iamankun":"instagram"===s?"iamankun":"https://".concat(s,".com/...")}),(0,t.jsx)(C.$,{type:"button",variant:"outline",onClick:()=>b(null!=a?a:"",s),className:"rounded-xl rounded-l-none border-l-0 px-3",children:(0,t.jsx)(ey.A,{className:"h-4 w-4"})})]})]},s)})})]}),(0,t.jsxs)("div",{className:"border-t border-gray-700 pt-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-purple-400 mb-4",children:"\uD83D\uDD14 Test Notification System"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(C.$,{type:"button",variant:"outline",onClick:()=>a("Profile Test","Profile notification with musical sound!","success"),className:"text-sm",children:"\uD83C\uDFB5 Success Sound"}),(0,t.jsx)(C.$,{type:"button",variant:"outline",onClick:()=>a("Error Test","Error notification with alert sound!","error"),className:"text-sm",children:"\uD83D\uDEA8 Error Sound"})]})]}),(0,t.jsxs)(C.$,{type:"submit",className:"w-full rounded-full bg-green-600 hover:bg-green-700 py-6",children:[(0,t.jsx)(h.A,{className:"h-5 w-5 mr-2"}),"Lưu Thay Đổi"]})]})})})}),(0,t.jsx)("div",{children:(0,t.jsxs)(E.Zp,{className:"overflow-hidden border-none shadow-lg bg-gradient-to-b from-gray-800 to-gray-900",children:[(0,t.jsx)("div",{className:"relative h-32 bg-gradient-to-r from-purple-600 to-blue-600 flex items-center justify-center",children:(0,t.jsx)("div",{className:"absolute -bottom-16 left-1/2 transform -translate-x-1/2",children:(0,t.jsx)("div",{className:"relative w-32 h-32 rounded-full overflow-hidden border-4 border-gray-900 shadow-xl animate-pulse-slow",children:m?(0,t.jsx)(c.default,{src:m,alt:null!=(s=l.fullName)?s:l.username,width:128,height:128,className:"object-cover w-full h-full",priority:!0,onError:e=>{e.currentTarget.src="/face.png"}}):(0,t.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:(0,t.jsx)(h.A,{className:"h-16 w-16 text-white"})})})})}),(0,t.jsxs)(E.Wu,{className:"mt-20 space-y-4 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent flex items-center justify-center",children:[o.fullName||l.fullName,(o.socialLinks.youtube||o.socialLinks.spotify||o.socialLinks.appleMusic)&&(0,t.jsx)("span",{className:"ml-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm rounded-full w-6 h-6 flex items-center justify-center shadow-md",title:"Nghệ sĩ đ\xe3 x\xe1c thực",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.603 3.799A4.49 4.49 0 0112 2.25c1.357 0 2.573.6 3.397 1.549a4.49 4.49 0 013.498 1.307 4.491 4.491 0 011.307 3.497A4.49 4.49 0 0121.75 12a4.49 4.49 0 01-1.549 3.397 4.491 4.491 0 01-1.307 3.497 4.491 4.491 0 01-3.497 1.307A4.49 4.49 0 0112 21.75a4.49 4.49 0 01-3.397-1.549 4.49 4.49 0 01-3.498-1.306 4.491 4.491 0 01-1.307-3.498A4.49 4.49 0 012.25 12c0-1.357.6-2.573 1.549-3.397a4.49 4.49 0 011.307-3.497 4.49 4.49 0 013.497-1.307zm7.007 6.387a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})})]}),(0,t.jsxs)("p",{className:"text-gray-400 text-lg mt-1",children:["@",l.username]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)(g.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm text-gray-300",children:l.email})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)(x.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm text-gray-300",children:l.role})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2 col-span-full",children:[(0,t.jsx)(ew.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsxs)("span",{className:"text-sm text-gray-300",children:["Tham gia từ ",new Date(l.createdAt).toLocaleDateString()]})]})]}),"Label Manager"===l.role&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Label Management Controls"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center",children:[(0,t.jsxs)(C.$,{type:"button",variant:"outline",size:"sm",className:"bg-gradient-to-r from-green-500/20 to-green-600/20 hover:from-green-500/40 hover:to-green-600/40 text-green-400",onClick:()=>{a("Cấp T\xedch Xanh","Đ\xe3 cấp t\xedch xanh cho nghệ sĩ th\xe0nh c\xf4ng!","success")},children:[(0,t.jsx)(eS,{icon:"fa-check-circle",solid:!0,className:"mr-2"}),"Cấp T\xedch Xanh"]}),(0,t.jsxs)(C.$,{type:"button",variant:"outline",size:"sm",className:"bg-gradient-to-r from-red-500/20 to-red-600/20 hover:from-red-500/40 hover:to-red-600/40 text-red-400",onClick:()=>{a("Hủy T\xedch Xanh","Đ\xe3 hủy t\xedch xanh của nghệ sĩ th\xe0nh c\xf4ng!","success")},children:[(0,t.jsx)(eS,{icon:"fa-times-circle",solid:!0,className:"mr-2"}),"Hủy T\xedch Xanh"]})]})]}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Kết nối mạng x\xe3 hội"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:Object.entries(o.socialLinks).map(e=>{let[s,a]=e;if(!a)return null;let n="",r=null;switch(s){case"facebook":n="https://www.facebook.com/".concat(a.replace("@","")),r=(0,t.jsx)(eS,{icon:"fa-facebook",brands:!0,size:"lg",className:"text-blue-600"});break;case"youtube":n=a.startsWith("@")?"https://www.youtube.com/".concat(a):"https://www.youtube.com/@".concat(a),r=(0,t.jsx)(eS,{icon:"fa-youtube",brands:!0,size:"lg",className:"text-red-600"});break;case"tiktok":n=a.startsWith("@")?"https://www.tiktok.com/".concat(a):"https://www.tiktok.com/@".concat(a),r=(0,t.jsx)(eS,{icon:"fa-tiktok",brands:!0,size:"lg",className:"text-black dark:text-white"});break;case"instagram":n="https://www.instagram.com/".concat(a.replace("@","")),r=(0,t.jsx)(eS,{icon:"fa-instagram",brands:!0,size:"lg",className:"text-pink-600"});break;case"spotify":n="https://open.spotify.com/artist/".concat(a),r=(0,t.jsx)(eS,{icon:"fa-spotify",brands:!0,size:"lg",className:"text-green-600"});break;case"appleMusic":n="https://music.apple.com/artist/".concat(a),r=(0,t.jsx)(eS,{icon:"fa-apple",brands:!0,size:"lg",className:"text-gray-700 dark:text-gray-300"});break;default:n=a,r=(0,t.jsx)(eS,{icon:"fa-link",solid:!0,size:"lg",className:"text-gray-600"})}return(0,t.jsxs)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center rounded-full px-3 py-2 bg-gradient-to-r from-gray-700/80 to-gray-800/80 backdrop-blur-sm hover:from-gray-600 hover:to-gray-700 hover:shadow-lg transition-all duration-300",children:[(0,t.jsx)("span",{className:"mr-2",children:r}),(0,t.jsx)("span",{className:"text-xs",children:"appleMusic"===s?"Apple Music":s})]},s)})})]})]})]})})]})]})}function eA(e){let{status:s}=e;return(0,t.jsx)("div",{className:"w-2 h-2 rounded-full ".concat((()=>{switch(s){case"connected":case"available":return"bg-green-500";case"disconnected":case"unavailable":return"bg-red-500";case"checking":return"bg-yellow-500";default:return"bg-gray-500"}})())})}var eC=a(4884);let eT=r.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(eC.bL,{className:(0,z.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...n,ref:s,children:(0,t.jsx)(eC.zi,{className:(0,z.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});eT.displayName=eC.bL.displayName;var eD=a(4869),eL=a(4229),eP=a(3127),eI=a(7213),eE=a(2682);let eU=(0,r.createContext)(void 0);function eM(e){let{children:s}=e,[a,n]=(0,r.useState)({smtp:"checking",database:"checking",localStorage:"checking"}),l=async()=>{try{localStorage.setItem("test","test"),localStorage.removeItem("test"),n(e=>({...e,localStorage:"available"}))}catch(e){n(e=>({...e,localStorage:"unavailable"}))}localStorage.getItem("emailSettings_v2")?n(e=>({...e,smtp:"connected"})):n(e=>({...e,smtp:"disconnected"})),n(e=>({...e,database:"disconnected"}))};return(0,r.useEffect)(()=>{l()},[]),(0,t.jsx)(eU.Provider,{value:{status:a,checkAllSystems:l},children:s})}var eR=a(9509);function eF(){let{user:e}=(0,n.A)(),{status:s,checkAllSystems:a}=function(){let e=(0,r.useContext)(eU);if(void 0===e)throw Error("useSystemStatus must be used within a SystemStatusProvider");return e}(),[l,i]=(0,r.useState)({appName:"AKs Studio",logoUrl:"/face.png",homeUrl:"/",version:"1.0.0"}),[c,o]=(0,r.useState)("demo"),[d,h]=(0,r.useState)({type:"gradient",gradient:"linear-gradient(135deg,rgba(102, 126, 234, 0.14) 0%,rgba(118, 75, 162, 0.17) 100%)",videoUrl:"",opacity:.3,randomVideo:!0,videoList:["dQw4w9WgXcQ","kJQP7kiw5Fk","fJ9rUzIMcZQ","9bZkp7q19f0","hTWKbfoikeg","YQHsXMglC9A","CevxZvSJLk8","JGwWNGJdvx8","RgKAFK5djSk","OPf0YbXqDm0"]}),[u,x]=(0,r.useState)({companyName:"AKs Studio",version:"1.0.0",logoUrl:"/face.png",websiteUrl:"/",description:"Digital Music Distribution"});if((0,r.useEffect)(()=>{p()},[]),!e)return(0,t.jsx)("div",{className:"p-6 min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Đang tải th\xf4ng tin"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Vui l\xf2ng chờ trong gi\xe2y l\xe1t..."})]})});let p=()=>{let e=localStorage.getItem("APP_MODE");e&&o(e);let s=localStorage.getItem("appSettings_v2");s&&i(JSON.parse(s));let a=localStorage.getItem("backgroundSettings_v2");a&&h(JSON.parse(a));let t=localStorage.getItem("footerSettings_v2");if(t)x(JSON.parse(t));else if(s){let e=JSON.parse(s);x(s=>({...s,companyName:e.appName,version:e.version,logoUrl:e.logoUrl,websiteUrl:e.homeUrl}))}},j=function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error",t=new CustomEvent("showGlobalNotification",{detail:{title:e,message:s.join(" "),type:a}});window.dispatchEvent(t)};return(0,t.jsxs)("div",{className:"p-2 md:p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("h2",{className:"text-3xl font-bold text-white flex items-center",children:[(0,t.jsx)(m.A,{className:"mr-3 text-purple-400"}),"C\xe0i đặt hệ thống"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"SMTP:"})," ",(0,t.jsx)(eA,{status:s.smtp})]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"DB:"})," ",(0,t.jsx)(eA,{status:s.database})]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Storage:"})," ",(0,t.jsx)(eA,{status:s.localStorage})]})]})]}),(0,t.jsxs)(K.tU,{defaultValue:"app",className:"space-y-6",children:[(0,t.jsxs)(K.j7,{className:"grid w-full grid-cols-5",children:[(0,t.jsx)(K.Xi,{value:"app",children:"Name App"}),(0,t.jsx)(K.Xi,{value:"mode",children:"Mode"}),(0,t.jsx)(K.Xi,{value:"background",children:"Background"}),(0,t.jsx)(K.Xi,{value:"footer",children:"Footer"}),(0,t.jsx)(K.Xi,{value:"guide",children:"Guide"})]}),(0,t.jsx)(K.av,{value:"app",children:(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border border-gray-700",children:[(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center",children:[(0,t.jsx)(eD.A,{className:"mr-2"}),"C\xe0i đặt ứng dụng"]})}),(0,t.jsxs)(E.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"T\xean ứng dụng"}),(0,t.jsx)(B.p,{value:l.appName,onChange:e=>i({...l,appName:e.target.value}),placeholder:"[Điều chỉnh t\xean trong ứng dụng]",className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"Phi\xean bản"}),(0,t.jsx)(B.p,{value:l.version,onChange:e=>i({...l,version:e.target.value}),placeholder:l.version,className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"Logo URL (Favicon)"}),(0,t.jsx)(B.p,{value:l.logoUrl,onChange:e=>i({...l,logoUrl:e.target.value}),placeholder:l.logoUrl,className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"Trang chủ URL (Click logo)"}),(0,t.jsx)(B.p,{value:l.homeUrl,onChange:e=>i({...l,homeUrl:e.target.value}),placeholder:l.homeUrl,className:"mt-1"})]})]}),(0,t.jsxs)("div",{className:"border border-gray-600 rounded-lg p-4 bg-gray-700",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Xem trước:"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("img",{src:l.logoUrl||eR.env.COMPANY_LOGO||"/logo.svg",alt:"App Logo",className:"h-8 w-8 rounded object-cover",onError:e=>{e.target.src=eR.env.COMPANY_LOGO||"/logo.svg"}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-white",children:l.appName}),(0,t.jsxs)("p",{className:"text-sm text-gray-400",children:["v",l.version]})]})]})]}),(0,t.jsxs)(C.$,{onClick:()=>{localStorage.setItem("appSettings_v2",JSON.stringify(l)),j("Lưu th\xe0nh c\xf4ng",["Đ\xe3 lưu c\xe0i đặt ứng dụng!"],"success");let e=document.querySelector("link[rel*='icon']");e&&(e.href=l.logoUrl),document.title="".concat(l.appName," - Digital Music Distribution")},className:"bg-green-500 hover:bg-green-600 text-white font-semibold rounded-full",children:[(0,t.jsx)(eL.A,{className:"h-4 w-4 mr-2"}),"Lưu c\xe0i đặt ứng dụng"]})]})]})}),(0,t.jsx)(K.av,{value:"background",children:(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border border-gray-700",children:[(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center",children:[(0,t.jsx)(eP.A,{className:"mr-2"}),"C\xe0i đặt Background"]})}),(0,t.jsxs)(E.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"Loại Background"}),(0,t.jsxs)(_.l6,{value:d.type,onValueChange:e=>h({...d,type:e}),children:[(0,t.jsx)(_.bq,{className:"mt-1",children:(0,t.jsx)(_.yv,{})}),(0,t.jsxs)(_.gC,{children:[(0,t.jsx)(_.eb,{value:"gradient",children:"Gradient"}),(0,t.jsx)(_.eb,{value:"video",children:"Video YouTube"})]})]})]}),"gradient"===d.type&&(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"CSS Gradient"}),(0,t.jsx)(O.T,{value:d.gradient,onChange:e=>h({...d,gradient:e.target.value}),placeholder:"linear-gradient(135deg,rgba(102, 126, 234, 0.19) 0%,rgba(118, 75, 162, 0.2) 100%)",className:"mt-1",rows:3})]}),"video"===d.type&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(eT,{checked:d.randomVideo,onCheckedChange:e=>h({...d,randomVideo:e})}),(0,t.jsx)(J.J,{children:"Video ngẫu nhi\xean"})]}),!d.randomVideo&&(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"YouTube URL"}),(0,t.jsx)(B.p,{value:d.videoUrl,onChange:e=>h({...d,videoUrl:e.target.value}),placeholder:"https://www.youtube.com/watch?v=...",className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"Danh s\xe1ch Video ID (mỗi d\xf2ng một ID)"}),(0,t.jsx)(O.T,{value:d.videoList.join("\n"),onChange:e=>h({...d,videoList:e.target.value.split("\n").filter(e=>e.trim())}),placeholder:"dQw4w9WgXcQ kJQP7kiw5Fk ...",className:"mt-1",rows:6})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(J.J,{children:["Độ mờ: ",d.opacity]}),(0,t.jsx)("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:d.opacity,onChange:e=>h({...d,opacity:Number.parseFloat(e.target.value)}),className:"w-full mt-1"})]}),(0,t.jsxs)(C.$,{onClick:()=>{localStorage.setItem("backgroundSettings_v2",JSON.stringify(d)),window.dispatchEvent(new CustomEvent("backgroundUpdate",{detail:d})),j("Lưu th\xe0nh c\xf4ng",["Đ\xe3 lưu c\xe0i đặt background!"],"success")},className:"bg-purple-500 hover:bg-purple-600 text-white font-semibold rounded-full",children:[(0,t.jsx)(eL.A,{className:"h-4 w-4 mr-2"}),"Lưu c\xe0i đặt Background"]})]})]})}),(0,t.jsx)(K.av,{value:"footer",children:(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border border-gray-700",children:[(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center",children:[(0,t.jsx)(eI.A,{className:"mr-2"}),"C\xe0i đặt Footer"]})}),(0,t.jsxs)(E.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"Label records"}),(0,t.jsx)(B.p,{value:u.companyName,onChange:e=>x({...u,companyName:e.target.value}),placeholder:l.appName,className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"Phi\xean bản"}),(0,t.jsx)(B.p,{value:u.version,onChange:e=>x({...u,version:e.target.value}),placeholder:"1.2.0-beta",className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"Logo URL"}),(0,t.jsx)(B.p,{value:u.logoUrl,onChange:e=>x({...u,logoUrl:e.target.value}),placeholder:l.logoUrl,className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"Website URL"}),(0,t.jsx)(B.p,{value:u.websiteUrl,onChange:e=>x({...u,websiteUrl:e.target.value}),placeholder:l.homeUrl,className:"mt-1"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"M\xf4 tả"}),(0,t.jsx)(B.p,{value:u.description,onChange:e=>x({...u,description:e.target.value}),placeholder:"Digital Music Distribution",className:"mt-1"})]}),(0,t.jsxs)(C.$,{onClick:()=>{localStorage.setItem("footerSettings_v2",JSON.stringify(u)),window.dispatchEvent(new CustomEvent("footerUpdate",{detail:u})),j("Lưu th\xe0nh c\xf4ng",["Đ\xe3 lưu c\xe0i đặt footer!"],"success")},className:"bg-green-500 hover:bg-green-600 text-white font-semibold rounded-full",children:[(0,t.jsx)(eL.A,{className:"h-4 w-4 mr-2"}),"Lưu c\xe0i đặt"]})]})]})}),(0,t.jsx)(K.av,{value:"guide",children:(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border border-gray-700",children:[(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center",children:[(0,t.jsx)(eE.A,{className:"mr-2"}),"Hướng dẫn sử dụng ",l.appName]})}),(0,t.jsx)(E.Wu,{className:"space-y-6",children:(0,t.jsxs)("div",{className:"prose prose-invert max-w-none",children:[(0,t.jsxs)("h3",{children:["\uD83D\uDE80 Hướng dẫn c\xe0i đặt v\xe0 sử dụng ",l.appName]}),(0,t.jsx)("h4",{children:"1. Đăng nhập hệ thống"}),(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Label Manager:"})," admin / admin (to\xe0n quyền)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Nghệ sĩ:"})," artist / 123456 (quyền hạn chế)"]})]}),(0,t.jsx)("h4",{children:"2. Cấu h\xecnh hệ thống (Label Manager)"}),(0,t.jsxs)("ol",{children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"C\xe0i đặt SMTP:"})," Cấu h\xecnh email để gửi th\xf4ng b\xe1o"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"C\xe0i đặt Database:"})," Kết nối database để lưu trữ dữ liệu"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"C\xe0i đặt ứng dụng:"})," T\xf9y chỉnh t\xean, logo, trang chủ"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"C\xe0i đặt Background:"})," Chọn gradient hoặc video YouTube"]})]}),(0,t.jsx)("h4",{children:"3. Quản l\xfd người d\xf9ng"}),(0,t.jsx)("p",{children:"Label Manager c\xf3 thể:"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Tạo, sửa, x\xf3a t\xe0i khoản nghệ sĩ"}),(0,t.jsx)("li",{children:"Thay đổi th\xf4ng tin c\xe1 nh\xe2n của nghệ sĩ"}),(0,t.jsx)("li",{children:"Quản l\xfd quyền hạn v\xe0 vai tr\xf2"})]}),(0,t.jsx)("h4",{children:"4. Đăng tải nhạc"}),(0,t.jsx)("p",{children:"Cả Label Manager v\xe0 Nghệ sĩ đều c\xf3 thể:"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Upload file nhạc (WAV, 24bit+)"}),(0,t.jsx)("li",{children:"Upload ảnh b\xeca (JPG, 4000x4000px)"}),(0,t.jsx)("li",{children:"Điền th\xf4ng tin metadata"}),(0,t.jsx)("li",{children:"Chọn ng\xe0y ph\xe1t h\xe0nh"})]}),(0,t.jsx)("h4",{children:"5. Quản l\xfd b\xe0i h\xe1t"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Xem danh s\xe1ch submissions"}),(0,t.jsx)("li",{children:"Cập nhật trạng th\xe1i ph\xe1t h\xe0nh"}),(0,t.jsx)("li",{children:"Tải xuống file nhạc v\xe0 ảnh"}),(0,t.jsx)("li",{children:"Quản l\xfd ISRC code"})]}),(0,t.jsx)("h4",{children:"6. T\xecm kiếm ISRC"}),(0,t.jsx)("p",{children:"Sử dụng c\xf4ng cụ t\xedch hợp để:"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Tra cứu th\xf4ng tin ISRC"}),(0,t.jsx)("li",{children:"Kiểm tra b\xe0i h\xe1t tr\xean c\xe1c platform"}),(0,t.jsx)("li",{children:"Tr\xe1nh tr\xf9ng lặp khi ph\xe1t h\xe0nh"}),(0,t.jsx)("li",{children:"Tr\xe1nh tr\xf9ng lặp khi ph\xe1t h\xe0nh"})]}),"Label Manager"===e.role&&(0,t.jsxs)("div",{className:"mt-8 p-4 bg-blue-900/30 border border-blue-500/50 rounded-lg",children:[(0,t.jsx)("h4",{children:"\uD83D\uDCCB Hướng dẫn Setup cho Label Manager"}),(0,t.jsx)("p",{children:"Để chuyển từ chế độ Demo sang Production:"}),(0,t.jsxs)("ol",{children:[(0,t.jsx)("li",{children:"Cấu h\xecnh SMTP với th\xf4ng tin email thật"}),(0,t.jsx)("li",{children:"Kết nối database (MySQL/PostgreSQL)"}),(0,t.jsx)("li",{children:"Kiểm tra localStorage hoạt động"}),(0,t.jsx)("li",{children:"Khi cả 3 hệ thống kết nối, logo BETA sẽ tự động ẩn"})]}),(0,t.jsx)("h5",{children:"Cấu h\xecnh SMTP Gmail:"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Server: smtp.gmail.com"}),(0,t.jsx)("li",{children:"Port: 587"}),(0,t.jsx)("li",{children:"Tạo App Password trong Google Account"}),(0,t.jsx)("li",{children:"Sử dụng App Password thay v\xec mật khẩu thường"})]}),(0,t.jsx)("h5",{children:"T\xf9y chỉnh giao diện:"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Background: Gradient CSS hoặc YouTube video"}),(0,t.jsx)("li",{children:"Logo: Upload v\xe0 set l\xe0m favicon"}),(0,t.jsx)("li",{children:"Footer: T\xf9y chỉnh th\xf4ng tin c\xf4ng ty"}),(0,t.jsx)("li",{children:"Font: Dosis (mặc định, kh\xf4ng thay đổi)"})]})]}),(0,t.jsxs)("div",{className:"mt-6 p-4 bg-gray-700 rounded-lg",children:[(0,t.jsx)("h5",{children:"\uD83D\uDCA1 Mẹo sử dụng:"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Click v\xe0o logo để về trang chủ"}),(0,t.jsx)("li",{children:"Sử dụng t\xednh năng t\xecm kiếm ISRC trước khi ph\xe1t h\xe0nh"}),(0,t.jsx)("li",{children:"Backup dữ liệu thường xuy\xean"}),(0,t.jsx)("li",{children:"Kiểm tra trạng th\xe1i kết nối ở g\xf3c phải m\xe0n h\xecnh"})]})]})]})})]})}),(0,t.jsx)(K.av,{value:"mode",children:(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border border-gray-700",children:[(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center font-semibold",children:[(0,t.jsx)(f.A,{className:"mr-2"}),"Chế độ ứng dụng"]})}),(0,t.jsxs)(E.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(J.J,{className:"text-lg font-semibold",children:["Chế độ hiện tại: ","production"===c?"Production":"Demo"]}),(0,t.jsxs)("div",{className:"mt-2 p-4 bg-gray-700 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"Demo Mode"}),(0,t.jsx)(eT,{checked:"demo"===c,onCheckedChange:e=>{e&&"demo"!==c&&(localStorage.setItem("APP_MODE","demo"),o("demo"),window.location.reload())}})]}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Sử dụng dữ liệu demo, kh\xf4ng kết nối database/SMTP thực"})]})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"mt-2 p-4 bg-gray-700 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"Production Mode"}),(0,t.jsx)(eT,{checked:"production"===c,onCheckedChange:e=>{e&&"production"!==c&&(localStorage.setItem("APP_MODE","production"),o("production"),window.location.reload())}})]}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Kết nối database v\xe0 SMTP thực, test ch\xednh thức"})]})})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"text-lg font-semibold",children:"Th\xf4ng tin chế độ"}),(0,t.jsxs)("div",{className:"mt-2 p-4 bg-blue-900/20 border border-blue-600 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-semibold text-blue-400 mb-2",children:"\uD83D\uDD27 Production Mode"}),(0,t.jsxs)("ul",{className:"text-sm space-y-1 text-gray-300",children:[(0,t.jsx)("li",{children:"✅ Kết nối PostgreSQL Database thực"}),(0,t.jsx)("li",{children:"✅ Gửi email qua SMTP thực"}),(0,t.jsx)("li",{children:"✅ Authentication từ database"}),(0,t.jsx)("li",{children:"✅ Lưu dữ liệu v\xe0o database"}),(0,t.jsx)("li",{children:"⚠️ Cần cấu h\xecnh database v\xe0 SMTP đ\xfang"})]})]}),(0,t.jsxs)("div",{className:"mt-4 p-4 bg-yellow-900/20 border border-yellow-600 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-semibold text-yellow-400 mb-2",children:"\uD83C\uDFAE Demo Mode"}),(0,t.jsxs)("ul",{className:"text-sm space-y-1 text-gray-300",children:[(0,t.jsx)("li",{children:"\uD83C\uDFAF Dữ liệu demo/mock"}),(0,t.jsx)("li",{children:"\uD83C\uDFAF Authentication giả lập"}),(0,t.jsx)("li",{children:"\uD83C\uDFAF Email chỉ hiển thị, kh\xf4ng gửi thực"}),(0,t.jsx)("li",{children:"\uD83C\uDFAF Ph\xf9 hợp để demo/test UI"}),(0,t.jsx)("li",{children:"\uD83D\uDCA1 Kh\xf4ng cần cấu h\xecnh g\xec"})]})]})]})})]}),(0,t.jsx)("div",{className:"border-t border-gray-600 pt-4",children:(0,t.jsxs)("div",{className:"bg-orange-900/20 border border-orange-600 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-orange-400 mb-2",children:"⚡ Lưu \xfd quan trọng"}),(0,t.jsx)("p",{className:"text-sm text-gray-300",children:"Thay đổi chế độ sẽ reload lại ứng dụng. Đảm bảo bạn đ\xe3 cấu h\xecnh đ\xfang Database URL v\xe0 SMTP settings trong file .env.local trước khi chuyển sang Production Mode."})]})})]})]})})]}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border border-gray-700",children:[(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center",children:[(0,t.jsx)(m.A,{className:"mr-2"}),"C\xe0i đặt hệ thống"]})}),(0,t.jsx)(E.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(E.Zp,{children:[(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center",children:[(0,t.jsx)(f.A,{className:"mr-2"}),"Trạng th\xe1i hệ thống"]})}),(0,t.jsx)(E.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{children:"Nền tảng"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("span",{className:"text-sm text-green-600",children:"Online"})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{children:"Database"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,t.jsx)("span",{className:"text-sm text-yellow-600",children:"Demo Mode"})]})]})]})})]}),(0,t.jsxs)(E.Zp,{children:[(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center",children:[(0,t.jsx)(eP.A,{className:"mr-2"}),"Giao diện"]})}),(0,t.jsx)(E.Wu,{children:(0,t.jsx)("p",{className:"text-gray-600",children:"C\xe0i đặt giao diện sẽ c\xf3 trong bản cập nhật sau..."})})]}),"Label Manager"===e.role&&(0,t.jsxs)(E.Zp,{children:[(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center",children:[(0,t.jsx)(g.A,{className:"mr-2"}),"Cấu h\xecnh Email"]})}),(0,t.jsx)(E.Wu,{children:(0,t.jsx)("p",{className:"text-gray-600",children:"C\xe0i đặt SMTP c\xf3 sẵn trong Bảng điều khiển Quản trị"})})]})]})})]})})]})}var eB=a(2318);function e_(){let[e,s]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[l,i]=(0,r.useState)(0);return(0,r.useEffect)(()=>{(async()=>{try{n(!0);let a=await fetch("/api/artists"),t=await a.json();if(t.success&&t.artists){var e;s(t.artists),i(null!=(e=t.count)?e:t.artists.length)}else console.error("Failed to fetch users:",t.error)}catch(e){console.error("Error fetching users:",e)}finally{n(!1)}})()},[]),(0,t.jsxs)("div",{className:"p-2 md:p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("h2",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,t.jsx)(u.A,{className:"mr-3 text-purple-400"}),"Quản L\xfd Người D\xf9ng"]}),(0,t.jsxs)(C.$,{className:"bg-purple-600 hover:bg-purple-700",children:[(0,t.jsx)(eB.A,{className:"h-4 w-4 mr-2"}),"Th\xeam Người D\xf9ng"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(0,t.jsxs)(E.Zp,{children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium",children:"Tổng Người D\xf9ng"}),(0,t.jsx)(u.A,{className:"h-4 w-4 text-purple-500"})]}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:a?"...":e.length}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Người d\xf9ng hoạt động"})]})]}),(0,t.jsxs)(E.Zp,{children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium",children:"Quản L\xfd Nh\xe3n Hiệu"}),(0,t.jsx)(x.A,{className:"h-4 w-4 text-blue-500"})]}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.filter(e=>"Label Manager"===e.role).length}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Người d\xf9ng quản trị"})]})]}),(0,t.jsxs)(E.Zp,{children:[(0,t.jsxs)(E.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(E.ZB,{className:"text-sm font-medium",children:"Nghệ Sĩ"}),(0,t.jsx)(u.A,{className:"h-4 w-4 text-green-500"})]}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.filter(e=>"Artist"===e.role).length}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"T\xe0i khoản nghệ sĩ"})]})]})]}),(0,t.jsxs)(E.Zp,{children:[(0,t.jsx)(E.aR,{children:(0,t.jsx)(E.ZB,{children:"Danh S\xe1ch Người D\xf9ng"})}),(0,t.jsx)(E.Wu,{children:(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.fullName}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["@",e.username," • ",e.email]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.role})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(C.$,{variant:"outline",size:"sm",children:"Chỉnh Sửa"}),(0,t.jsx)(C.$,{variant:"destructive",size:"sm",children:"X\xf3a"})]})]},e.id))})})]})]})}let eJ=(0,r.createContext)(void 0);function eO(e){let{children:s,requireRole:a,requirePermission:n,fallbackComponent:l,fallbackMessage:i="You don't have permission to access this feature."}=e,{user:c}=function(){let e=(0,r.useContext)(eJ);return e?{user:e.user,isAuthenticated:!!e.user,isLoading:e.loading,login:e.login,logout:e.logout}:{user:null,isAuthenticated:!1,isLoading:!1,login:async()=>!1,logout:()=>{}}}();if(!c)return null;if(a&&c.role!==a)return l||(0,t.jsxs)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[(0,t.jsx)("p",{className:"text-yellow-800 text-sm",children:i}),(0,t.jsxs)("p",{className:"text-xs text-yellow-600 mt-1",children:["Required role: ",a]})]});if(n){let e=!1;switch(n){case"systemSettings":e=ex.canAccessSystemSettings(c).allowed;break;case"debugTools":e=ex.canUseDebugTools(c).allowed;break;case"fullStatistics":e=ex.canViewFullStatistics(c).allowed;break;case"approveReject":e=ex.canApproveRejectSubmission(c).allowed}if(!e)return l||(0,t.jsxs)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[(0,t.jsx)("p",{className:"text-yellow-800 text-sm",children:i}),(0,t.jsxs)("p",{className:"text-xs text-yellow-600 mt-1",children:["Required permission: ",n]})]})}return(0,t.jsx)(t.Fragment,{children:s})}function eV(){let[e,s]=(0,r.useState)(""),a=async()=>{let e=await ec.getStatus();s(JSON.stringify(e,null,2)),e.api?el.v.info("Database connection check successful",{component:"DebugTools",action:"checkDatabase"}):el.v.warn("Database connection check failed",{component:"DebugTools",action:"checkDatabase",data:"API connection failed"})};return(0,t.jsx)(eO,{requirePermission:"debugTools",fallbackMessage:"Debug tools are only available for Label Managers.",children:(0,t.jsxs)(E.Zp,{className:"shadow-md",children:[(0,t.jsx)(E.aR,{children:(0,t.jsx)(E.ZB,{children:"Debug Tools"})}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsxs)(K.tU,{defaultValue:"logs",children:[(0,t.jsxs)(K.j7,{className:"mb-4",children:[(0,t.jsx)(K.Xi,{value:"logs",children:"Logs"}),(0,t.jsx)(K.Xi,{value:"db",children:"Database"}),(0,t.jsx)(K.Xi,{value:"storage",children:"Storage"})]}),(0,t.jsx)(K.av,{value:"logs",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(C.$,{onClick:()=>{el.v.debug("Test debug message",{testData:{value:123}}),el.v.info("Test info message",{testData:{value:456}}),el.v.warn("Test warning message",{testData:{value:789}}),el.v.error("Test error message",{error:Error("Test error")}),s("Generated 4 test log entries")},children:"Generate Test Logs"}),(0,t.jsx)(C.$,{variant:"outline",onClick:()=>el.v.clearLogs(),children:"Clear Logs"})]})}),(0,t.jsx)(K.av,{value:"db",children:(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)(C.$,{onClick:a,children:"Check Database Connection"})})}),(0,t.jsx)(K.av,{value:"storage",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(C.$,{variant:"destructive",onClick:()=>{localStorage.clear(),el.v.info("Cleared all localStorage data",{component:"DebugTools",action:"clearAllData"}),s("All localStorage data cleared")},children:"Clear All Data"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Warning: This will clear all localStorage data including logs and submissions"})]})})]}),e&&(0,t.jsx)("div",{className:"mt-4 p-4 bg-gray-100 rounded-md",children:(0,t.jsx)("pre",{className:"text-xs overflow-auto max-h-40",children:e})})]})]})})}function eZ(e){var s,a,l;let{showModal:i}=e,{user:c}=(0,n.A)(),[o,d]=(0,r.useState)(null),[h,g]=(0,r.useState)(!0),[p,j]=(0,r.useState)("overview"),[b,v]=(0,r.useState)([]),[N,y]=(0,r.useState)([]),[w,S]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/admin/stats"),s=await e.json();s.success?d(s.data):console.error("Failed to fetch admin stats:",s.error)}catch(e){console.error("Error fetching admin stats:",e)}finally{g(!1)}};(null==c?void 0:c.role)==="Label Manager"&&e()},[c]),c)?"Label Manager"!==c.role?(el.v.warn("AdminPanelView: Access denied for non-label manager",{component:"AdminPanelView",userId:c.id,role:c.role}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)(E.Zp,{children:(0,t.jsxs)(E.Wu,{className:"text-center py-12",children:[(0,t.jsx)(x.A,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-red-600 mb-2",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Only Label Managers can access the Admin Panel"})]})})})):(el.v.info("AdminPanelView: Component rendered",{component:"AdminPanelView",userId:c.id}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("h2",{className:"text-3xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,t.jsx)(x.A,{className:"mr-3 text-purple-400"}),"Admin Panel"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,t.jsxs)(E.Zp,{children:[(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center",children:[(0,t.jsx)(f.A,{className:"mr-2"}),"Database"]})}),(0,t.jsx)(E.Wu,{children:(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full mx-auto mb-2 ".concat(h?"bg-gray-400":(null==o?void 0:o.database.connected)?"bg-green-500":"bg-red-500")}),(0,t.jsx)("p",{className:"text-sm ".concat(h?"text-gray-600":(null==o?void 0:o.database.connected)?"text-green-600":"text-red-600"),children:h?"Checking...":(null==o?void 0:o.database.connected)?"Connected (".concat(o.database.type,")"):"Disconnected"})]})})]}),(0,t.jsxs)(E.Zp,{children:[(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center",children:[(0,t.jsx)(u.A,{className:"mr-2"}),"Users"]})}),(0,t.jsx)(E.Wu,{children:(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:h?"...":null!=(s=null==o?void 0:o.users.totalArtists)?s:0}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Active Artists"})]})})]}),(0,t.jsxs)(E.Zp,{children:[(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center",children:[(0,t.jsx)(m.A,{className:"mr-2"}),"System"]})}),(0,t.jsx)(E.Wu,{children:(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)("div",{className:"text-lg font-bold",children:h?"...":null!=(a=null==o?void 0:o.system.version)?a:"Unknown"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:h?"Loading...":null!=(l=null==o?void 0:o.system.environment)?l:"Unknown"})]})})]})]}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)(eV,{})})]})):(0,t.jsx)("div",{className:"p-6 min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Đang tải th\xf4ng tin"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Vui l\xf2ng chờ trong gi\xe2y l\xe1t..."})]})})}var ez=a(7108),e$=a(2568),eW=a(2486),eG=a(5021),eH=a(9727),eX=a(9144),eK=a(7240),eq=a(9621),eQ=a(8164),eY=a(8749);function e0(e){let{value:s,onChange:a,placeholder:n,mode:l="text"}=e,[i,c]=(0,r.useState)(!1),[o,d]=(0,r.useState)(l),h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.getElementById("rich-editor");if(!n)return;let r=n.selectionStart,l=n.selectionEnd,i=s.substring(r,l),c=s.substring(0,r)+e+i+t+s.substring(l);a(c,m(c)),setTimeout(()=>{n.focus(),n.setSelectionRange(r+e.length,r+e.length+i.length)},0)},m=e=>"html"===o?e:e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/__(.*?)__/g,"<u>$1</u>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\[([^\]]+)\]$$([^)]+)$$/g,'<a href="$2">$1</a>').replace(/\n/g,"<br>"),u=[{icon:eH.A,action:()=>h("**","**"),title:"Bold"},{icon:eX.A,action:()=>h("*","*"),title:"Italic"},{icon:eK.A,action:()=>h("__","__"),title:"Underline"},{icon:eq.A,action:()=>h("`","`"),title:"Code"},{icon:eQ.A,action:()=>h("[","](url)"),title:"Link"},{icon:eI.A,action:()=>h("![","](url)"),title:"Image"}];return(0,t.jsxs)("div",{className:"border border-gray-600 rounded-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gray-700 p-2 flex items-center justify-between border-b border-gray-600",children:[(0,t.jsx)("div",{className:"flex items-center space-x-1",children:u.map((e,s)=>(0,t.jsx)(C.$,{variant:"ghost",size:"sm",onClick:e.action,className:"h-8 w-8 p-0",title:e.title,children:(0,t.jsx)(e.icon,{className:"h-4 w-4"})},s))}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(C.$,{variant:"ghost",size:"sm",onClick:()=>d("html"===o?"text":"html"),className:"text-xs",children:"html"===o?"HTML":"Text"}),(0,t.jsx)(C.$,{variant:"ghost",size:"sm",onClick:()=>c(!i),className:"h-8 w-8 p-0",title:i?"Edit":"Preview",children:i?(0,t.jsx)(eY.A,{className:"h-4 w-4"}):(0,t.jsx)(ep.A,{className:"h-4 w-4"})})]})]}),(0,t.jsx)("div",{className:"min-h-[200px]",children:i?(0,t.jsx)("div",{className:"p-4 prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:m(s)}}):(0,t.jsx)(O.T,{id:"rich-editor",value:s,onChange:e=>a(e.target.value,m(e.target.value)),placeholder:n,className:"border-0 rounded-none resize-none min-h-[200px] focus:ring-0"})}),(0,t.jsx)("div",{className:"bg-gray-750 p-2 text-xs text-gray-400",children:"text"===o?"Markdown: **bold** *italic* __underline__ `code` [link](url) ![image](url)":"HTML: <strong>bold</strong> <em>italic</em> <u>underline</u> <code>code</code>"})]})}async function e4(e){return new Promise(e=>setTimeout(()=>e({success:!0,message:"Email sent successfully."}),1e3))}function e2(e){let{showModal:s}=e,[a,n]=(0,r.useState)([]),[l,i]=(0,r.useState)(null),[c,o]=(0,r.useState)(!1),[h,u]=(0,r.useState)([]),[x,p]=(0,r.useState)("Connected"),[j,b]=(0,r.useState)(new Date().toLocaleString("vi-VN")),[f,v]=(0,r.useState)({from:"",to:"",cc:"",bcc:"",subject:"",content:"",htmlContent:"",type:"text"}),N="emailSettings_v2",[y,w]=(0,r.useState)({smtpServer:"",smtpPort:"587",smtpUsername:"",smtpPassword:"",connected:!1});(0,r.useEffect)(()=>{S(),k();let e=localStorage.getItem(N);if(e)try{w(JSON.parse(e))}catch(e){console.error("EmailCenterView: Failed to parse SMTP settings from localStorage",e)}let s=setInterval(T,3e4);return()=>clearInterval(s)},[]);let S=()=>{let e=localStorage.getItem("emailTemplates_v2");if(e)n(JSON.parse(e));else{let e=[{id:"status_update",name:"Cập nhật trạng th\xe1i",subject:"Cập nhật trạng th\xe1i b\xe0i h\xe1t [tenbaihat]",content:'Ch\xe0o [tennghesi],\n\nB\xe0i h\xe1t "[tenbaihat]" (ID: [id]) của bạn đ\xe3 được cập nhật.\nTrạng th\xe1i hiện tại: [trangthai]\n\nNg\xe0y gửi: [ngaygui]\nNg\xe0y ph\xe1t h\xe0nh dự kiến: [ngayphathanh]\n\nCh\xfang t\xf4i sẽ th\xf4ng b\xe1o khi c\xf3 cập nhật mới.\n\nTr\xe2n trọng,\n[tenmanager]\n[email]',htmlContent:"",type:"text",variables:["tennghesi","tenbaihat","id","trangthai","ngaygui","ngayphathanh","tenmanager","email"]},{id:"welcome",name:"Ch\xe0o mừng nghệ sĩ mới",subject:"Ch\xe0o mừng [tennghesi] đến với [tenlabel]!",content:"<h2>Ch\xe0o mừng [tennghesi]!</h2>\n<p>Cảm ơn bạn đ\xe3 tham gia cộng đồng <strong>[tenlabel]</strong>.</p>\n<p>T\xe0i khoản của bạn đ\xe3 được k\xedch hoạt th\xe0nh c\xf4ng:</p>\n<ul>\n<li>Username: [username]</li>\n<li>Email: [email]</li>\n<li>Vai tr\xf2: [vaitro]</li>\n</ul>\n<p>Bạn c\xf3 thể bắt đầu tải nhạc l\xean ngay b\xe2y giờ!</p>\n<br>\n<p>Tr\xe2n trọng,<br>[tenmanager]</p>",htmlContent:"",type:"html",variables:["tennghesi","tenlabel","username","email","vaitro","tenmanager"]}];n(e),A(e)}},k=()=>{let e=localStorage.getItem("emailMessages_v2");e?u(JSON.parse(e)):(u([]),localStorage.setItem("emailMessages_v2",JSON.stringify([])))},A=e=>{localStorage.setItem("emailTemplates_v2",JSON.stringify(e))},T=()=>{p("Syncing..."),setTimeout(()=>{p("Connected"),b(new Date().toLocaleString("vi-VN"))},2e3)},D=e=>{if(confirm("Bạn c\xf3 chắc muốn x\xf3a mẫu email n\xe0y?")){let t=a.filter(s=>s.id!==e);n(t),A(t),(null==l?void 0:l.id)===e&&i(null),s("X\xf3a th\xe0nh c\xf4ng",["Đ\xe3 x\xf3a mẫu email"],"success")}},L=async()=>{if(!f.to||!f.subject||!f.content)return void s("Lỗi gửi email",["Vui l\xf2ng điền đầy đủ th\xf4ng tin"],"error");let e={from:f.from,to:f.to,cc:f.cc,bcc:f.bcc,subject:f.subject,textBody:"text"===f.type?f.content:"Vui l\xf2ng xem nội dung HTML.",htmlBody:"html"===f.type?f.htmlContent:void 0},a=await e4(e);if(a.success){let t=[{id:"msg_".concat(Date.now()),...e,content:f.content,date:new Date().toLocaleString("vi-VN"),read:!0,type:"sent"},...h];u(t),localStorage.setItem("emailMessages_v2",JSON.stringify(t)),s("Gửi email th\xe0nh c\xf4ng",[a.message],"success"),v({from:"",to:"",cc:"",bcc:"",subject:"",content:"",htmlContent:"",type:"text"})}else s("Lỗi gửi email",[a.message],"error")},P=h.filter(e=>!e.read&&"received"===e.type).length;return(0,t.jsxs)("div",{className:"p-6 font-sans",children:[(0,t.jsxs)("h2",{className:"text-3xl font-bold text-white mb-6 flex items-center",children:[(0,t.jsx)(g.A,{className:"mr-3 text-purple-400"}),"Trung t\xe2m email","Connected"===x&&(0,t.jsx)(eb.A,{className:"ml-2 h-5 w-5 text-green-400"})]}),(0,t.jsxs)(K.tU,{defaultValue:"inbox",className:"space-y-6",children:[(0,t.jsxs)(K.j7,{className:"grid w-full grid-cols-5 font-medium",children:[(0,t.jsxs)(K.Xi,{value:"inbox",className:"relative",children:["Hộp thư",P>0&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:P})]}),(0,t.jsx)(K.Xi,{value:"compose",children:"Soạn email"}),(0,t.jsx)(K.Xi,{value:"templates",children:"Mẫu email"}),(0,t.jsx)(K.Xi,{value:"settings",children:"C\xe0i đặt SMTP"}),(0,t.jsx)(K.Xi,{value:"sync",children:"Đồng bộ"})]}),(0,t.jsx)(K.av,{value:"inbox",className:"space-y-6",children:(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center justify-between font-semibold",children:[(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(ez.A,{className:"mr-2"}),"Hộp thư đến (",h.length,")"]}),(0,t.jsxs)(C.$,{onClick:T,variant:"outline",disabled:"Syncing..."===x,className:"font-medium",children:[(0,t.jsx)(e$.A,{className:"mr-2 h-4 w-4"}),"Syncing..."===x?"Đang đồng bộ...":"Đồng bộ"]})]})}),(0,t.jsxs)(E.Wu,{children:[(0,t.jsx)("div",{className:"space-y-2",children:h.map(e=>(0,t.jsx)(E.Zp,{className:"cursor-pointer transition-colors ".concat(e.read?"bg-gray-700":"bg-blue-900/30"," border-gray-600 hover:bg-gray-600"),onClick:()=>(e=>{let s=h.map(s=>s.id===e?{...s,read:!0}:s);u(s),localStorage.setItem("emailMessages_v2",JSON.stringify(s))})(e.id),children:(0,t.jsx)(E.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,t.jsx)("span",{className:"px-2 py-1 rounded text-xs font-dosis-medium ".concat("sent"===e.type?"bg-green-600":"bg-blue-600"),children:"sent"===e.type?"Đ\xe3 gửi":"Nhận"}),!e.read&&"received"===e.type&&(0,t.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),(0,t.jsx)("h4",{className:"font-semibold text-white",children:e.subject}),(0,t.jsx)("p",{className:"text-gray-400 text-sm font-sans",children:"sent"===e.type?"Đến: ".concat(e.to):"Từ: ".concat(e.from)}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mt-1 line-clamp-2 font-sans",children:e.content})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("p",{className:"text-xs text-gray-500 font-sans",children:e.date})})]})})},e.id))}),(0,t.jsxs)("div",{className:"mt-4 text-center text-gray-500 text-sm font-sans",children:["Lần đồng bộ cuối: ",j]})]})]})}),(0,t.jsx)(K.av,{value:"compose",className:"space-y-6",children:(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border-gray-700 font-sans",children:[(0,t.jsxs)(E.aR,{children:[" ",(0,t.jsxs)(E.ZB,{className:"flex items-center font-semibold",children:[(0,t.jsx)(eW.A,{className:"mr-2"}),"Soạn email mới"]})]}),(0,t.jsxs)(E.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"font-medium",children:"Từ (From)"}),(0,t.jsx)(B.p,{value:f.from,onChange:e=>v({...f,from:e.target.value}),placeholder:"your-email@example.com",className:"font-sans"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"font-medium",children:"Đến (To) *"}),(0,t.jsx)(B.p,{value:f.to,onChange:e=>v({...f,to:e.target.value}),placeholder:"recipient@example.com",className:"font-sans"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"font-medium",children:"CC"}),(0,t.jsx)(B.p,{value:f.cc,onChange:e=>v({...f,cc:e.target.value}),placeholder:"cc@domain.com",className:"font-sans"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"font-medium",children:"BCC"}),(0,t.jsx)(B.p,{value:f.bcc,onChange:e=>v({...f,bcc:e.target.value}),placeholder:"bcc@domain.com",className:"font-sans"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"font-medium",children:"Chủ đề (Subject) *"}),(0,t.jsx)(B.p,{value:f.subject,onChange:e=>v({...f,subject:e.target.value}),placeholder:"Chủ đề email...",className:"font-sans"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"font-medium",children:"Ph\xe2n loại nội dung"}),(0,t.jsxs)(_.l6,{value:f.type,onValueChange:e=>v({...f,type:e}),children:[(0,t.jsx)(_.bq,{className:"w-48 font-sans",children:(0,t.jsx)(_.yv,{})}),(0,t.jsxs)(_.gC,{children:[(0,t.jsx)(_.eb,{value:"text",className:"font-sans",children:"Văn bản thuần"}),(0,t.jsx)(_.eb,{value:"html",className:"font-sans",children:"HTML"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"font-medium",children:"Nội dung email *"}),(0,t.jsx)(e0,{value:f.content,onChange:(e,s)=>v({...f,content:e,htmlContent:s}),mode:f.type,placeholder:"Nội dung email..."})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(C.$,{onClick:L,className:"bg-blue-600 hover:bg-blue-700 font-medium",children:[(0,t.jsx)(eW.A,{className:"mr-2 h-4 w-4"}),"Gửi"]}),(0,t.jsx)(C.$,{variant:"outline",onClick:()=>v({from:"",to:"",cc:"",bcc:"",subject:"",content:"",htmlContent:"",type:"text"}),className:"font-medium",children:"X\xf3a form"})]})]})]})}),(0,t.jsx)(K.av,{value:"templates",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border-gray-700 font-sans",children:[(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center justify-between font-semibold",children:[(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(d.A,{className:"mr-2"}),"Mẫu email (",a.length,")"]}),(0,t.jsx)(C.$,{onClick:()=>{i({id:"template_".concat(Date.now()),name:"Mẫu email mới",subject:"",content:"",htmlContent:"",type:"text",variables:[]}),o(!0)},size:"sm",className:"bg-green-600 hover:bg-green-700 font-medium",children:(0,t.jsx)(er.A,{className:"h-4 w-4"})})]})}),(0,t.jsx)(E.Wu,{className:"space-y-2",children:a.map(e=>(0,t.jsx)("div",{role:"button",tabIndex:0,"aria-pressed":(null==l?void 0:l.id)===e.id,className:"p-3 rounded-lg cursor-pointer transition-colors email-template-card text-left w-full ".concat((null==l?void 0:l.id)===e.id?"bg-purple-600":"bg-gray-700 hover:bg-gray-600"),onClick:()=>i(e),onKeyDown:s=>{("Enter"===s.key||" "===s.key)&&(s.preventDefault(),i(e))},children:(0,t.jsxs)("div",{className:"flex items-center justify-between font-sans",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-white",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:e.type.toUpperCase()})]}),(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)("div",{role:"button",tabIndex:0,"aria-label":"Edit template",className:"h-8 w-8 p-0 font-sans inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground cursor-pointer",onClick:s=>{s.stopPropagation(),i(e),o(!0)},onKeyDown:s=>{("Enter"===s.key||" "===s.key)&&(s.preventDefault(),s.stopPropagation(),i(e),o(!0))},children:(0,t.jsx)(ej.A,{className:"h-4 w-4"})}),(0,t.jsx)("div",{role:"button",tabIndex:0,"aria-label":"Delete template",className:"h-8 w-8 p-0 text-red-400 hover:text-red-300 font-sans inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground cursor-pointer",onClick:s=>{s.stopPropagation(),D(e.id)},onKeyDown:s=>{("Enter"===s.key||" "===s.key)&&(s.preventDefault(),s.stopPropagation(),D(e.id))},children:(0,t.jsx)(en.A,{className:"h-4 w-4"})})]})]})},e.id))})]}),(0,t.jsx)("div",{className:"lg:col-span-2",children:l?(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border-gray-700 font-sans",children:[" ",(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center justify-between font-semibold",children:[(0,t.jsxs)("span",{children:[c?"Chỉnh sửa":"Xem"," mẫu email"]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(C.$,{onClick:()=>(e=>{let a=e.variables.map(e=>"[".concat(e,"]")).join(", ");navigator.clipboard.writeText(a),s("Copy th\xe0nh c\xf4ng",["Đ\xe3 copy c\xe1c biến: ".concat(a)],"success")})(l),variant:"outline",size:"sm",className:"font-medium",children:[(0,t.jsx)(ey.A,{className:"mr-2 h-4 w-4"}),"Copy biến"]}),(0,t.jsxs)(C.$,{onClick:()=>{if(!l)return;let e={tennghesi:"Nguyễn Văn A",tenbaihat:"B\xe0i h\xe1t test",id:"MH123456",trangthai:"Đ\xe3 duyệt, đang chờ ph\xe1t h\xe0nh!",ngaygui:new Date().toLocaleDateString("vi-VN"),ngayphathanh:new Date(Date.now()+6048e5).toLocaleDateString("vi-VN"),tenmanager:"An Kun Studio",email:"manager@yourdomain.com",tenlabel:"An Kun Studio",username:"test_user",vaitro:"Nghệ sĩ"},a=l.content;Object.entries(e).forEach(e=>{let[s,t]=e;a=a.replace(RegExp("\\[".concat(s,"\\]"),"g"),t)}),s("Test email",[a],"success")},variant:"outline",size:"sm",className:"font-medium",children:[(0,t.jsx)(eG.A,{className:"mr-2 h-4 w-4"}),"Test"]}),c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.$,{onClick:()=>{if(!l)return;let e=a.filter(e=>e.id!==l.id);e.push(l),n(e),A(e),o(!1),s("Lưu th\xe0nh c\xf4ng",['Đ\xe3 lưu mẫu email "'.concat(l.name,'"')],"success")},className:"bg-green-600 hover:bg-green-700 font-medium",children:"Lưu"}),(0,t.jsx)(C.$,{variant:"outline",onClick:()=>o(!1),className:"font-medium",children:"Hủy"})]}):(0,t.jsxs)(C.$,{variant:"outline",onClick:()=>o(!0),className:"font-medium",children:[(0,t.jsx)(ej.A,{className:"mr-2 h-4 w-4"}),"Sửa"]})]})]})}),(0,t.jsxs)(E.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"font-medium",children:"T\xean mẫu"}),(0,t.jsx)(B.p,{value:l.name,onChange:e=>i({...l,name:e.target.value}),disabled:!c,className:"font-sans"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"font-medium",children:"Chủ đề email"}),(0,t.jsx)(B.p,{value:l.subject,onChange:e=>i({...l,subject:e.target.value}),disabled:!c,placeholder:"Chủ đề email...",className:"font-sans"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"font-medium",children:"Loại nội dung"}),(0,t.jsxs)(_.l6,{value:l.type,onValueChange:e=>i({...l,type:e}),disabled:!c,children:[(0,t.jsx)(_.bq,{className:"font-sans",children:(0,t.jsx)(_.yv,{})}),(0,t.jsxs)(_.gC,{children:[(0,t.jsx)(_.eb,{value:"text",className:"font-sans",children:"Văn bản thuần"}),(0,t.jsx)(_.eb,{value:"html",className:"font-sans",children:"HTML"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"font-medium",children:"Nội dung email"}),c?(0,t.jsx)(e0,{value:l.content,onChange:(e,s)=>i({...l,content:e,htmlContent:s}),mode:l.type,placeholder:"Nội dung email..."}):(0,t.jsx)("div",{className:"border border-gray-600 rounded-lg p-4 min-h-[200px] bg-gray-700",children:"html"===l.type?(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:l.content}}):(0,t.jsx)("pre",{className:"whitespace-pre-wrap text-sm font-sans",children:l.content})})]}),(0,t.jsxs)("div",{children:[" ",(0,t.jsx)(J.J,{className:"font-medium",children:"Biến sẵn c\xf3"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:["tennghesi","tenbaihat","id","trangthai","ngaygui","ngayphathanh","tenmanager","email","tenlabel","username","vaitro"].map(e=>(0,t.jsxs)("button",{type:"button",className:"px-2 py-1 bg-purple-600 text-white text-xs rounded cursor-pointer hover:bg-purple-700",onClick:()=>{if(c){let s=l.content+"[".concat(e,"]");i({...l,content:s})}},onKeyDown:s=>{if(("Enter"===s.key||" "===s.key)&&c){s.preventDefault();let a=l.content+"[".concat(e,"]");i({...l,content:a})}},tabIndex:0,"aria-label":"Ch\xe8n biến ".concat(e),children:["[",e,"]"]},e))})]})]})]}):(0,t.jsx)(E.Zp,{className:"bg-gray-800 border-gray-700",children:(0,t.jsxs)(E.Wu,{className:"p-8 text-center",children:[(0,t.jsx)(d.A,{className:"mx-auto h-12 w-12 text-gray-500 mb-4 font-sans"}),(0,t.jsx)("p",{className:"text-gray-400 font-sans",children:"Chọn một mẫu email để xem hoặc chỉnh sửa"})]})})})]})}),(0,t.jsx)(K.av,{value:"settings",className:"space-y-6",children:(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border-gray-700 font-sans",children:[(0,t.jsxs)(E.aR,{children:[" ",(0,t.jsxs)(E.ZB,{className:"flex items-center font-semibold",children:[(0,t.jsx)(m.A,{className:"mr-2"}),"C\xe0i đặt SMTP"]})]}),(0,t.jsxs)(E.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"font-dosis-medium",children:"SMTP Server"}),(0,t.jsx)(B.p,{value:y.smtpServer,onChange:e=>w({...y,smtpServer:e.target.value}),placeholder:"smtp.mail.me.com",className:"font-dosis"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"font-dosis-medium",children:"Port"}),(0,t.jsx)(B.p,{value:y.smtpPort,onChange:e=>w({...y,smtpPort:e.target.value}),placeholder:"587",className:"font-dosis"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"font-dosis-medium",children:"Username"}),(0,t.jsx)(B.p,{value:y.smtpUsername,onChange:e=>w({...y,smtpUsername:e.target.value}),placeholder:"your-email@example.com",className:"font-dosis"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{className:"font-dosis-medium",children:"Password"}),(0,t.jsx)(B.p,{type:"password",value:y.smtpPassword||"",onChange:e=>w({...y,smtpPassword:e.target.value}),placeholder:"grsa-aaxz-midn-pjta",className:"font-dosis"})]})]}),(0,t.jsx)("div",{className:"flex items-center space-x-2",children:y.connected?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eb.A,{className:"h-5 w-5 text-green-400"}),(0,t.jsx)("span",{className:"text-green-400 font-dosis",children:"Đ\xe3 kết nối (theo c\xe0i đặt đ\xe3 lưu)"})]}):(0,t.jsx)("span",{className:"text-yellow-400 font-dosis",children:"Chưa kết nối hoặc chưa lưu c\xe0i đặt."})}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(C.$,{onClick:()=>{localStorage.setItem(N,JSON.stringify({...y,connected:!1})),s("Lưu th\xe0nh c\xf4ng",["Đ\xe3 lưu c\xe0i đặt SMTP. Vui l\xf2ng test lại kết nối."],"success")},className:"bg-green-600 hover:bg-green-700 font-dosis-medium",children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Lưu c\xe0i đặt"]}),(0,t.jsxs)(C.$,{variant:"outline",onClick:async()=>{if(!y.smtpUsername)return void s("Lỗi Test SMTP",["Vui l\xf2ng nhập Username SMTP."],"error");let e={from:y.smtpUsername,to:y.smtpUsername,subject:"Test Email - Email Center - ".concat(new Date().toISOString()),textBody:"Đ\xe2y l\xe0 email test từ Trung t\xe2m Email.\nCấu h\xecnh SMTP của bạn hoạt động b\xecnh thường!"},a=await e4(e);w({...y,connected:a.success}),s(a.success?"Test SMTP Th\xe0nh C\xf4ng":"Test SMTP Thất Bại",[a.message],a.success?"success":"error")},className:"font-dosis-medium",children:[(0,t.jsx)(eG.A,{className:"mr-2 h-4 w-4"}),"Test kết nối"]})]})]})]})}),(0,t.jsx)(K.av,{value:"sync",className:"space-y-6",children:(0,t.jsxs)(E.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center font-dosis-semibold",children:[(0,t.jsx)(e$.A,{className:"mr-2"}),"Đồng bộ email"]})}),(0,t.jsxs)(E.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-dosis-semibold",children:"Trạng th\xe1i đồng bộ:"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-700 rounded",children:[(0,t.jsx)("span",{className:"font-dosis",children:"SMTP Connection"}),(0,t.jsx)("span",{className:"px-2 py-1 bg-green-600 text-white rounded text-sm font-dosis-medium",children:"Connected"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-700 rounded",children:[(0,t.jsx)("span",{className:"font-dosis",children:"Email Sync"}),(0,t.jsx)("span",{className:"px-2 py-1 rounded text-sm font-dosis-medium ".concat("Connected"===x?"bg-green-600 text-white":"bg-yellow-600 text-white"),children:x})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-700 rounded",children:[(0,t.jsx)("span",{className:"font-dosis",children:"Auto Sync"}),(0,t.jsx)("span",{className:"px-2 py-1 bg-blue-600 text-white rounded text-sm font-dosis-medium",children:"Enabled"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-dosis-semibold",children:"Thao t\xe1c:"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(C.$,{onClick:T,className:"w-full bg-blue-600 hover:bg-blue-700 font-dosis-medium",disabled:"Syncing..."===x,children:[(0,t.jsx)(e$.A,{className:"h-4 w-4 mr-2"}),"Syncing..."===x?"Đang đồng bộ...":"Đồng bộ ngay"]}),(0,t.jsxs)(C.$,{onClick:()=>s("Backup th\xe0nh c\xf4ng",["Đ\xe3 backup to\xe0n bộ email"],"success"),className:"w-full bg-green-600 hover:bg-green-700 font-dosis-medium",children:[(0,t.jsx)(em.A,{className:"h-4 w-4 mr-2"}),"Backup email"]}),(0,t.jsxs)(C.$,{onClick:()=>s("C\xe0i đặt đ\xe3 lưu",["Đ\xe3 bật tự động đồng bộ mỗi 30 gi\xe2y"],"success"),className:"w-full bg-purple-600 hover:bg-purple-700 font-dosis-medium",children:[(0,t.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"C\xe0i đặt auto-sync"]})]})]})]}),(0,t.jsxs)("div",{className:"border-t border-gray-600 pt-4",children:[(0,t.jsx)("h4",{className:"font-dosis-semibold mb-2",children:"Lịch sử đồng bộ:"}),(0,t.jsxs)("div",{className:"text-sm text-gray-400 space-y-1 font-dosis",children:[(0,t.jsxs)("p",{children:["• ",j," - Email sync completed"]}),(0,t.jsxs)("p",{children:["• ",new Date(Date.now()-18e5).toLocaleString("vi-VN")," - SMTP connection verified"]}),(0,t.jsxs)("p",{children:["• ",new Date(Date.now()-36e5).toLocaleString("vi-VN")," - Auto-sync enabled"]})]})]})]})]})})]})]})}var e1=a(135);function e5(e){let{notifications:s,onRemove:a}=e;return s&&0!==s.length?(0,t.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:s.map(e=>(0,t.jsx)("div",{className:"max-w-sm p-4 rounded-lg shadow-lg backdrop-blur-md border ".concat((e=>{switch(e){case"success":return"bg-green-600/90 border-green-500";case"info":return"bg-blue-600/90 border-blue-500";case"warning":return"bg-yellow-600/90 border-yellow-500";default:return"bg-red-600/90 border-red-500"}})(e.type)),children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-white",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-100",children:e.message})]}),(0,t.jsx)(C.$,{variant:"ghost",size:"sm",onClick:()=>a(e.id),className:"p-1 h-auto text-white hover:bg-white/20",children:(0,t.jsx)(N.A,{className:"h-4 w-4"})})]})},e.id))}):null}function e3(){return(0,r.useEffect)(()=>{let e=e=>{let{type:s}=e.detail,a=new(window.AudioContext||window.webkitAudioContext),t=a.createOscillator(),n=a.createGain();t.connect(n),n.connect(a.destination),t.frequency.value="success"===s?800:400,t.type="sine",n.gain.setValueAtTime(.3,a.currentTime),n.gain.exponentialRampToValueAtTime(.01,a.currentTime+.5),t.start(a.currentTime),t.stop(a.currentTime+.5)};return window.addEventListener("showGlobalNotification",e),()=>{window.removeEventListener("showGlobalNotification",e)}},[]),null}var e6=a(8145),e7=a(6891),e8=a(3904),e9=a(1482),se=a(7924);function ss(){let{user:e}=(0,n.A)(),[s,a]=(0,r.useState)([]),[l,i]=(0,r.useState)([]),[c,o]=(0,r.useState)("all"),[h,m]=(0,r.useState)("all-components"),[u,x]=(0,r.useState)(""),[g,p]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(j(),g){let e=setInterval(j,5e3);return()=>clearInterval(e)}},[g]),(0,r.useEffect)(()=>{b()},[s,c,h,u]);let j=async()=>{try{let e=await fetch("/api/logs"),s=await e.json();if(s.success)a(s.logs||[]);else{console.error("Failed to fetch logs:",s.error);let e=el.v.getLogs();a(e)}}catch(e){console.error("Error fetching logs:",e),a(el.v.getLogs())}},b=()=>{let e=[...s];"all"!==c&&(e=e.filter(e=>e.level===c)),h&&"all-components"!==h&&(e=e.filter(e=>{var s;return null==(s=e.component)?void 0:s.toLowerCase().includes(h.toLowerCase())})),u&&(e=e.filter(e=>{var s;return e.message.toLowerCase().includes(u.toLowerCase())||JSON.stringify(null!=(s=e.data)?s:{}).toLowerCase().includes(u.toLowerCase())})),i(e)};return e?"Label Manager"!==e.role?(0,t.jsx)("div",{className:"p-6 min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Kh\xf4ng c\xf3 quyền truy cập"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Chỉ Label Manager mới c\xf3 thể xem logs"})]})}):(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("h2",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,t.jsx)(d.A,{className:"mr-3 text-purple-400"}),"System Logs (",l.length,")"]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(C.$,{variant:"outline",onClick:()=>p(!g),className:g?"bg-green-600/20":"",children:[(0,t.jsx)(e8.A,{className:"h-4 w-4 mr-2"}),"Auto Refresh"]}),(0,t.jsxs)(C.$,{variant:"outline",onClick:()=>{let e=new Blob([el.v.exportLogs()],{type:"application/json"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="aks-studio-logs-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},children:[(0,t.jsx)(em.A,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,t.jsxs)(C.$,{variant:"destructive",onClick:()=>{el.v.clearLogs(),a([]),i([])},children:[(0,t.jsx)(en.A,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]}),(0,t.jsxs)(E.Zp,{className:"mb-6",children:[(0,t.jsx)(E.aR,{children:(0,t.jsxs)(E.ZB,{className:"flex items-center",children:[(0,t.jsx)(e9.A,{className:"mr-2"}),"Filters"]})}),(0,t.jsx)(E.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"Level"}),(0,t.jsxs)(_.l6,{value:c,onValueChange:e=>o(e),children:[(0,t.jsx)(_.bq,{children:(0,t.jsx)(_.yv,{})}),(0,t.jsxs)(_.gC,{children:[(0,t.jsx)(_.eb,{value:"all",children:"All Levels"}),(0,t.jsx)(_.eb,{value:"debug",children:"Debug"}),(0,t.jsx)(_.eb,{value:"info",children:"Info"}),(0,t.jsx)(_.eb,{value:"warn",children:"Warning"}),(0,t.jsx)(_.eb,{value:"error",children:"Error"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"Component"}),(0,t.jsxs)(_.l6,{value:h,onValueChange:m,children:[(0,t.jsx)(_.bq,{children:(0,t.jsx)(_.yv,{placeholder:"All Components"})}),(0,t.jsxs)(_.gC,{children:[(0,t.jsx)(_.eb,{value:"all-components",children:"All Components"}),s.map(e=>e.component).filter(Boolean).filter((e,s,a)=>a.indexOf(e)===s).filter(e=>e).map(e=>(0,t.jsx)(_.eb,{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"Search"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(se.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),(0,t.jsx)(B.p,{placeholder:"Search logs...",value:u,onChange:e=>x(e.target.value),className:"pl-8"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(J.J,{children:"Actions"}),(0,t.jsxs)(C.$,{variant:"outline",onClick:j,className:"w-full",children:[(0,t.jsx)(e8.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]})})]}),(0,t.jsx)(E.Zp,{children:(0,t.jsx)(E.Wu,{className:"p-0",children:(0,t.jsx)(e7.F,{className:"h-[600px]",children:0===l.length?(0,t.jsxs)("div",{className:"p-8 text-center text-gray-400",children:[(0,t.jsx)(d.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{children:"No logs found matching the current filters."})]}):(0,t.jsx)("div",{className:"space-y-2 p-4",children:l.map((e,s)=>(0,t.jsx)(E.Zp,{className:"bg-gray-50",children:(0,t.jsxs)(E.Wu,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(e6.E,{className:"".concat((e=>{switch(e){case"debug":default:return"bg-gray-500";case"info":return"bg-blue-500";case"warn":return"bg-yellow-500";case"error":return"bg-red-500"}})(e.level)," text-white"),children:e.level.toUpperCase()}),e.component&&(0,t.jsx)(e6.E,{variant:"outline",children:e.component}),e.action&&(0,t.jsx)(e6.E,{variant:"secondary",children:e.action})]}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.timestamp).toLocaleString()})]}),(0,t.jsx)("p",{className:"text-gray-700 mb-2",children:e.message}),e.userId&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["User: ",e.userId]}),e.data&&(0,t.jsxs)("details",{className:"mt-2",children:[(0,t.jsx)("summary",{className:"text-sm text-gray-500 cursor-pointer hover:text-gray-700",children:"Show Data"}),(0,t.jsx)(O.T,{value:JSON.stringify(e.data,null,2),readOnly:!0,className:"mt-2 font-mono text-xs",rows:6})]})]})},"".concat(e.id,"-").concat(s)))})})})})]}):(0,t.jsx)("div",{className:"p-6 min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Đang tải th\xf4ng tin"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Vui l\xf2ng chờ trong gi\xe2y l\xe1t..."})]})})}function sa(){let{user:e}=(0,n.A)(),[s,a]=(0,r.useState)("dashboard"),[l,i]=(0,r.useState)([]),[c,o]=(0,r.useState)([]),d=(0,r.useCallback)(async()=>{if(e){el.v.debug("MainAppView: Loading submissions",{userId:e.id,component:"MainAppView",action:"loadSubmissions"});try{var s,a;let t=await fetch("/api/submissions"),n=await t.json(),r=null!=(a=null!=(s=n.data)?s:n.submissions)?a:[];i(r),el.v.info("MainAppView: Submissions loaded successfully",{count:r.length,userId:e.id,component:"MainAppView"})}catch(s){el.v.error("MainAppView: Failed to load submissions",s,{userId:e.id,component:"MainAppView",action:"loadSubmissions"})}}},[e]);(0,r.useEffect)(()=>{el.v.info("MainAppView: Component mounted",{component:"MainAppView",action:"mount"}),e&&(el.v.info("MainAppView: User logged in",{userId:e.id,username:e.username,role:e.role,component:"MainAppView"}),d())},[e,d]);let h=async e=>{try{let s=await fetch("/api/submissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});(await s.json()).success&&(i(s=>[e,...s]),u("Th\xe0nh c\xf4ng","Đ\xe3 gửi submission th\xe0nh c\xf4ng!","success"))}catch(e){console.error("Failed to add submission:",e),u("Lỗi","Kh\xf4ng thể gửi submission","error")}},m=async(e,s)=>{try{let a=await fetch("/api/submissions/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})});(await a.json()).success&&(i(a=>a.map(a=>a.id===e?{...a,status:s}:a)),u("Cập nhật","Đ\xe3 cập nhật trạng th\xe1i","success"))}catch(e){console.error("Failed to update status:",e),u("Lỗi","Kh\xf4ng thể cập nhật trạng th\xe1i","error")}},u=function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success",t=Array.isArray(s)?s.join(", "):s,n={id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),title:e,message:t,type:a,timestamp:new Date};o(e=>[n,...e]),setTimeout(()=>{var e;return e=n.id,void o(s=>s.filter(s=>s.id!==e))},5e3)};return(0,t.jsx)(eM,{children:(0,t.jsxs)("div",{className:"flex min-h-screen bg-background relative main-container",children:[(0,t.jsx)(e1.DynamicBackground,{}),(0,t.jsx)(I,{currentView:s,onViewChange:a}),(0,t.jsx)("div",{className:"w-full min-h-screen",children:(0,t.jsx)("main",{className:"flex-1 relative pt-20 min-h-screen",children:(0,t.jsxs)("div",{className:"min-h-screen bg-background transition-colors duration-300 pb-8",children:["dashboard"===s&&(0,t.jsx)(F,{onViewChange:a}),"upload"===s&&(0,t.jsx)(ed,{onSubmissionAdded:h,showModal:u}),"submissions"===s&&(0,t.jsx)(ev,{submissions:l,viewType:"all",onUpdateStatus:m,showModal:u,onViewChange:a}),"profile"===s&&(0,t.jsx)(ek,{showModal:u}),"settings"===s&&(0,t.jsx)(eF,{}),"users"===s&&(null==e?void 0:e.role)==="Label Manager"&&(0,t.jsx)(e_,{}),"admin"===s&&(null==e?void 0:e.role)==="Label Manager"&&(0,t.jsx)(eZ,{showModal:u}),"email"===s&&(0,t.jsx)(e2,{showModal:u}),"logs"===s&&(null==e?void 0:e.role)==="Label Manager"&&(0,t.jsx)(ss,{})]})})}),(0,t.jsx)(e5,{notifications:c,onRemove:e=>{o(s=>s.filter(s=>s.id!==e))}}),(0,t.jsx)(e3,{})]})})}function st(){return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white p-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-6",children:"DMG - Fallback Mode"}),(0,t.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Debugging Mode Active"}),(0,t.jsx)("p",{className:"text-gray-300 mb-4",children:"This is a fallback view to diagnose rendering issues. If you see this page, it means the application is having trouble rendering the main view."}),(0,t.jsxs)("div",{className:"bg-gray-900 p-4 rounded-md mb-6",children:[(0,t.jsx)("h3",{className:"text-xl text-yellow-400 mb-2",children:"Troubleshooting Steps:"}),(0,t.jsxs)("ol",{className:"list-decimal pl-6 space-y-2 text-gray-300",children:[(0,t.jsx)("li",{children:"Check the browser console for JavaScript errors"}),(0,t.jsx)("li",{children:"Clear browser cache and cookies"}),(0,t.jsx)("li",{children:"Clear localStorage by clicking the button below"}),(0,t.jsx)("li",{children:"Verify that all required API endpoints are responding"})]})]}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)("button",{onClick:()=>{try{localStorage.clear(),alert("LocalStorage cleared successfully. The page will now reload."),window.location.href="/"}catch(e){alert("Error clearing localStorage: ".concat(e))}},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md",children:"Clear LocalStorage"}),(0,t.jsx)("button",{onClick:()=>{window.location.reload()},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md",children:"Reload Page"})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Debug Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gray-900 p-3 rounded-md",children:[(0,t.jsx)("h3",{className:"text-yellow-400 text-lg mb-2",children:"Browser Info"}),(0,t.jsx)("p",{className:"text-gray-300",children:navigator.userAgent})]}),(0,t.jsxs)("div",{className:"bg-gray-900 p-3 rounded-md",children:[(0,t.jsx)("h3",{className:"text-yellow-400 text-lg mb-2",children:"Screen Size"}),(0,t.jsxs)("p",{className:"text-gray-300",children:[window.innerWidth," x ",window.innerHeight]})]})]})]})]})})}function sn(){let[e,s]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{try{let e=localStorage.getItem("currentUser");if(console.log("\uD83D\uDD0D DEBUG - Stored user:",e),e)try{let s=JSON.parse(e);console.log("✅ DEBUG - User data parsed successfully:",s)}catch(e){console.error("❌ DEBUG - Error parsing stored user:",e),localStorage.removeItem("currentUser"),console.log("\uD83E\uDDF9 DEBUG - Cleared corrupted localStorage"),s(!0)}else console.log("ℹ️ DEBUG - No user data in localStorage")}catch(e){console.error("❌ DEBUG - Error accessing localStorage:",e),s(!0)}},[]),"fallback"===new URLSearchParams(window.location.search).get("mode")||e)?(0,t.jsx)(st,{}):(0,t.jsx)(sr,{fallback:(0,t.jsx)(st,{}),children:(0,t.jsx)(n.O,{children:(0,t.jsx)(sa,{})})})}class sr extends r.Component{static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,s){console.error("❌ ERROR BOUNDARY CAUGHT ERROR:",e,s)}render(){return this.state.hasError?this.props.fallback:this.props.children}constructor(e){super(e),this.state={hasError:!1}}}},7133:(e,s,a)=>{"use strict";a.d(s,{SQ:()=>m,_2:()=>u,lp:()=>x,mB:()=>g,rI:()=>d,ty:()=>h});var t=a(5155),n=a(2115),r=a(8698),l=a(3052),i=a(5196),c=a(9428),o=a(3999);let d=r.bL,h=r.l9;r.YJ,r.ZL,r.Pb,r.z6,n.forwardRef((e,s)=>{let{className:a,inset:n,children:i,...c}=e;return(0,t.jsxs)(r.ZP,{ref:s,className:(0,o.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",a),...c,children:[i,(0,t.jsx)(l.A,{className:"ml-auto"})]})}).displayName=r.ZP.displayName,n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(r.G5,{ref:s,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})}).displayName=r.G5.displayName;let m=n.forwardRef((e,s)=>{let{className:a,sideOffset:n=4,...l}=e;return(0,t.jsx)(r.ZL,{children:(0,t.jsx)(r.UC,{ref:s,sideOffset:n,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});m.displayName=r.UC.displayName;let u=n.forwardRef((e,s)=>{let{className:a,inset:n,...l}=e;return(0,t.jsx)(r.q7,{ref:s,className:(0,o.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",a),...l})});u.displayName=r.q7.displayName,n.forwardRef((e,s)=>{let{className:a,children:n,checked:l,...c}=e;return(0,t.jsxs)(r.H_,{ref:s,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:l,...c,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.VF,{children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})}),n]})}).displayName=r.H_.displayName,n.forwardRef((e,s)=>{let{className:a,children:n,...l}=e;return(0,t.jsxs)(r.hN,{ref:s,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.VF,{children:(0,t.jsx)(c.A,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=r.hN.displayName;let x=n.forwardRef((e,s)=>{let{className:a,inset:n,...l}=e;return(0,t.jsx)(r.JU,{ref:s,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",a),...l})});x.displayName=r.JU.displayName;let g=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(r.wv,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...n})});g.displayName=r.wv.displayName},9663:(e,s,a)=>{"use strict";a.d(s,{BK:()=>c,eu:()=>i,q5:()=>o});var t=a(5155),n=a(2115),r=a(4011),l=a(3999);let i=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(r.bL,{ref:s,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...n})});i.displayName=r.bL.displayName;let c=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(r._V,{ref:s,className:(0,l.cn)("aspect-square h-full w-full",a),...n})});c.displayName=r._V.displayName;let o=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(r.H4,{ref:s,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...n})});o.displayName=r.H4.displayName},9729:(e,s,a)=>{Promise.resolve().then(a.bind(a,5535))}},e=>{e.O(0,[4351,3322,7655,1031,6766,536,9434,6874,7082,1666,1405,8441,5964,7358],()=>e(e.s=9729)),_N_E=e.O()}]);