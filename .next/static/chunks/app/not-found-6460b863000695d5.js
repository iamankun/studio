(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4345],{135:(e,t,o)=>{"use strict";o.d(t,{DynamicBackground:()=>u});var n=o(5155),i=o(2115);let r={type:"video",videoUrl:"",videoList:[],randomVideo:!1,enableSound:!1,opacity:.5},l="backgroundSettings",a=e=>{let{enableSound:t,onSoundToggle:o}=e;return(0,n.jsx)("button",{style:{position:"fixed",bottom:20,right:20,zIndex:50,background:"rgba(0,0,0,0.5)",color:"white",border:"none",borderRadius:"50%",width:40,height:40,cursor:"pointer"},onClick:()=>o(!t),"aria-label":t?"Mute background":"Unmute background",children:t?"\uD83D\uDD0A":"\uD83D\uDD07"})};function u(){let[e,t]=(0,i.useState)(null),[o,u]=(0,i.useState)(!1),[c,s]=(0,i.useState)(0),[d,f]=(0,i.useState)(!1);(0,i.useEffect)(()=>{try{let e=localStorage.getItem(l);if(e){let o=JSON.parse(e);o&&"object"==typeof o?t({...r,...o}):(console.warn("Invalid background settings format, using defaults"),t(r))}else t(r)}catch(e){console.error("Failed to load or parse background settings:",e),t(r)}let e=e=>t(e.detail);return window.addEventListener("backgroundUpdate",e),()=>window.removeEventListener("backgroundUpdate",e)},[]);let p=(0,i.useMemo)(()=>{if(!e)return null;let t=null;if(e.randomVideo&&e.videoList&&e.videoList.length>0){var o;t=(o=e.videoList)[Math.floor(Math.random()*o.length)]}else e.videoUrl&&""!==e.videoUrl.trim()?t=function(e){let t=e.match(/(?:youtu\.be\/|youtube\.com\/(?:watch\?v=|embed\/|v\/))([\w-]{11})/);return t?t[1]:null}(e.videoUrl):e.videoList&&e.videoList.length>0&&(t=e.videoList[0]);return t||(t="dQw4w9WgXcQ"),t},[null==e?void 0:e.randomVideo,null==e?void 0:e.videoUrl,null==e?void 0:e.videoList]),m=()=>{u(!0),f(!1),setTimeout(()=>s(e=>e+1),300)};return((0,i.useEffect)(()=>{if(o)return;let e=["click","touchstart","keydown","mousedown","scroll"];return e.forEach(e=>{document.addEventListener(e,m,{once:!0,passive:!0})}),()=>{e.forEach(e=>{document.removeEventListener(e,m)})}},[o]),(0,i.useEffect)(()=>{if(!o&&p){let e=setTimeout(m,2e3);return()=>clearTimeout(e)}},[o,p]),e)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"fixed inset-0 z-0",children:["video"===e.type&&p?d?(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-red-900 to-purple-900 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-white text-center",children:[(0,n.jsx)("p",{className:"text-lg",children:"Video loading failed"}),(0,n.jsx)("p",{className:"text-sm opacity-75",children:"Retrying..."})]})}):(0,n.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(p,"?autoplay=1&mute=1&controls=0&loop=1&playlist=").concat(p,"&showinfo=0&rel=0&iv_load_policy=3&modestbranding=1&playsinline=1&enablejsapi=1&origin=").concat(window.location.origin),allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",className:"absolute inset-0 w-full h-full object-cover pointer-events-none select-none",style:{opacity:e.opacity},onLoad:e=>{let t=e.currentTarget;if(null==t?void 0:t.contentWindow)try{t.contentWindow.postMessage('{"event":"command","func":"mute","args":""}',"https://www.youtube.com")}catch(e){console.warn("Could not mute video:",e)}},onError:()=>{console.warn("YouTube iframe failed to load, trying `fallback..."),f(!0),setTimeout(()=>{s(e=>e+1),f(!1)},2e3)}},c):(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500 to-purple-600"}),(0,n.jsx)("div",{className:"absolute inset-0 bg-black ".concat((e=>{let t=Math.max(.1,Math.min(.9,1-e));return t<=.1?"opacity-10":t<=.2?"opacity-20":t<=.3?"opacity-30":t<=.4?"opacity-40":t<=.5?"opacity-50":t<=.6?"opacity-60":t<=.7?"opacity-70":t<=.8?"opacity-80":"opacity-90"})(e.opacity))})]}),"video"===e.type&&p&&(0,n.jsx)(a,{enableSound:e.enableSound,onSoundToggle:o=>{if(e){let n={...e,enableSound:o};t(n),localStorage.setItem(l,JSON.stringify(n));let i=document.querySelector('iframe[title="YouTube Background Video"]');if(null==i?void 0:i.contentWindow)try{i.contentWindow.postMessage('{"event":"command","func":"mute","args":""}',"https://www.youtube.com")}catch(e){console.warn("Could not update video sound:",e)}window.dispatchEvent(new CustomEvent("backgroundUpdate",{detail:n}))}}})]}):(0,n.jsx)("div",{className:"fixed inset-0 -z-10 bg-gradient-to-br from-indigo-500 to-purple-600"})}},4982:(e,t,o)=>{Promise.resolve().then(o.bind(o,135)),Promise.resolve().then(o.t.bind(o,6874,23))},6654:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return i}});let n=o(2115);function i(e,t){let o=(0,n.useRef)(null),i=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=o.current;e&&(o.current=null,e());let t=i.current;t&&(i.current=null,t())}else e&&(o.current=r(e,n)),t&&(i.current=r(t,n))},[e,t])}function r(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let o=e(t);return"function"==typeof o?o:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}},e=>{e.O(0,[6874,8441,5964,7358],()=>e(e.s=4982)),_N_E=e.O()}]);