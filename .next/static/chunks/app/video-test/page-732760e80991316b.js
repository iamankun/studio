(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2709],{135:(e,t,o)=>{"use strict";o.d(t,{DynamicBackground:()=>l});var n=o(5155),i=o(2115);let r={type:"video",videoUrl:"",videoList:[],randomVideo:!1,enableSound:!1,opacity:.5},a="backgroundSettings",s=e=>{let{enableSound:t,onSoundToggle:o}=e;return(0,n.jsx)("button",{style:{position:"fixed",bottom:20,right:20,zIndex:50,background:"rgba(0,0,0,0.5)",color:"white",border:"none",borderRadius:"50%",width:40,height:40,cursor:"pointer"},onClick:()=>o(!t),"aria-label":t?"Mute background":"Unmute background",children:t?"\uD83D\uDD0A":"\uD83D\uDD07"})};function l(){let[e,t]=(0,i.useState)(null),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(0),[u,m]=(0,i.useState)(!1);(0,i.useEffect)(()=>{try{let e=localStorage.getItem(a);if(e){let o=JSON.parse(e);o&&"object"==typeof o?t({...r,...o}):(console.warn("Invalid background settings format, using defaults"),t(r))}else t(r)}catch(e){console.error("Failed to load or parse background settings:",e),t(r)}let e=e=>t(e.detail);return window.addEventListener("backgroundUpdate",e),()=>window.removeEventListener("backgroundUpdate",e)},[]);let p=(0,i.useMemo)(()=>{if(!e)return null;let t=null;if(e.randomVideo&&e.videoList&&e.videoList.length>0){var o;t=(o=e.videoList)[Math.floor(Math.random()*o.length)]}else e.videoUrl&&""!==e.videoUrl.trim()?t=function(e){let t=e.match(/(?:youtu\.be\/|youtube\.com\/(?:watch\?v=|embed\/|v\/))([\w-]{11})/);return t?t[1]:null}(e.videoUrl):e.videoList&&e.videoList.length>0&&(t=e.videoList[0]);return t||(t="dQw4w9WgXcQ"),t},[null==e?void 0:e.randomVideo,null==e?void 0:e.videoUrl,null==e?void 0:e.videoList]),g=()=>{l(!0),m(!1),setTimeout(()=>d(e=>e+1),300)};return((0,i.useEffect)(()=>{if(o)return;let e=["click","touchstart","keydown","mousedown","scroll"];return e.forEach(e=>{document.addEventListener(e,g,{once:!0,passive:!0})}),()=>{e.forEach(e=>{document.removeEventListener(e,g)})}},[o]),(0,i.useEffect)(()=>{if(!o&&p){let e=setTimeout(g,2e3);return()=>clearTimeout(e)}},[o,p]),e)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"fixed inset-0 z-0",children:["video"===e.type&&p?u?(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-red-900 to-purple-900 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-white text-center",children:[(0,n.jsx)("p",{className:"text-lg",children:"Video loading failed"}),(0,n.jsx)("p",{className:"text-sm opacity-75",children:"Retrying..."})]})}):(0,n.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(p,"?autoplay=1&mute=1&controls=0&loop=1&playlist=").concat(p,"&showinfo=0&rel=0&iv_load_policy=3&modestbranding=1&playsinline=1&enablejsapi=1&origin=").concat(window.location.origin),allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",className:"absolute inset-0 w-full h-full object-cover pointer-events-none select-none",style:{opacity:e.opacity},onLoad:e=>{let t=e.currentTarget;if(null==t?void 0:t.contentWindow)try{t.contentWindow.postMessage('{"event":"command","func":"mute","args":""}',"https://www.youtube.com")}catch(e){console.warn("Could not mute video:",e)}},onError:()=>{console.warn("YouTube iframe failed to load, trying `fallback..."),m(!0),setTimeout(()=>{d(e=>e+1),m(!1)},2e3)}},c):(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500 to-purple-600"}),(0,n.jsx)("div",{className:"absolute inset-0 bg-black ".concat((e=>{let t=Math.max(.1,Math.min(.9,1-e));return t<=.1?"opacity-10":t<=.2?"opacity-20":t<=.3?"opacity-30":t<=.4?"opacity-40":t<=.5?"opacity-50":t<=.6?"opacity-60":t<=.7?"opacity-70":t<=.8?"opacity-80":"opacity-90"})(e.opacity))})]}),"video"===e.type&&p&&(0,n.jsx)(s,{enableSound:e.enableSound,onSoundToggle:o=>{if(e){let n={...e,enableSound:o};t(n),localStorage.setItem(a,JSON.stringify(n));let i=document.querySelector('iframe[title="YouTube Background Video"]');if(null==i?void 0:i.contentWindow)try{i.contentWindow.postMessage('{"event":"command","func":"mute","args":""}',"https://www.youtube.com")}catch(e){console.warn("Could not update video sound:",e)}window.dispatchEvent(new CustomEvent("backgroundUpdate",{detail:n}))}}})]}):(0,n.jsx)("div",{className:"fixed inset-0 -z-10 bg-gradient-to-br from-indigo-500 to-purple-600"})}},3797:(e,t,o)=>{Promise.resolve().then(o.bind(o,8876))},8876:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});var n=o(5155),i=o(135);function r(){return(0,n.jsxs)("div",{className:"min-h-screen relative flex items-center justify-center",children:[(0,n.jsx)(i.DynamicBackground,{}),(0,n.jsxs)("div",{className:"relative z-10 text-center text-white backdrop-blur-sm bg-black/30 p-8 rounded-lg",children:[(0,n.jsx)("h1",{className:"text-6xl font-bold mb-4 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Video Background Test"}),(0,n.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Test trang video background với \xe2m thanh"}),(0,n.jsxs)("div",{className:"space-y-4 text-lg",children:[(0,n.jsx)("p",{children:"✅ Video background sẽ auto play"}),(0,n.jsx)("p",{children:"\uD83D\uDD0A Click n\xfat \xe2m thanh ở g\xf3c phải dưới để bật/tắt sound"}),(0,n.jsx)("p",{children:"\uD83C\uDFA8 Click n\xfat t\xf9y chỉnh ở g\xf3c phải tr\xean để thay đổi video"}),(0,n.jsx)("p",{children:"\uD83D\uDCFA Sử dụng YouTube URLs để thay đổi video background"})]}),(0,n.jsxs)("div",{className:"mt-8 space-x-4",children:[(0,n.jsx)("a",{href:"/",className:"inline-flex items-center px-6 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors",children:"Về trang chủ"}),(0,n.jsx)("a",{href:"/404",className:"inline-flex items-center px-6 py-3 bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:"Test 404 Page"}),(0,n.jsx)("a",{href:"/test-error",className:"inline-flex items-center px-6 py-3 bg-orange-600 hover:bg-orange-700 rounded-lg transition-colors",children:"Test 505 Error"})]})]})]})}}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=3797)),_N_E=e.O()}]);