{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/lib/utils.ts"],"sourcesContent":["// Tôi là An Kun\nimport { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\nexport function generateISRC(user: any, counter: number): { isrc: string; newCounter: number } {\n  const prefix = \"VNA2P\"\n  const currentYear = new Date().getFullYear().toString().slice(-2)\n  const paddedCounter = counter.toString().padStart(5, \"0\")\n  return {\n    isrc: `${prefix}${currentYear}${paddedCounter}`,\n    newCounter: counter + 1\n  }\n}\n\nexport function validateAudioFile(file: File): { valid: boolean; errors: string[] } {\n  const errors: string[] = []\n\n  // Chỉ chấp nhận file WAV\n  if (file.type !== \"audio/wav\") {\n    errors.push(\"Chỉ chấp nhận file WAV 24-bit, 2 kênh, 192kHz\")\n  }\n\n  // Check file size (100MB max cho file WAV chất lượng cao)\n  if (file.size > 100 * 1024 * 1024) {\n    errors.push(\"File quá lớn (tối đa 100MB)\")\n  }\n\n  return { valid: errors.length === 0, errors }\n}\n\nexport function getMinimumReleaseDate(): string {\n  const today = new Date()\n  today.setDate(today.getDate() + 7) // Minimum 7 days from now\n  return today.toISOString().split('T')[0]\n}\n\nexport function getStatusColor(status: string): string {\n  switch (status.toLowerCase()) {\n    case \"pending\":\n    case \"đã nhận, đang chờ duyệt\":\n      return \"bg-yellow-500\"\n    case \"approved\":\n    case \"đã duyệt, đang chờ phát hành!\":\n      return \"bg-green-500\"\n    case \"rejected\":\n    case \"đã duyệt, từ chối phát hành\":\n      return \"bg-red-500\"\n    case \"processing\":\n    case \"đang xử lý\":\n      return \"bg-blue-500\"\n    case \"published\":\n    case \"đã phát hành, đang chờ ra mắt\":\n    case \"hoàn thành phát hành!\":\n      return \"bg-purple-500\"\n    case \"draft\":\n      return \"bg-gray-500\"\n    default:\n      return \"bg-gray-400\"\n  }\n}\n\n// Utility function to sanitize file names\nexport function sanitizeFileName(fileName: string): string {\n  return fileName.replace(/[^a-zA-Z0-9.-]/g, '_')\n}\n\n// Utility function to validate email addresses\nexport function isValidEmail(email: string): boolean {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n  return emailRegex.test(email)\n}\n\n// Utility function to validate image files\nexport async function validateImageFile(file: File): Promise<{ valid: boolean; errors: string[] }> {\n  const errors: string[] = [];\n\n  // Kiểm tra định dạng file - chỉ chấp nhận JPG\n  if (file.type !== \"image/jpeg\" && file.type !== \"image/jpg\") {\n    errors.push(\"Chỉ chấp nhận file ảnh JPG\");\n  }\n\n  // Check file size (10MB max)\n  if (file.size > 10 * 1024 * 1024) {\n    errors.push(\"File quá lớn (tối đa 10MB)\");\n  }\n\n  return new Promise((resolve) => {\n    const imageUrl = URL.createObjectURL(file);\n    const img = new Image();\n\n    const finalResolve = (result: { valid: boolean; errors: string[] }) => {\n      URL.revokeObjectURL(imageUrl);\n      resolve(result);\n    };\n\n    img.onload = () => {\n      if (img.width !== 4000 || img.height !== 4000) {\n        errors.push(\"Kích thước phải là 4000x4000px\");\n      }\n      finalResolve({ valid: errors.length === 0, errors });\n    };\n    img.onerror = () => {\n      errors.push(\"File ảnh không hợp lệ\");\n      finalResolve({ valid: false, errors });\n    };\n    img.src = imageUrl;\n  });\n}\n\n// Utility function to format file sizes\nexport function formatFileSize(bytes: number, decimalPoint?: number): string {\n  if (bytes === 0) return '0 Bytes'\n  const k = 1024\n  const dm = decimalPoint || 2\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i]\n}\n\n// Utility function to generate unique IDs\nexport function generateId(prefix: string = 'ID'): string {\n  return `${prefix}${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n}\n\n// Utility function to truncate text\nexport function truncateText(text: string, maxLength: number): string {\n  if (text.length <= maxLength) return text\n  return text.slice(0, maxLength) + '...'\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,0RACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,qMAAA,CAAA,aAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 217, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> { }\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAKA,MAAM,sBAAQ,qMAAA,CAAA,aAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,gWACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,qMAAA,CAAA,aAAgB,CAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 274, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex flex-col space-y-1.5 p-6\", className)} {...props} />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center p-6 pt-0\", className)} {...props} />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,qMAAA,CAAA,aAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,qMAAA,CAAA,aAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAAa,GAAG,KAAK;;;;;;AAErF,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,qMAAA,CAAA,aAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,qMAAA,CAAA,aAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,qMAAA,CAAA,aAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,qMAAA,CAAA,aAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAAa,GAAG,KAAK;;;;;;AAElF,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 353, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/lib/client-activity-log.ts"],"sourcesContent":["/**\n * Client-side utilities for logging user activities.\n * These functions send data to the `/api/activity-log` endpoint.\n */\n\ninterface LogActivityParams {\n    action: string;\n    description?: string;\n    entityType?: string;\n    entityId?: string | number;\n    status?: 'success' | 'error' | 'pending' | 'info' | 'failed';\n    result?: string;\n    details?: Record<string, unknown>;\n}\n\ninterface LogActivityResult {\n    success: boolean;\n    id?: string;\n    error?: string;\n}\n\n/**\n * Sends an activity log to the server.\n * This is the core client-side logging function.\n * @param params - The data to be logged.\n * @returns The result of the logging operation.\n */\nexport async function logActivity(params: LogActivityParams): Promise<LogActivityResult> {\n    try {\n        const response = await fetch('/api/activity-log', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                ...params,\n                // Automatically add some client-side context\n                details: {\n                    ...params.details,\n                    url: window.location.href,\n                    userAgent: navigator.userAgent,\n                },\n            }),\n        });\n\n        if (!response.ok) {\n            let errorMsg = `API Error: ${response.status} ${response.statusText}`;\n            // Read the body as text first to avoid reading the stream twice.\n            const responseText = await response.text();\n            try {\n                // Now, try to parse the text as JSON.\n                const errorData = JSON.parse(responseText);\n                errorMsg = errorData.error || errorMsg;\n            } catch {\n                // If JSON parsing fails, the response was not JSON.\n                // Use the raw text as the error message, if it's not empty.\n                errorMsg = responseText || errorMsg;\n            }\n            throw new Error(errorMsg);\n        }\n\n        return await response.json();\n    } catch (error) {\n        const errorMsg = error instanceof Error ? error.message : 'Unknown client-side error';\n        // Avoid logging loops. Only log to console here.\n        if (process.env.NODE_ENV !== 'production') {\n            console.error(\"Activity log failed:\", errorMsg);\n        }\n        return { success: false, error: errorMsg };\n    }\n}\n\nexport function logLogin(\n    method: 'password' | 'sso' | 'token',\n    status: 'success' | 'failed' | 'error',\n    details: { username: string; [key: string]: unknown }\n): Promise<LogActivityResult> {\n    return logActivity({\n        action: 'login_attempt',\n        entityType: 'auth',\n        status,\n        description: `User '${details.username}' login attempt via ${method} was ${status}.`,\n        details,\n    });\n}\n\nexport function logRegistration(\n    method: 'email' | 'sso',\n    status: 'success' | 'failed' | 'error',\n    details: { username: string; [key: string]: unknown }\n): Promise<LogActivityResult> {\n    return logActivity({\n        action: 'registration_attempt',\n        entityType: 'auth',\n        status,\n        description: `User '${details.username}' registration attempt via ${method} was ${status}.`,\n        details,\n    });\n}\n\nexport function logUIInteraction(\n    elementType: 'button' | 'link' | 'form' | 'tab',\n    elementId: string,\n    details?: Record<string, unknown>\n): Promise<LogActivityResult> {\n    return logActivity({\n        action: 'ui_interaction',\n        entityType: 'ui_element',\n        entityId: elementId,\n        description: `User interacted with ${elementType} '${elementId}'.`,\n        details,\n    });\n}\n\nexport function logSubmissionActivity(\n    submissionId: string,\n    activity: 'create' | 'update' | 'delete' | 'view',\n    status: 'success' | 'failed' | 'error',\n    details?: Record<string, unknown>\n): Promise<LogActivityResult> {\n    return logActivity({\n        action: `${activity}_submission`,\n        entityType: 'submission',\n        entityId: submissionId,\n        status,\n        description: `Submission '${submissionId}' activity: ${activity} ${status}.`,\n        details,\n    });\n}"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;AAwBM,eAAe,YAAY,MAAyB;IACvD,IAAI;QACA,MAAM,WAAW,MAAM,MAAM,qBAAqB;YAC9C,QAAQ;YACR,SAAS;gBACL,gBAAgB;YACpB;YACA,MAAM,KAAK,SAAS,CAAC;gBACjB,GAAG,MAAM;gBACT,6CAA6C;gBAC7C,SAAS;oBACL,GAAG,OAAO,OAAO;oBACjB,KAAK,OAAO,QAAQ,CAAC,IAAI;oBACzB,WAAW,UAAU,SAAS;gBAClC;YACJ;QACJ;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,IAAI,WAAW,CAAC,WAAW,EAAE,SAAS,MAAM,CAAC,CAAC,EAAE,SAAS,UAAU,EAAE;YACrE,iEAAiE;YACjE,MAAM,eAAe,MAAM,SAAS,IAAI;YACxC,IAAI;gBACA,sCAAsC;gBACtC,MAAM,YAAY,KAAK,KAAK,CAAC;gBAC7B,WAAW,UAAU,KAAK,IAAI;YAClC,EAAE,OAAM;gBACJ,oDAAoD;gBACpD,4DAA4D;gBAC5D,WAAW,gBAAgB;YAC/B;YACA,MAAM,IAAI,MAAM;QACpB;QAEA,OAAO,MAAM,SAAS,IAAI;IAC9B,EAAE,OAAO,OAAO;QACZ,MAAM,WAAW,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAC1D,iDAAiD;QACjD,wCAA2C;YACvC,QAAQ,KAAK,CAAC,wBAAwB;QAC1C;QACA,OAAO;YAAE,SAAS;YAAO,OAAO;QAAS;IAC7C;AACJ;AAEO,SAAS,SACZ,MAAoC,EACpC,MAAsC,EACtC,OAAqD;IAErD,OAAO,YAAY;QACf,QAAQ;QACR,YAAY;QACZ;QACA,aAAa,CAAC,MAAM,EAAE,QAAQ,QAAQ,CAAC,oBAAoB,EAAE,OAAO,KAAK,EAAE,OAAO,CAAC,CAAC;QACpF;IACJ;AACJ;AAEO,SAAS,gBACZ,MAAuB,EACvB,MAAsC,EACtC,OAAqD;IAErD,OAAO,YAAY;QACf,QAAQ;QACR,YAAY;QACZ;QACA,aAAa,CAAC,MAAM,EAAE,QAAQ,QAAQ,CAAC,2BAA2B,EAAE,OAAO,KAAK,EAAE,OAAO,CAAC,CAAC;QAC3F;IACJ;AACJ;AAEO,SAAS,iBACZ,WAA+C,EAC/C,SAAiB,EACjB,OAAiC;IAEjC,OAAO,YAAY;QACf,QAAQ;QACR,YAAY;QACZ,UAAU;QACV,aAAa,CAAC,qBAAqB,EAAE,YAAY,EAAE,EAAE,UAAU,EAAE,CAAC;QAClE;IACJ;AACJ;AAEO,SAAS,sBACZ,YAAoB,EACpB,QAAiD,EACjD,MAAsC,EACtC,OAAiC;IAEjC,OAAO,YAAY;QACf,QAAQ,GAAG,SAAS,WAAW,CAAC;QAChC,YAAY;QACZ,UAAU;QACV;QACA,aAAa,CAAC,YAAY,EAAE,aAAa,YAAY,EAAE,SAAS,CAAC,EAAE,OAAO,CAAC,CAAC;QAC5E;IACJ;AACJ","debugId":null}},
    {"offset": {"line": 449, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/auth/login-view.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useEffect, useMemo, useCallback } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\"\nimport { Loader2, User, Lock } from \"lucide-react\"\nimport Image from \"next/image\"\nimport { logLogin, logUIInteraction } from \"@/lib/client-activity-log\"\n\nimport \"@/components/awesome/css/all.min.css\"\n\ninterface LoginViewProps {\n  onLogin: (username: string, password: string) => Promise<{ success: boolean; message?: string }>\n  onSwitchToRegister: () => void\n  onSwitchToForgot: () => void\n}\n\nexport function LoginView({ onLogin, onSwitchToRegister, onSwitchToForgot }: Readonly<LoginViewProps>) {\n  const [username, setUsername] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(\"\")\n  const [currentGreeting, setCurrentGreeting] = useState(\"Xin chào\")\n  const [greetingIndex, setGreetingIndex] = useState(0)\n  const [userRole, setUserRole] = useState(\"\")\n  const [usernameError, setUsernameError] = useState(\"\")\n  const [passwordError, setPasswordError] = useState(\"\")\n  const [appSettings] = useState({\n    appName: userRole ?? \"An Kun Studio\",\n    logoUrl: \"/face.png\",\n    logoAlt: \"Face AK\"\n  })\n\n  // Greetings in different languages - wrapped in useMemo\n  const greetings = useMemo(() => [\n    \"Xin chào\", \"こんにちは\", \"Hola\", \"Bonjour\", \"Hello\", \"Hajimemashite\",\n    \"Guten Tag\", \"Ciao\", \"Namaste\", \"Zdravstvuyte\", \"안녕하세요\", \"你好\", \"مرحبا\", \"Salam\"\n  ], [])\n\n  // User recognition based on ID pattern\n  const recognizeUser = useCallback((username: string) => {\n    if (username.length >= 3) {\n      const pattern = username.substring(0, 3).toLowerCase()\n      if (pattern === \"ank\" || pattern === \"kun\") return \"An Kun\"\n      if (pattern === \"adm\") return \"Người quản lý\";\n      if (pattern === \"ngh\" || pattern === \"art\") return \"Nghệ sĩ\";\n      return \"Nghệ sĩ mới\"\n    }\n    return \"\"\n  }, [])\n\n  // Handle form submission\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    // Validate all fields first and check the result directly\n    const isUsernameValid = validateUsername(username)\n    const isPasswordValid = validatePassword(password)\n\n    if (!isUsernameValid || !isPasswordValid) {\n      setError(\"Vui lòng sửa các lỗi được hiển thị.\")\n      return\n    }\n\n    setLoading(true)\n    setError(\"\")\n\n    try {\n      // Log login attempt\n      logUIInteraction('form', 'login-form', {\n        username: username,\n        attempt: 'started'\n      });\n\n      const result = await onLogin(username, password)\n      console.log(\"[Copilot Debug] API login result:\", result)\n\n      // Log login result\n      if (!result.success) {\n        setError(result.message ?? \"Đăng nhập thất bại\")\n\n        // Log failed login\n        logLogin('password', 'failed', {\n          username: username,\n          error: result.message || 'Unknown error'\n        });\n      } else {\n        // Log successful login\n        logLogin('password', 'success', {\n          username: username,\n          role: userRole || 'user'\n        });\n      }\n    } catch (err) {\n      console.error(\"[Copilot Debug] Login error:\", err)\n      setError(\"Đã xảy ra lỗi không mong muốn\")\n\n      // Log error during login\n      logLogin('password', 'error', {\n        username: username,\n        error: err instanceof Error ? err.message : 'Unknown error'\n      });\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  // Update greeting periodically\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setGreetingIndex((prev) => (prev + 1) % greetings.length)\n    }, 3000)\n    return () => clearInterval(interval)\n  }, [greetings.length])\n\n  // Update greeting with fade effect\n  useEffect(() => {\n    const greetingEl = document.querySelector('.greeting-text')\n    if (greetingEl) {\n      greetingEl.classList.add('opacity-0')\n      setTimeout(() => {\n        setCurrentGreeting(greetings[greetingIndex])\n        greetingEl.classList.remove('opacity-0')\n      }, 200)\n    } else {\n      setCurrentGreeting(greetings[greetingIndex])\n    }\n  }, [greetingIndex, greetings])\n\n  // Update user role when username changes\n  useEffect(() => {\n    const role = recognizeUser(username)\n    setUserRole(role)\n  }, [username, recognizeUser])\n\n  const validateUsername = (value: string): boolean => {\n    if (value.length < 3) {\n      setUsernameError(\"Username must be at least 3 characters\")\n      return false\n    } else if (value.length > 20) {\n      setUsernameError(\"Username must be less than 20 characters\")\n      return false\n    } else {\n      setUsernameError(\"\")\n      return true\n    }\n  }\n\n  const validatePassword = (value: string): boolean => {\n    if (value.length < 6) {\n      setPasswordError(\"Password must be at least 6 characters\")\n      return false\n    } else {\n      setPasswordError(\"\")\n      return true\n    }\n  }\n\n  const inputTransitionClasses = \"transition-all duration-300 bg-transparent border-gray-600 hover:border-gray-400 focus:border-primary focus:ring-primary/20\"\n  const buttonTransitionClasses = \"transition-all duration-500 bg-gradient-to-r from-primary via-purple-600 to-primary hover:scale-[1.02] hover:shadow-xl hover:shadow-primary/20 active:scale-[0.98]\"\n  const linkTransitionClasses = \"transition-colors duration-300 text-gray-400 hover:text-primary hover:underline underline-offset-4\"\n\n  return (\n    <div className=\"flex min-h-[100dvh] flex-col items-center justify-center p-4 pt-24 relative overflow-hidden\">\n\n      <Card className=\"w-full max-w-md relative z-40 border border-white/10 shadow-2xl\n        bg-background/5 backdrop-blur-2xl hover:bg-background/10 transition-all duration-500\n        before:absolute before:inset-0 before:bg-gradient-to-b before:from-white/5 before:to-white/0 before:rounded-xl\">\n        <CardHeader className=\"text-center relative z-10\">\n          <div className=\"relative w-20 h-20 mx-auto mb-2\">\n            <div className=\"absolute inset-0 bg-gradient-to-br from-primary/20 to-purple-600/20 rounded-full blur-lg\"></div>\n            <Image\n              src={appSettings.logoUrl}\n              alt={appSettings.logoAlt}\n              fill\n              className=\"object-cover rounded-full p-1 bg-background/10 backdrop-blur-xl border border-white/20 hover:border-white/40 transition-all duration-300 hover:scale-105\"\n              priority\n            />\n          </div>\n          <p className=\"text-muted-foreground text-sm animate-fade-in\">\n            {userRole || \"Welcome back to AKs Studio\"}\n          </p>\n          <h2 className=\"text-2xl font-bold bg-clip-text text-transparent \n            bg-gradient-to-r from-indigo-500 to-pink-500 select-none\">\n            {currentGreeting}\n          </h2>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2 group/username\">\n              <Label htmlFor=\"username\" className=\"text-sm font-medium inline-block transition-transform duration-300 group-focus-within/username:translate-x-2\">\n                Username\n              </Label>\n              <div className=\"relative\">\n                <Input\n                  id=\"username\"\n                  type=\"text\"\n                  value={username}\n                  onChange={(e) => {\n                    setUsername(e.target.value);\n                    validateUsername(e.target.value);\n                  }}\n                  className={`pl-10 bg-background/30 border-white/10 focus:border-primary/50\n                    placeholder:text-muted-foreground/50 ${inputTransitionClasses}\n                    focus:bg-background/40 focus:ring-2 focus:ring-offset-0\n                    ${usernameError ? 'border-destructive/50 focus:border-destructive' : ''}`}\n                  placeholder=\"Enter your username\"\n                  aria-invalid={!!usernameError}\n                  aria-describedby={usernameError ? \"username-error\" : undefined}\n                  disabled={loading}\n                />\n                <User className=\"absolute left-3 top-2.5 h-5 w-5 text-muted-foreground/50 transition-transform duration-300 group-focus-within/username:scale-110 group-focus-within/username:text-primary/70\" />\n                {/* <div className=\"absolute inset-0 rounded-md bg-gradient-to-r from-primary/0 via-primary/10 to-primary/0 opacity-0 group-hover/username:opacity-100 group-focus-within/username:opacity-100 transition-opacity duration-500 pointer-events-none\"></div> */}\n              </div>\n              {usernameError && (\n                <div id=\"username-error\" className=\"text-xs text-destructive mt-1 ml-1 animate-fade-in flex items-center gap-1\">\n                  <i className=\"fas fa-exclamation-circle\"></i>\n                  {usernameError}\n                </div>\n              )}\n            </div>\n\n            <div className=\"space-y-2 group/password\">\n              <Label htmlFor=\"password\" className=\"text-sm font-medium inline-block transition-transform duration-300 group-focus-within/password:translate-x-2\">\n                Password\n              </Label>\n              <div className=\"relative\">\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => {\n                    setPassword(e.target.value);\n                    validatePassword(e.target.value);\n                  }}\n                  className={`pl-10 bg-background/30 border-white/10 focus:border-primary/50\n                    placeholder:text-muted-foreground/50 ${inputTransitionClasses}\n                    focus:bg-background/40 focus:ring-2 focus:ring-offset-0\n                    ${passwordError ? 'border-destructive/50 focus:border-destructive' : ''}`}\n                  placeholder=\"Enter your password\"\n                  aria-invalid={!!passwordError}\n                  aria-describedby={passwordError ? \"password-error\" : undefined}\n                  autoComplete=\"current-password\"\n                  disabled={loading}\n                />\n                <Lock className=\"absolute left-3 top-2.5 h-5 w-5 text-muted-foreground/50 transition-transform duration-300 group-focus-within/password:scale-110 group-focus-within/password:text-primary/70\" />\n                {/* <div className=\"absolute inset-0 rounded-md bg-gradient-to-r from-primary/0 via-primary/10 to-primary/0 opacity-0 group-hover/password:opacity-100 group-focus-within/password:opacity-100 transition-opacity duration-500 pointer-events-none\"></div> */}\n              </div>\n              {passwordError && (\n                <div id=\"password-error\" className=\"text-xs text-destructive mt-1 ml-1 animate-fade-in flex items-center gap-1\">\n                  <i className=\"fas fa-exclamation-circle\"></i>\n                  {passwordError}\n                </div>\n              )}\n            </div>\n\n            {error && (\n              <div className=\"p-3 rounded-lg bg-destructive/10 border border-destructive/20 text-destructive text-sm animate-fade-in flex items-center gap-2\">\n                <i className=\"fas fa-exclamation-triangle\"></i>\n                <span className=\"flex-1\">{error}</span>\n                <button\n                  type=\"button\"\n                  onClick={() => setError(\"\")}\n                  className=\"text-destructive/70 hover:text-destructive transition-colors\"\n                  aria-label=\"Dismiss error\"\n                >\n                  <i className=\"fas fa-times\"></i>\n                </button>\n              </div>\n            )}\n\n            <Button\n              type=\"submit\"\n              className={`w-full relative overflow-hidden group login-button ${buttonTransitionClasses}`}\n              disabled={loading}\n              variant=\"default\"\n            >\n              {loading ? (\n                <Loader2 className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                  <>\n                    <span className=\"relative z-10\">Login</span>\n                    {/* <span className=\"absolute inset-0 bg-gradient-to-r from-primary/0 via-primary/20 to-primary/0\n                    translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000\" /> */}\n                  </>\n              )}\n            </Button>\n\n            <div className=\"flex flex-col space-y-2 text-center text-sm\">\n              <button\n                type=\"button\"\n                onClick={() => {\n                  logUIInteraction('button', 'forgot-password', {\n                    source: 'login-view'\n                  });\n                  onSwitchToForgot();\n                }}\n                className={linkTransitionClasses}\n              >\n                Forgot password?\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  logUIInteraction('button', 'switch-to-register', {\n                    source: 'login-view'\n                  });\n                  onSwitchToRegister();\n                }}\n                className={linkTransitionClasses}\n              >\n                Don&apos;t have an account? Register\n              </button>\n            </div>\n          </form>\n        </CardContent>\n      </Card >\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 963, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/auth/register-view.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useCallback } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\"\nimport { Loader2, User, Mail, Lock, Shield } from \"lucide-react\"\nimport Image from \"next/image\"\nimport { logUIInteraction, logRegistration } from \"@/lib/client-activity-log\"\n\nimport \"@/components/awesome/css/all.min.css\"\n\ninterface RegisterViewProps {\n    onRegister: (username: string, email: string, password: string) => Promise<{ success: boolean; message?: string }>\n    onSwitchToLogin: () => void\n}\n\nexport function RegisterView({ onRegister, onSwitchToLogin }: Readonly<RegisterViewProps>) {\n    const [username, setUsername] = useState(\"\")\n    const [email, setEmail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n    const [confirmPassword, setConfirmPassword] = useState(\"\")\n    const [loading, setLoading] = useState(false)\n    const [error, setError] = useState(\"\")\n    const [successMessage, setSuccessMessage] = useState(\"\")\n    const [agreed, setAgreed] = useState(false)\n    const [validationErrors, setValidationErrors] = useState({\n        username: \"\",\n        email: \"\",\n        password: \"\",\n        confirmPassword: \"\"\n    })\n\n    const validateForm = useCallback(() => {\n        const errors = {\n            username: \"\",\n            email: \"\",\n            password: \"\",\n            confirmPassword: \"\"\n        }\n        let isValid = true\n\n        if (username.length < 3) {\n            errors.username = \"Username phải có ít nhất 3 ký tự\"\n            isValid = false\n        }\n\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n        if (!emailRegex.test(email)) {\n            errors.email = \"Email không hợp lệ\"\n            isValid = false\n        }\n\n        if (password.length < 6) {\n            errors.password = \"Password phải có ít nhất 6 ký tự\"\n            isValid = false\n        }\n\n        if (password !== confirmPassword) {\n            errors.confirmPassword = \"Mật khẩu không khớp\"\n            isValid = false\n        }\n\n        setValidationErrors(errors)\n        return isValid\n    }, [username, email, password, confirmPassword])\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault()\n        setError(\"\")\n        setSuccessMessage(\"\")\n\n        if (!validateForm()) {\n            return\n        }\n\n        if (!agreed) {\n            setError(\"Bạn phải đồng ý với điều khoản sử dụng\")\n            return\n        }\n\n        setLoading(true)\n\n        // Log the registration attempt\n        logUIInteraction('form', 'register-form', {\n            username: username,\n            email_domain: email.split('@')[1]\n        });\n\n        try {\n            const result = await onRegister(username, email, password)\n            console.log(\"[Copilot Debug] API register result:\", result)\n            if (result.success) {\n                // Log successful registration\n                logRegistration('email', 'success', {\n                    username: username,\n                    email_domain: email.split('@')[1]\n                });\n\n                setSuccessMessage(\"Đăng ký thành công! Bạn có thể đăng nhập ngay bây giờ.\")\n                // Reset form\n                setUsername(\"\")\n                setEmail(\"\")\n                setPassword(\"\")\n                setConfirmPassword(\"\")\n                setAgreed(false)\n            } else {\n                // Log failed registration\n                logRegistration('email', 'failed', {\n                    username: username,\n                    email_domain: email.split('@')[1],\n                    error: result.message\n                });\n\n                setError(result.message || \"Đăng ký thất bại, vui lòng thử lại\")\n            }\n        } catch (error) {\n            console.error(\"[Copilot Debug] Register error:\", error)\n\n            // Log error during registration\n            logRegistration('email', 'error', {\n                username: username,\n                email_domain: email.split('@')[1],\n                error: error instanceof Error ? error.message : String(error)\n            });\n\n            setError(\"Đã xảy ra lỗi khi đăng ký. Vui lòng thử lại sau.\")\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    return (\n        <div className=\"flex min-h-[100dvh] flex-col items-center justify-center p-4 relative overflow-hidden\">\n\n            <Card className=\"w-full max-w-md relative z-10 border-0 shadow-2xl \n                bg-background/60 backdrop-blur-xl hover:bg-background/70 transition-all duration-300\n                before:absolute before:inset-0 before:bg-gradient-to-b before:from-white/10 before:to-white/5 before:rounded-xl\">\n                <CardHeader className=\"text-center space-y-2\">\n                    <div className=\"relative w-20 h-20 mx-auto mb-2\">\n                        <Image\n                            src=\"/face.png\"\n                            alt=\"Logo\"\n                            fill\n                            className=\"object-cover rounded-full p-1 bg-background/40 backdrop-blur-sm\"\n                            priority\n                        />\n                    </div>\n                    <h2 className=\"text-2xl font-bold bg-clip-text text-transparent \n                        bg-gradient-to-r from-indigo-500 to-pink-500\">\n                        Tạo tài khoản mới\n                    </h2>\n                    <p className=\"text-muted-foreground text-sm\">\n                        Tham gia cộng đồng AKs Studio\n                    </p>\n                </CardHeader>\n\n                <CardContent>\n                    <form onSubmit={handleSubmit} className=\"space-y-4\">\n                        <div className=\"space-y-2\">\n                            <Label htmlFor=\"username\" className=\"text-sm font-medium\">Username</Label>\n                            <div className=\"relative\">\n                                <Input\n                                    id=\"username\"\n                                    type=\"text\"\n                                    value={username}\n                                    onChange={(e) => setUsername(e.target.value)}\n                                    className=\"pl-10 bg-background/40 border-muted-foreground/20 focus:border-primary/50\"\n                                    placeholder=\"Choose a username\"\n                                    disabled={loading}\n                                />\n                                <User className=\"absolute left-3 top-2.5 h-5 w-5 text-muted-foreground/70\" />\n                            </div>\n                            {validationErrors.username && (\n                                <p className=\"text-destructive text-sm mt-1\">{validationErrors.username}</p>\n                            )}\n                        </div>\n\n                        <div className=\"space-y-2\">\n                            <Label htmlFor=\"email\" className=\"text-sm font-medium\">Email</Label>\n                            <div className=\"relative\">\n                                <Input\n                                    id=\"email\"\n                                    type=\"email\"\n                                    value={email}\n                                    onChange={(e) => setEmail(e.target.value)}\n                                    className=\"pl-10 bg-background/40 border-muted-foreground/20 focus:border-primary/50\"\n                                    placeholder=\"Enter your email\"\n                                    disabled={loading}\n                                />\n                                <Mail className=\"absolute left-3 top-2.5 h-5 w-5 text-muted-foreground/70\" />\n                            </div>\n                            {validationErrors.email && (\n                                <p className=\"text-destructive text-sm mt-1\">{validationErrors.email}</p>\n                            )}\n                        </div>\n\n                        <div className=\"space-y-2\">\n                            <Label htmlFor=\"password\" className=\"text-sm font-medium\">Password</Label>\n                            <div className=\"relative\">\n                                <Input\n                                    id=\"password\"\n                                    type=\"password\"\n                                    value={password}\n                                    onChange={(e) => setPassword(e.target.value)}\n                                    className=\"pl-10 bg-background/40 border-muted-foreground/20 focus:border-primary/50\"\n                                    placeholder=\"Choose a password\"\n                                    disabled={loading}\n                                />\n                                <Lock className=\"absolute left-3 top-2.5 h-5 w-5 text-muted-foreground/70\" />\n                            </div>\n                            {validationErrors.password && (\n                                <p className=\"text-destructive text-sm mt-1\">{validationErrors.password}</p>\n                            )}\n                        </div>\n\n                        <div className=\"space-y-2\">\n                            <Label htmlFor=\"confirmPassword\" className=\"text-sm font-medium\">Confirm Password</Label>\n                            <div className=\"relative\">\n                                <Input\n                                    id=\"confirmPassword\"\n                                    type=\"password\"\n                                    value={confirmPassword}\n                                    onChange={(e) => setConfirmPassword(e.target.value)}\n                                    className=\"pl-10 bg-background/40 border-muted-foreground/20 focus:border-primary/50\"\n                                    placeholder=\"Confirm your password\"\n                                    disabled={loading}\n                                />\n                                <Shield className=\"absolute left-3 top-2.5 h-5 w-5 text-muted-foreground/70\" />\n                            </div>\n                            {validationErrors.confirmPassword && (\n                                <p className=\"text-destructive text-sm mt-1\">{validationErrors.confirmPassword}</p>\n                            )}\n                        </div>\n\n                        <label className=\"flex items-center space-x-2 cursor-pointer\">\n                            <input\n                                type=\"checkbox\"\n                                checked={agreed}\n                                onChange={(e) => setAgreed(e.target.checked)}\n                                className=\"rounded border-muted-foreground/20\"\n                            />\n                            <span className=\"text-sm text-muted-foreground\">\n                                Tôi đồng ý với các điều khoản sử dụng\n                            </span>\n                        </label>\n\n                        {error && (\n                            <div className=\"p-3 rounded-lg bg-destructive/10 border border-destructive/20 text-destructive text-sm\">\n                                {error}\n                            </div>\n                        )}\n\n                        {successMessage && (\n                            <div className=\"p-3 rounded-lg bg-green-500/10 border border-green-500/20 text-green-500 text-sm\">\n                                {successMessage}\n                            </div>\n                        )}\n\n                        <Button\n                            type=\"submit\"\n                            className=\"w-full relative overflow-hidden group\"\n                            disabled={loading}\n                        >\n                            {loading ? (\n                                <Loader2 className=\"h-5 w-5 animate-spin\" />\n                            ) : (\n                                <>\n                                    <span className=\"relative z-10\">Register</span>\n                                    <span className=\"absolute inset-0 bg-gradient-to-r from-primary/0 via-primary/20 to-primary/0 \n                                        translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000\" />\n                                </>\n                            )}\n                        </Button>\n\n                        <button\n                            type=\"button\"\n                            onClick={() => {\n                                logUIInteraction('button', 'switch-to-login', {\n                                    from: 'register'\n                                });\n                                onSwitchToLogin();\n                            }}\n                            className=\"w-full text-sm text-muted-foreground hover:text-primary transition-colors\"\n                        >\n                            Already have an account? Login\n                        </button>\n                    </form>\n                </CardContent>\n            </Card>\n        </div>\n    )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1485, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/background-system.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useEffect, useState } from \"react\"\n\nconst DEFAULT_VIDEOS = [\n  \"dQw4w9WgXcQ\", // Rick Astley - Never Gonna Give You Up\n  \"kJQP7kiw5Fk\", // Despacito\n  \"fJ9rUzIMcZQ\", // Bohemian Rhapsody\n  \"9bZkp7q19f0\", // Gangnam Style\n  \"hTWKbfoikeg\", // Smells Like Teen Spirit\n  \"YQHsXMglC9A\", // Hello - Adele\n  \"CevxZvSJLk8\", // Katy Perry - Roar\n  \"JGwWNGJdvx8\", // Shape of You\n  \"RgKAFK5djSk\", // Wiz Khalifa - See You Again\n  \"OPf0YbXqDm0\", // Mark Ronson - Uptown Funk\n]\n\nexport function BackgroundSystem() {\n  const [backgroundSettings, setBackgroundSettings] = useState({\n    type: \"gradient\",\n    gradient: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\n    videoUrl: \"\",\n    imageUrl: \"\", // Thêm thuộc tính imageUrl\n    opacity: 0.3,\n    randomVideo: true,\n    videoList: DEFAULT_VIDEOS,\n  })\n\n  const [currentVideo, setCurrentVideo] = useState(\"\")\n  const [showCustomPanel, setShowCustomPanel] = useState(false)\n  const [youtubeUrl, setYoutubeUrl] = useState(\"\")\n  const [imageLink, setImageLink] = useState(\"\")\n  const [videoFile, setVideoFile] = useState<File | null>(null)\n  const [textStyleDialogOpen, setTextStyleDialogOpen] = useState(false)\n  const [currentTextInput, setCurrentTextInput] = useState<\"title\" | \"subtitle\" | null>(null)\n  const [titleStyle, setTitleStyle] = useState<{\n    gradient: string\n    animation: string\n    font: string\n  }>({ gradient: \"\", animation: \"\", font: \"\" })\n  const [subtitleStyle, setSubtitleStyle] = useState<{\n    gradient: string\n    animation: string\n    font: string\n  }>({ gradient: \"\", animation: \"\", font: \"\" })\n\n  useEffect(() => {\n    // Load background settings\n    const saved = localStorage.getItem(\"backgroundSettings_v2\")\n    if (saved) {\n      const settings = JSON.parse(saved)\n      setBackgroundSettings(settings)\n    }\n\n    // Listen for background updates\n    const handleBackgroundUpdate = (event: CustomEvent) => {\n      setBackgroundSettings(event.detail)\n    }\n\n    window.addEventListener(\"backgroundUpdate\", handleBackgroundUpdate as EventListener)\n    return () => {\n      window.removeEventListener(\"backgroundUpdate\", handleBackgroundUpdate as EventListener)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (backgroundSettings.type === \"video\" && backgroundSettings.randomVideo) {\n      const randomIndex = Math.floor(Math.random() * backgroundSettings.videoList.length)\n      setCurrentVideo(backgroundSettings.videoList[randomIndex])\n    } else if (backgroundSettings.type === \"video\" && backgroundSettings.videoUrl) {\n      const videoId = extractYoutubeId(backgroundSettings.videoUrl)\n      setCurrentVideo(videoId || \"\")\n    }\n  }, [backgroundSettings])\n\n  const extractYoutubeId = (url: string) => {\n    const regExp = /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#&?]*).*/\n    const match = url.match(regExp)\n    return match && match[7].length === 11 ? match[7] : null\n  }\n\n  const handleYoutubeUrlChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const url = e.target.value\n    setYoutubeUrl(url)\n\n    // Extract YouTube video ID and create thumbnail URL\n    const videoId = extractYoutubeId(url)\n    if (videoId) {\n      const thumbnailUrl = `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`\n      // Dispatch custom event to update background\n      window.dispatchEvent(\n        new CustomEvent(\"backgroundUpdate\", {\n          detail: {\n            ...backgroundSettings,\n            type: \"image\",\n            imageUrl: thumbnailUrl,\n          },\n        }),\n      )\n    }\n  }\n\n  const handleImageLinkChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const url = e.target.value\n    setImageLink(url)\n\n    // Dispatch custom event to update background\n    window.dispatchEvent(\n      new CustomEvent(\"backgroundUpdate\", {\n        detail: {\n          ...backgroundSettings,\n          type: \"image\",\n          imageUrl: url,\n        },\n      }),\n    )\n  }\n\n  const handleVideoChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (!file) {\n      setVideoFile(null)\n      return\n    }\n\n    if (file.size > 100 * 1024 * 1024) {\n      alert(\"File video không được vượt quá 100MB\")\n      e.target.value = \"\"\n      setVideoFile(null)\n      return\n    }\n\n    setVideoFile(file)\n\n    // Create object URL for video preview\n    const videoUrl = URL.createObjectURL(file)\n\n    // Dispatch custom event to update background\n    window.dispatchEvent(\n      new CustomEvent(\"backgroundUpdate\", {\n        detail:\n        {\n          ...backgroundSettings,\n          type: \"video\",\n          videoUrl: videoUrl,\n        },\n      }),\n    )\n\n    alert(\"Video đã được tải lên và sẽ được xử lý sau\")\n  }\n\n  const openStyleDialog = (inputType: \"title\" | \"subtitle\") => {\n    setCurrentTextInput(inputType)\n    setTextStyleDialogOpen(true)\n  }\n\n  const applyTextStyle = (style: { gradient: string; animation: string; font: string }) => {\n    if (currentTextInput === \"title\") {\n      setTitleStyle(style)\n      // Apply to title elements\n      const titleElements = document.querySelectorAll(\".custom-title\")\n      titleElements.forEach((el) => {\n        el.className = `custom-title ${style.gradient} ${style.animation} ${style.font}`\n      })\n    } else if (currentTextInput === \"subtitle\") {\n      setSubtitleStyle(style)\n      // Apply to subtitle elements\n      const subtitleElements = document.querySelectorAll(\".custom-subtitle\")\n      subtitleElements.forEach((el) => {\n        el.className = `custom-subtitle ${style.gradient} ${style.animation} ${style.font}`\n      })\n    }\n    setTextStyleDialogOpen(false)\n    setCurrentTextInput(null)\n  }\n\n  const TextStyleDialog = () => {\n    if (!textStyleDialogOpen) return null\n\n    const gradientOptions = [\n      { name: \"Purple\", class: \"bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent\" },\n      { name: \"Blue\", class: \"bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent\" },\n      { name: \"Green\", class: \"bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent\" },\n      { name: \"Gold\", class: \"bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent\" },\n    ]\n\n    const animationOptions = [\n      { name: \"None\", class: \"\" },\n      { name: \"Pulse\", class: \"animate-pulse\" },\n      { name: \"Bounce\", class: \"animate-bounce\" },\n      { name: \"Ping\", class: \"animate-ping\" },\n    ]\n\n    const fontOptions = [\n      { name: \"Normal\", class: \"font-dosis\" },\n      { name: \"Light\", class: \"font-dosis-light\" },\n      { name: \"Medium\", class: \"font-dosis-medium\" },\n      { name: \"Bold\", class: \"font-dosis-bold\" },\n      { name: \"Extra Bold\", class: \"font-dosis-extrabold\" },\n    ]\n\n    return (\n      <div className=\"fixed inset-0 bg-black/30 z-50 flex items-center justify-center p-4\">\n        <div className=\"bg-gray-800 border border-gray-700 rounded-lg max-w-md w-full p-6\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <h3 className=\"text-lg font-semibold text-white\">\n              Tùy chỉnh {currentTextInput === \"title\" ? \"Tiêu đề\" : \"Phụ đề\"}\n            </h3>\n            <button onClick={() => setTextStyleDialogOpen(false)} className=\"text-gray-400 hover:text-white\">\n              ✕\n            </button>\n          </div>\n\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"text-sm font-medium text-gray-300 block mb-2\">Gradient màu:</label>\n              <div className=\"grid grid-cols-2 gap-2\">\n                {gradientOptions.map((option) => (\n                  <button\n                    key={option.name}\n                    onClick={() =>\n                      applyTextStyle({\n                        gradient: option.class,\n                        animation: currentTextInput === \"title\" ? titleStyle.animation : subtitleStyle.animation,\n                        font: currentTextInput === \"title\" ? titleStyle.font : subtitleStyle.font,\n                      })\n                    }\n                    className=\"p-2 border border-gray-600 rounded text-xs hover:bg-gray-700\"\n                  >\n                    <span className={option.class}>{option.name}</span>\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium text-gray-300 block mb-2\">Animation:</label>\n              <div className=\"grid grid-cols-2 gap-2\">\n                {animationOptions.map((option) => (\n                  <button\n                    key={option.name}\n                    onClick={() =>\n                      applyTextStyle({\n                        gradient: currentTextInput === \"title\" ? titleStyle.gradient : subtitleStyle.gradient,\n                        animation: option.class,\n                        font: currentTextInput === \"title\" ? titleStyle.font : subtitleStyle.font,\n                      })\n                    }\n                    className=\"p-2 border border-gray-600 rounded text-xs hover:bg-gray-700 text-gray-200\"\n                  >\n                    {option.name}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium text-gray-300 block mb-2\">Font weight:</label>\n              <div className=\"grid grid-cols-2 gap-2\">\n                {fontOptions.map((option) => (\n                  <button\n                    key={option.name}\n                    onClick={() =>\n                      applyTextStyle({\n                        gradient: currentTextInput === \"title\" ? titleStyle.gradient : subtitleStyle.gradient,\n                        animation: currentTextInput === \"title\" ? titleStyle.animation : subtitleStyle.animation,\n                        font: option.class,\n                      })\n                    }\n                    className=\"p-2 border border-gray-600 rounded text-xs hover:bg-gray-700 text-gray-200\"\n                  >\n                    <span className={option.class}>{option.name}</span>\n                  </button>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"fixed inset-0 -z-10\">\n      {backgroundSettings.type === \"video\" && currentVideo && (\n        <iframe\n          src={`https://www.youtube.com/embed/${currentVideo}?autoplay=1&mute=1&controls=0&loop=1&playlist=${currentVideo}&showinfo=0&rel=0&iv_load_policy=3&modestbranding=1&playsinline=1&enablejsapi=1&origin=${window.location.origin}`}\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n          className=\"absolute inset-0 w-full h-full object-cover pointer-events-none select-none\"\n          style={{ opacity: backgroundSettings.opacity }}\n        />\n      )}\n      {backgroundSettings.type === \"gradient\" && (\n        <div\n          className=\"absolute inset-0 transition-opacity duration-1000\"\n          style={{\n            background: backgroundSettings.gradient,\n            opacity: backgroundSettings.opacity,\n          }}\n        />\n      )}\n      {backgroundSettings.type === \"image\" && backgroundSettings.imageUrl && (\n        <div\n          className=\"absolute inset-0 bg-center bg-cover transition-opacity duration-1000\"\n          style={{\n            backgroundImage: `url(${backgroundSettings.imageUrl})`,\n            opacity: backgroundSettings.opacity,\n          }}\n        />\n      )}\n\n      {/* Gradient overlay */}\n      <div className=\"absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-black/40\" />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1933, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/lib/constants.ts"],"sourcesContent":["// Định nghĩa kiểu dữ liệu cho cài đặt background\nexport interface BackgroundSettings {\n    type: \"gradient\" | \"video\";\n    gradient: string;\n    videoUrl: string;\n    opacity: number;\n    randomVideo: boolean;\n    videoList: string[];\n    enableSound: boolean;\n}\n\n// Key lưu trữ trong localStorage\nexport const BACKGROUND_SETTINGS_KEY = \"backgroundSettings_v2\";\n\n// Danh sách video mặc định\nexport const DEFAULT_VIDEO_LIST = [\n    \"dQw4w9WgXcQ\", \"kJQP7kiw5Fk\", \"fJ9rUzIMcZQ\", \"9bZkp7q19f0\",\n    \"hTWKbfoikeg\", \"YQHsXMglC9A\", \"CevxZvSJLk8\", \"JGwWNGJdvx8\",\n    \"RgKAFK5djSk\", \"OPf0YbXqDm0\",\n];\n\n// Cài đặt background mặc định\nexport const DEFAULT_BACKGROUND_SETTINGS: BackgroundSettings = {\n    type: \"gradient\",\n    gradient: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", // Gradient mặc định từ settings-view\n    videoUrl: \"\",\n    opacity: 0.3,\n    randomVideo: true,\n    videoList: DEFAULT_VIDEO_LIST,\n    enableSound: false, // Mặc định tắt âm thanh để tránh annoying\n};\n"],"names":[],"mappings":"AAAA,iDAAiD;;;;;;AAY1C,MAAM,0BAA0B;AAGhC,MAAM,qBAAqB;IAC9B;IAAe;IAAe;IAAe;IAC7C;IAAe;IAAe;IAAe;IAC7C;IAAe;CAClB;AAGM,MAAM,8BAAkD;IAC3D,MAAM;IACN,UAAU;IACV,UAAU;IACV,SAAS;IACT,aAAa;IACb,WAAW;IACX,aAAa;AACjB","debugId":null}},
    {"offset": {"line": 1965, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/background-settings-panel.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useEffect, useState } from \"react\"\nimport { motion } from \"framer-motion\"\nimport { Save } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport {\n    type BackgroundSettings,\n    BACKGROUND_SETTINGS_KEY,\n    DEFAULT_BACKGROUND_SETTINGS,\n} from \"@/lib/constants\"\n\nconst DEFAULT_VIDEOS = [\n    \"dQw4w9WgXcQ\", // Rick Astley - Never Gonna Give You Up\n    \"kJQP7kiw5Fk\", // Despacito\n    \"fJ9rUzIMcZQ\", // Bohemian Rhapsody\n    \"9bZkp7q19f0\", // Gangnam Style\n    \"hTWKbfoikeg\", // Smells Like Teen Spirit\n    \"YQHsXMglC9A\", // Hello - Adele\n    \"CevxZvSJLk8\", // Katy Perry - Roar\n    \"JGwWNGJdvx8\", // Shape of You\n    \"RgKAFK5djSk\", // Wiz Khalifa - See You Again\n    \"OPf0YbXqDm0\", // Mark Ronson - Uptown Funk\n]\n\ninterface BackgroundSettingsPanelProps {\n    onClose?: () => void;\n}\n\nexport function BackgroundSettingsPanel({ onClose }: Readonly<BackgroundSettingsPanelProps>) {\n    const [backgroundSettings, setBackgroundSettings] = useState<BackgroundSettings>(DEFAULT_BACKGROUND_SETTINGS)\n    const [showCustomPanel, setShowCustomPanel] = useState(false)\n    const [youtubeUrl, setYoutubeUrl] = useState(\"\")\n    const [overlayOpacity, setOverlayOpacity] = useState(\"0.5\")\n\n    useEffect(() => {\n        // Load background settings\n        const saved = localStorage.getItem(BACKGROUND_SETTINGS_KEY)\n        if (saved) {\n            const settings = JSON.parse(saved)\n            // Ensure all required properties have default values\n            const mergedSettings = {\n                ...DEFAULT_BACKGROUND_SETTINGS,\n                ...settings\n            }\n            setBackgroundSettings(mergedSettings)\n            setYoutubeUrl(mergedSettings.videoUrl ?? \"\")\n            setOverlayOpacity(mergedSettings.opacity?.toString() ?? \"0.5\")\n        }\n    }, [])\n\n    const saveSettings = () => {\n        try {\n            const newSettings = {\n                ...backgroundSettings,\n                opacity: parseFloat(overlayOpacity),\n                videoUrl: youtubeUrl || backgroundSettings.videoUrl,\n            }\n            localStorage.setItem(BACKGROUND_SETTINGS_KEY, JSON.stringify(newSettings))\n            setBackgroundSettings(newSettings)\n            // Gửi sự kiện với tên và dữ liệu chính xác\n            window.dispatchEvent(new CustomEvent(\"backgroundUpdate\", { detail: newSettings }))\n        } catch (error) {\n            console.error(\"Failed to save background settings:\", error)\n        }\n    }\n\n    // Update video settings when URL changes\n    const handleVideoUrlChange = (url: string) => {\n        const regex = /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([^&\\n?#]+)/\n        const match = regex.exec(url)\n        const videoId = match ? match[1] : url\n\n        if (videoId) {\n            setYoutubeUrl(videoId)\n            setBackgroundSettings(prev => ({\n                ...prev,\n                type: \"video\" as const,\n                videoUrl: videoId,\n                randomVideo: false\n            }))\n        }\n    }\n\n    // Update background settings when opacity changes\n    const handleOpacityChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const newOpacity = e.target.value\n        setOverlayOpacity(newOpacity)\n        setBackgroundSettings(prev => ({\n            ...prev,\n            opacity: parseFloat(newOpacity)\n        }))\n    }\n\n    // Update video random mode and video list\n    const updateVideoSettings = (randomVideo: boolean) => {\n        setBackgroundSettings(prev => ({\n            ...prev,\n            randomVideo,\n            videoList: randomVideo ? DEFAULT_VIDEOS : []\n        }))\n    }\n\n    // Update sound settings\n    const updateSoundSettings = (enableSound: boolean) => {\n        setBackgroundSettings(prev => ({\n            ...prev,\n            enableSound\n        }))\n    }\n\n    // Hàm xóa video khỏi danh sách\n    const removeVideo = (idToRemove: string) => {\n        setBackgroundSettings(prev => ({\n            ...prev,\n            videoList: prev.videoList.filter(id => id !== idToRemove)\n        }))\n    }\n\n    return (\n        <div className=\"fixed top-16 right-4 z-50\">\n            <div className=\"bg-gray-900/95 backdrop-blur-md border border-gray-700 rounded-lg p-6 w-80 max-h-[80vh] overflow-y-auto\">\n                <div className=\"flex items-center justify-between mb-4\">\n                    <h3 className=\"text-lg font-semibold text-white\">Tùy chỉnh nền</h3>\n                    <button\n                        className=\"text-gray-400 hover:text-white transition-colors\"\n                        onClick={() => setShowCustomPanel(!showCustomPanel)}\n                    >\n                        {showCustomPanel ? \"Đơn giản\" : \"Nâng cao\"}\n                    </button>\n                </div>\n\n                <div className=\"space-y-4\">\n                    <div className=\"space-y-2\">\n                        <label htmlFor=\"opacity\" className=\"block text-sm font-medium text-gray-200\">\n                            Độ mờ nền\n                            <span className=\"text-xs text-gray-400 ml-2\">&nbsp;({Math.round(Number(overlayOpacity) * 100)}%)</span>\n                        </label>\n                        <input\n                            id=\"opacity\"\n                            type=\"range\"\n                            min=\"0\"\n                            max=\"1\"\n                            step=\"0.1\"\n                            value={overlayOpacity}\n                            onChange={handleOpacityChange}\n                            className=\"w-full\"\n                        />\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label htmlFor=\"backgroundType\" className=\"block text-sm font-medium text-gray-200\">\n                            Loại nền\n                        </label>\n                        <select\n                            id=\"backgroundType\"\n                            value={backgroundSettings.type}\n                            onChange={(e) => {\n                                const newType = e.target.value as \"gradient\" | \"video\"\n                                setBackgroundSettings(prev => ({ ...prev, type: newType }))\n                            }}\n                            className=\"w-full p-2 bg-gray-800 border border-gray-600 rounded text-gray-200 text-sm\"\n                        >\n                            <option value=\"gradient\">Nền gradient</option>\n                            <option value=\"video\">Video nền</option>\n                        </select>\n                    </div>\n\n                    {backgroundSettings.type === \"video\" && (\n                        <div className=\"space-y-4 bg-black/30 backdrop-blur-xl rounded-2xl border border-white/10 shadow-2xl p-6\">\n                            <div className=\"space-y-2\">\n                                <div className=\"flex items-center space-x-2\">\n                                    <input\n                                        id=\"randomVideo\"\n                                        type=\"checkbox\"\n                                        checked={backgroundSettings.randomVideo}\n                                        onChange={(e) => updateVideoSettings(e.target.checked)}\n                                        className=\"rounded border-gray-600\"\n                                    />\n                                    <label htmlFor=\"randomVideo\" className=\"text-sm text-gray-300\">\n                                        Video ngẫu nhiên\n                                    </label>\n                                </div>\n                                <div className=\"flex items-center space-x-2\">\n                                    <input\n                                        id=\"enableSound\"\n                                        type=\"checkbox\"\n                                        checked={backgroundSettings.enableSound}\n                                        onChange={(e) => updateSoundSettings(e.target.checked)}\n                                        className=\"rounded border-gray-600\"\n                                    />\n                                    <label htmlFor=\"enableSound\" className=\"text-sm text-gray-300\">\n                                        Bật âm thanh\n                                    </label>\n                                </div>\n                            </div>\n\n                            {showCustomPanel && (\n                                <>\n                                    <div className=\"space-y-2\">\n                                        <label htmlFor=\"youtubeUrl\" className=\"block text-sm font-medium text-gray-200\">\n                                            YouTube Video ID hoặc URL\n                                        </label>\n                                        <input\n                                            id=\"youtubeUrl\"\n                                            type=\"text\"\n                                            value={youtubeUrl}\n                                            onChange={(e) => setYoutubeUrl(e.target.value)}\n                                            placeholder=\"Ví dụ: dQw4w9WgXcQ\"\n                                            className=\"w-full p-2 bg-gray-800 border border-gray-600 rounded text-gray-200 text-sm\"\n                                        />\n                                        <Button\n                                            onClick={() => handleVideoUrlChange(youtubeUrl)}\n                                            className=\"w-full mt-2\"\n                                            size=\"sm\"\n                                        >\n                                            Áp dụng video\n                                        </Button>\n                                    </div>\n\n                                    <div className=\"space-y-2\">\n                                        <label htmlFor=\"videoList\" className=\"block text-sm font-medium text-gray-200\">\n                                            Danh sách video ngẫu nhiên\n                                        </label>\n                                        <div className=\"max-h-32 overflow-y-auto space-y-1\">\n                                            {backgroundSettings.videoList.map((id, index) => (\n                                                <div key={id} className=\"flex items-center gap-2 text-sm\">\n                                                    <span className=\"text-gray-400\">{index + 1}.</span>\n                                                    <code className=\"text-xs bg-gray-800 px-1.5 py-0.5 rounded flex-1\">\n                                                        {id}\n                                                    </code>\n                                                    <button\n                                                        onClick={() => removeVideo(id)}\n                                                        className=\"text-red-400 hover:text-red-300 p-1\"\n                                                        title=\"Xóa video này\"\n                                                    >\n                                                        ×\n                                                    </button>\n                                                </div>\n                                            ))}\n                                        </div>\n                                    </div>\n                                </>\n                            )}\n                        </div>\n                    )}\n\n                    <div className=\"pt-4\">\n                        <Button\n                            onClick={saveSettings}\n                            className=\"w-full bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600\"\n                        >\n                            <Save className=\"w-4 h-4 mr-2\" />\n                            Lưu cài đặt\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2436, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/auth-flow-client.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { LoginView } from \"@/components/auth/login-view\"\nimport { RegisterView } from \"@/components/auth/register-view\"\nimport { BackgroundSystem } from \"@/components/background-system\"\nimport { BackgroundSettingsPanel } from \"@/components/background-settings-panel\"\nimport { Settings } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport Image from \"next/image\"\nimport type { User } from \"@/types/user\"\n\ninterface AuthContentProps {\n  children: React.ReactNode\n  showLogin: boolean\n  showSettings: boolean\n  setShowSettings: (show: boolean) => void\n}\n\nconst AuthContent = ({ children, showLogin, showSettings, setShowSettings }: AuthContentProps) => (\n  <div className=\"relative min-h-screen w-full flex flex-col items-center overflow-hidden\">\n    <BackgroundSystem />\n\n    {/* Header bar with glass effect */}\n    <div className=\"w-full h-16 flex items-center justify-between px-6 backdrop-blur-2xl bg-black/10 border-b border-white/10 z-50\n      sticky top-0 transition-all duration-300 hover:bg-black/20\">\n      <div className=\"flex items-center gap-3\">\n        <div className=\"w-8 h-8 rounded-full overflow-hidden border border-white/20 shadow-lg hover:border-white/40 transition-all duration-300 \n          hover:shadow-primary/20 group relative\">\n          <div className=\"absolute inset-0 bg-gradient-to-r from-primary/20 to-purple-600/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500\"></div>\n          <Image src=\"/face.png\" alt=\"Logo\" width={32} height={32}\n            className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110\" priority />\n        </div>\n        <span className=\"font-semibold text-foreground/90 bg-gradient-to-r from-white to-white/80 bg-clip-text hover:text-transparent transition-all duration-300\">\n          An Kun Studio\n        </span>\n      </div>\n\n      <Button\n        variant=\"ghost\"\n        size=\"sm\"\n        className=\"text-foreground/70 hover:text-foreground transition-all duration-300 gap-2 group\n          bg-white/5 hover:bg-white/10 hover:shadow-lg hover:shadow-primary/10\"\n        onClick={() => setShowSettings(!showSettings)}\n      >\n        <span className=\"text-sm relative\">\n          Background\n          <span className=\"absolute inset-0 bg-gradient-to-r from-primary/0 via-primary/30 to-primary/0 \n            opacity-0 group-hover:opacity-100 transition-opacity duration-500\"></span>\n        </span>\n        <Settings className=\"h-4 w-4 group-hover:rotate-90 group-hover:text-primary transition-all duration-300\" />\n      </Button>\n    </div>\n\n    {/* Settings panel */}\n    <AnimatePresence>\n      {showSettings && (\n        <motion.div\n          initial={{ opacity: 0, height: 0, y: -10 }}\n          animate={{ opacity: 1, height: \"auto\", y: 0 }}\n          exit={{ opacity: 0, height: 0, y: -10 }}\n          transition={{\n            type: \"spring\",\n            stiffness: 300,\n            damping: 30,\n            mass: 0.8\n          }}\n          className=\"absolute top-16 right-0 z-50 w-full max-w-sm overflow-hidden origin-top\"\n        >\n          <div className=\"p-4\">\n            <BackgroundSettingsPanel onClose={() => setShowSettings(false)} />\n          </div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n\n    {/* Main content with glass card effect */}\n    <div className=\"flex-1 flex items-center justify-center w-full px-4 py-8\">\n      <div className=\"relative w-full max-w-md\">\n        <div className=\"absolute -top-24 left-1/2 transform -translate-x-1/2 w-20 h-20\">\n          <div className=\"w-full h-full rounded-full backdrop-blur-sm border border-white/20\n                       shadow-[0_8px_32px_rgba(0,0,0,0.2)] transition-all duration-300\">\n            <Image src=\"/public/media.webp\" alt=\"An Kun Studio Logo Media\" width={100} height={100} className=\"w-full h-full object-cover rounded-full\" priority />\n          </div>\n        </div>\n\n        {/* Auth container */}\n        <motion.div\n          className=\"w-full backdrop-blur-md rounded-2xl shadow-[0_8px_32px_rgba(0,0,0,0.2)]\n                     p-8 border border-white/20\"\n          layout\n          initial={{ scale: 0.95, opacity: 0 }}\n          animate={{ scale: 1, opacity: 1 }}\n          transition={{ duration: 0.3 }}\n        >\n          <AnimatePresence mode=\"wait\">\n            <motion.div\n              key={showLogin ? \"login\" : \"register\"}\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              transition={{ duration: 0.2 }}\n            >\n              {children}\n            </motion.div>\n          </AnimatePresence>\n        </motion.div>\n      </div>\n    </div>\n  </div>\n)\n\ninterface AuthFlowClientProps {\n  onLoginSuccess: (userData: User) => void\n  onLoginCancel: () => void\n  onRegisterSuccess: (userData: User) => void\n  onRegisterCancel: () => void\n  showLogin: boolean\n  showRegister: boolean\n  onSwitchToRegister: () => void\n  onSwitchToLogin: () => void\n}\n\nexport function AuthFlowClient({\n  onLoginSuccess,\n  onLoginCancel,\n  onRegisterSuccess,\n  showLogin,\n  showRegister,\n  onSwitchToRegister,\n  onSwitchToLogin\n}: Readonly<AuthFlowClientProps>) {\n  const [showSettings, setShowSettings] = useState(false)\n\n  const handleLogin = async (username: string, password: string) => {\n    try {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username, password })\n      })\n\n      const data = await response.json()\n\n      if (response.ok && data.success && data.data) {\n        onLoginSuccess(data.data)\n        return { success: true }\n      }\n\n      return { success: false, message: data.message ?? \"Đăng nhập thất bại\" }\n    } catch (error) {\n      console.error('Login error:', error)\n      return { success: false, message: \"Đã xảy ra lỗi không mong muốn\" }\n    }\n  }\n\n  const handleRegister = async (username: string, email: string, password: string) => {\n    try {\n      const response = await fetch('/api/auth/register', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username, email, password })\n      })\n\n      const data = await response.json()\n\n      if (response.ok && data.success && data.data) {\n        onRegisterSuccess(data.data)\n        return { success: true }\n      }\n\n      return { success: false, message: data.message ?? \"Đăng ký thất bại\" }\n    } catch (error) {\n      console.error('Register error:', error)\n      return { success: false, message: \"Đã xảy ra lỗi không mong muốn\" }\n    }\n  }\n\n  if (showLogin) {\n    return (\n      <AuthContent\n        showLogin={showLogin}\n        showSettings={showSettings}\n        setShowSettings={setShowSettings}\n      >\n        <LoginView\n          onLogin={handleLogin}\n          onSwitchToRegister={onSwitchToRegister}\n          onSwitchToForgot={onLoginCancel}\n        />\n      </AuthContent>\n    )\n  }\n\n  if (showRegister) {\n    return (\n      <AuthContent\n        showLogin={showLogin}\n        showSettings={showSettings}\n        setShowSettings={setShowSettings}\n      >\n        <RegisterView\n          onRegister={handleRegister}\n          onSwitchToLogin={onSwitchToLogin}\n        />\n      </AuthContent>\n    )\n  }\n\n  return null\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2813, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/auth-provider.tsx"],"sourcesContent":["// Tôi là An Kun\n// Hỗ trợ dự án, Copilot, Gemini\n// Tác giả kiêm xuất bản bởi An Kun Studio Digital Music\n\n\"use client\"\n\nimport React, { createContext, useContext, useState, useEffect, useMemo, useCallback } from \"react\"\nimport type { User } from \"@/types/user\"\nimport { AuthFlowClient } from \"@/components/auth-flow-client\"\n\ninterface AuthContextType {\n  user: User | null\n  login: (username: string, password: string) => Promise<boolean>\n  logout: () => void\n  loading: boolean\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\ninterface AuthProviderProps {\n  readonly children: React.ReactNode\n}\n\nexport function AuthProvider({ children }: AuthProviderProps) {\n  const [user, setUser] = useState<User | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [showLogin, setShowLogin] = useState(false)\n  const [showRegister, setShowRegister] = useState(false)\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        setLoading(true)\n\n        // Check if user is stored in localStorage\n        const storedUser = localStorage.getItem('currentUser')\n\n        if (storedUser) {\n          try {\n            const userData = JSON.parse(storedUser)\n            setUser(userData)\n          } catch (error) {\n            console.error('❌ AuthProvider: Error parsing stored user:', error)\n            localStorage.removeItem('currentUser')\n            setShowLogin(true)\n          }\n        } else {\n          // Nếu không có user, hiển thị login view\n          setShowLogin(true)\n        }\n      } catch (error) {\n        console.error('❌ AuthProvider: Error checking auth:', error)\n        setShowLogin(true)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    checkAuth()\n  }, [])\n\n  const login = useCallback(async (username: string, password: string) => {\n    try {\n      setLoading(true)\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username, password }),\n      })\n\n      const data = await response.json()\n      console.log('DEBUG [AuthProvider]: API Response Data:', data);\n\n      if (response.ok && data.data) {\n        setUser(data.data)\n        localStorage.setItem('currentUser', JSON.stringify(data.user))\n        setShowLogin(false)\n        return true\n      }\n\n      return false\n    } catch (error) {\n      console.error('❌ AuthProvider: Login error:', error)\n      return false\n    } finally {\n      setLoading(false)\n    }\n  }, [])\n\n  const logout = useCallback(() => {\n    setUser(null)\n    localStorage.removeItem('currentUser')\n    setShowLogin(true)\n  }, [])\n\n  // Cung cấp context cho toàn bộ ứng dụng\n  const value = useMemo(() => ({\n    user,\n    login,\n    logout,\n    loading,\n  }), [user, login, logout, loading])\n\n  if (loading) {\n    return (\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-gray-900/95 to-black/95 backdrop-blur-sm\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-white/30 border-t-white rounded-full animate-spin mx-auto mb-4\"></div>\n          <div className=\"text-white text-xl font-medium\">Đang xác thực...</div>\n          <div className=\"text-white/70 text-sm mt-2\">AKs Studio Digital Music</div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <AuthContext.Provider value={value}>\n      {!user && (showLogin || showRegister) ? (\n        <AuthFlowClient\n          onLoginSuccess={(userData) => {\n            setUser(userData)\n            setShowLogin(false)\n            setShowRegister(false)\n          }}\n          onLoginCancel={() => setShowLogin(false)}\n          onRegisterSuccess={(userData) => {\n            setUser(userData)\n            setShowRegister(false)\n          }}\n          onRegisterCancel={() => setShowRegister(false)}\n          showLogin={showLogin}\n          showRegister={showRegister}\n          onSwitchToRegister={() => {\n            setShowLogin(false)\n            setShowRegister(true)\n          }}\n          onSwitchToLogin={() => {\n            setShowRegister(false)\n            setShowLogin(true)\n          }}\n        />\n      ) : children}\n    </AuthContext.Provider>\n  )\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\")\n  }\n  return context\n}\n"],"names":[],"mappings":"AAAA,gBAAgB;AAChB,gCAAgC;AAChC,wDAAwD;;;;;;AAIxD;AAEA;AAJA;;;;AAaA,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAA+B;AAMxD,SAAS,aAAa,EAAE,QAAQ,EAAqB;IAC1D,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,YAAY;YAChB,IAAI;gBACF,WAAW;gBAEX,0CAA0C;gBAC1C,MAAM,aAAa,aAAa,OAAO,CAAC;gBAExC,IAAI,YAAY;oBACd,IAAI;wBACF,MAAM,WAAW,KAAK,KAAK,CAAC;wBAC5B,QAAQ;oBACV,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,8CAA8C;wBAC5D,aAAa,UAAU,CAAC;wBACxB,aAAa;oBACf;gBACF,OAAO;oBACL,yCAAyC;oBACzC,aAAa;gBACf;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,wCAAwC;gBACtD,aAAa;YACf,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,UAAkB;QACjD,IAAI;YACF,WAAW;YACX,MAAM,WAAW,MAAM,MAAM,mBAAmB;gBAC9C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAU;gBAAS;YAC5C;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,QAAQ,GAAG,CAAC,4CAA4C;YAExD,IAAI,SAAS,EAAE,IAAI,KAAK,IAAI,EAAE;gBAC5B,QAAQ,KAAK,IAAI;gBACjB,aAAa,OAAO,CAAC,eAAe,KAAK,SAAS,CAAC,KAAK,IAAI;gBAC5D,aAAa;gBACb,OAAO;YACT;YAEA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,OAAO;QACT,SAAU;YACR,WAAW;QACb;IACF,GAAG,EAAE;IAEL,MAAM,SAAS,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE;QACzB,QAAQ;QACR,aAAa,UAAU,CAAC;QACxB,aAAa;IACf,GAAG,EAAE;IAEL,wCAAwC;IACxC,MAAM,QAAQ,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE,IAAM,CAAC;YAC3B;YACA;YACA;YACA;QACF,CAAC,GAAG;QAAC;QAAM;QAAO;QAAQ;KAAQ;IAElC,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;kCAAiC;;;;;;kCAChD,8OAAC;wBAAI,WAAU;kCAA6B;;;;;;;;;;;;;;;;;IAIpD;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBAC1B,CAAC,QAAQ,CAAC,aAAa,YAAY,kBAClC,8OAAC,qIAAA,CAAA,iBAAc;YACb,gBAAgB,CAAC;gBACf,QAAQ;gBACR,aAAa;gBACb,gBAAgB;YAClB;YACA,eAAe,IAAM,aAAa;YAClC,mBAAmB,CAAC;gBAClB,QAAQ;gBACR,gBAAgB;YAClB;YACA,kBAAkB,IAAM,gBAAgB;YACxC,WAAW;YACX,cAAc;YACd,oBAAoB;gBAClB,aAAa;gBACb,gBAAgB;YAClB;YACA,iBAAiB;gBACf,gBAAgB;gBAChB,aAAa;YACf;;;;;mBAEA;;;;;;AAGV;AAEO,SAAS;IACd,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 2994, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/theme-provider.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport {\n  ThemeProvider as NextThemesProvider,\n  type ThemeProviderProps,\n} from 'next-themes'\n\nexport function ThemeProvider({ children, ...props }: ThemeProviderProps) {\n  return <NextThemesProvider {...props}>{children}</NextThemesProvider>\n}\n"],"names":[],"mappings":";;;;AAGA;AAHA;;;AAQO,SAAS,cAAc,EAAE,QAAQ,EAAE,GAAG,OAA2B;IACtE,qBAAO,8OAAC,gJAAA,CAAA,gBAAkB;QAAE,GAAG,KAAK;kBAAG;;;;;;AACzC","debugId":null}},
    {"offset": {"line": 3016, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/hooks/use-mobile.tsx"],"sourcesContent":["import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  // Use null for initial state to identify pre-hydration state\n  const [isMobile, setIsMobile] = React.useState<boolean | null>(null)\n\n  React.useEffect(() => {\n    // Handler function to update state based on media query\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n\n    // Initial check\n    handleResize()\n\n    // Set up event listener\n    window.addEventListener(\"resize\", handleResize)\n\n    // Set up media query listener for more reliable changes\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    mql.addEventListener(\"change\", handleResize)\n\n    // Cleanup\n    return () => {\n      window.removeEventListener(\"resize\", handleResize)\n      mql.removeEventListener(\"change\", handleResize)\n    }\n  }, [])\n\n  // Return false during SSR, and real value after hydration\n  return isMobile === null ? false : isMobile\n}\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,oBAAoB;AAEnB,SAAS;IACd,6DAA6D;IAC7D,MAAM,CAAC,UAAU,YAAY,GAAG,qMAAA,CAAA,WAAc,CAAiB;IAE/D,qMAAA,CAAA,YAAe,CAAC;QACd,wDAAwD;QACxD,MAAM,eAAe;YACnB,YAAY,OAAO,UAAU,GAAG;QAClC;QAEA,gBAAgB;QAChB;QAEA,wBAAwB;QACxB,OAAO,gBAAgB,CAAC,UAAU;QAElC,wDAAwD;QACxD,MAAM,MAAM,OAAO,UAAU,CAAC,CAAC,YAAY,EAAE,oBAAoB,EAAE,GAAG,CAAC;QACvE,IAAI,gBAAgB,CAAC,UAAU;QAE/B,UAAU;QACV,OAAO;YACL,OAAO,mBAAmB,CAAC,UAAU;YACrC,IAAI,mBAAmB,CAAC,UAAU;QACpC;IACF,GAAG,EAAE;IAEL,0DAA0D;IAC1D,OAAO,aAAa,OAAO,QAAQ;AACrC","debugId":null}},
    {"offset": {"line": 3050, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/main-content-layout.tsx"],"sourcesContent":["\"use client\"\n\nimport React from \"react\"\nimport { useIsMobile } from \"@/hooks/use-mobile\"\n\nexport function MainContentLayout({ children }: { children: React.ReactNode }) {\n    const isMobile = useIsMobile();\n\n    // Always use bg-background to inherit theme, and text-foreground for text\n    return (\n        <main className={`relative z-10 ${isMobile ? 'pt-[7rem]' : 'pt-[6rem]'} min-h-screen bg-background text-foreground transition-colors duration-300 overflow-auto`}>\n            {children}\n        </main>\n    )\n}\n"],"names":[],"mappings":";;;;AAGA;AAHA;;;AAKO,SAAS,kBAAkB,EAAE,QAAQ,EAAiC;IACzE,MAAM,WAAW,CAAA,GAAA,uHAAA,CAAA,cAAW,AAAD;IAE3B,0EAA0E;IAC1E,qBACI,8OAAC;QAAK,WAAW,CAAC,cAAc,EAAE,WAAW,cAAc,YAAY,wFAAwF,CAAC;kBAC3J;;;;;;AAGb","debugId":null}},
    {"offset": {"line": 3074, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/dynamic-background.tsx"],"sourcesContent":["//Tôi là An Kun\n\"use client\"\nimport { useEffect, useState, useMemo } from \"react\"\n\n// Define or import these according to your project structure\ntype BackgroundSettings = {\n    type: \"video\" | \"color\";\n    videoUrl?: string;\n    videoList?: string[];\n    randomVideo?: boolean;\n    enableSound: boolean;\n    opacity: number;\n};\n\nconst DEFAULT_BACKGROUND_SETTINGS: BackgroundSettings = {\n    type: \"video\",\n    videoUrl: \"\",\n    videoList: [],\n    randomVideo: false,\n    enableSound: false,\n    opacity: 0.5,\n};\n\nconst BACKGROUND_SETTINGS_KEY = \"backgroundSettings\";\nconst FALLBACK_VIDEOS = [\"dQw4w9WgXcQ\"]; // Example fallback video ID\n\nfunction getRandomVideoId(list: string[]): string {\n    return list[Math.floor(Math.random() * list.length)];\n}\n\nfunction getYouTubeId(url: string): string | null {\n    const match = url.match(/(?:youtu\\.be\\/|youtube\\.com\\/(?:watch\\?v=|embed\\/|v\\/))([\\w-]{11})/);\n    return match ? match[1] : null;\n}\n\n// Dummy SoundControl component for demonstration; replace with your actual implementation\nconst SoundControl = ({\n    enableSound,\n    onSoundToggle,\n}: {\n    enableSound: boolean;\n    onSoundToggle: (enable: boolean) => void;\n}) => (\n    <button\n        style={{\n            position: \"fixed\",\n            bottom: 20,\n            right: 20,\n            zIndex: 50,\n            background: \"rgba(0,0,0,0.5)\",\n            color: \"white\",\n            border: \"none\",\n            borderRadius: \"50%\",\n            width: 40,\n            height: 40,\n            cursor: \"pointer\",\n        }}\n        onClick={() => onSoundToggle(!enableSound)}\n        aria-label={enableSound ? \"Mute background\" : \"Unmute background\"}\n    >\n        {enableSound ? \"🔊\" : \"🔇\"}\n    </button>\n);\n\nexport function DynamicBackground() {\n    // You may need to import useMemo, and define the following constants/types elsewhere:\n    // - BackgroundSettings, DEFAULT_BACKGROUND_SETTINGS, BACKGROUND_SETTINGS_KEY, FALLBACK_VIDEOS, getRandomVideoId, getYouTubeId, SoundControl\n\n    const [settings, setSettings] = useState<BackgroundSettings | null>(null);\n    const [hasUserInteracted, setHasUserInteracted] = useState(false);\n    const [iframeKey, setIframeKey] = useState(0);\n    const [hasError, setHasError] = useState(false);\n\n    useEffect(() => {\n        const loadSettings = () => {\n            try {\n                const savedSettings = localStorage.getItem(BACKGROUND_SETTINGS_KEY);\n                if (savedSettings) {\n                    const parsed = JSON.parse(savedSettings);\n                    // Validate parsed settings có đủ fields cần thiết\n                    if (parsed && typeof parsed === 'object') {\n                        setSettings({\n                            ...DEFAULT_BACKGROUND_SETTINGS,\n                            ...parsed\n                        });\n                    } else {\n                        console.warn(\"Invalid background settings format, using defaults\");\n                        setSettings(DEFAULT_BACKGROUND_SETTINGS);\n                    }\n                } else {\n                    // Sử dụng cài đặt mặc định từ file constants\n                    setSettings(DEFAULT_BACKGROUND_SETTINGS);\n                }\n            } catch (error) {\n                console.error(\"Failed to load or parse background settings:\", error);\n                setSettings(DEFAULT_BACKGROUND_SETTINGS); // Fallback về mặc định nếu có lỗi\n            }\n        };\n\n        loadSettings();\n\n        // Lắng nghe sự kiện cập nhật background từ trang Settings\n        const handleBackgroundUpdate = (event: CustomEvent<BackgroundSettings>) => setSettings(event.detail);\n        window.addEventListener(\"backgroundUpdate\", handleBackgroundUpdate as EventListener);\n        return () => window.removeEventListener(\"backgroundUpdate\", handleBackgroundUpdate as EventListener);\n    }, []);\n\n    const updateSoundSetting = (enableSound: boolean) => {\n        if (settings) {\n            const updatedSettings = { ...settings, enableSound };\n            setSettings(updatedSettings);\n            localStorage.setItem(BACKGROUND_SETTINGS_KEY, JSON.stringify(updatedSettings));\n\n            // Cập nhật âm thanh của video iframe hiện tại\n            const iframe = document.querySelector('iframe[title=\"YouTube Background Video\"]') as HTMLIFrameElement;\n            if (iframe?.contentWindow) {\n                try {\n                    // Luôn giữ video bị tắt tiếng, bất kể người dùng đã chọn gì\n                    iframe.contentWindow.postMessage('{\"event\":\"command\",\"func\":\"mute\",\"args\":\"\"}', 'https://www.youtube.com');\n                } catch (e) {\n                    console.warn(\"Could not update video sound:\", e);\n                }\n            }\n\n            // Dispatch event để cập nhật các components khác\n            window.dispatchEvent(\n                new CustomEvent(\"backgroundUpdate\", {\n                    detail: updatedSettings,\n                }),\n            );\n        }\n    };\n\n    // Tính toán opacity class dựa trên settings\n    const getOpacityClass = (opacity: number) => {\n        const adjustedOpacity = Math.max(0.1, Math.min(0.9, 1 - opacity));\n        if (adjustedOpacity <= 0.1) return \"opacity-10\";\n        if (adjustedOpacity <= 0.2) return \"opacity-20\";\n        if (adjustedOpacity <= 0.3) return \"opacity-30\";\n        if (adjustedOpacity <= 0.4) return \"opacity-40\";\n        if (adjustedOpacity <= 0.5) return \"opacity-50\";\n        if (adjustedOpacity <= 0.6) return \"opacity-60\";\n        if (adjustedOpacity <= 0.7) return \"opacity-70\";\n        if (adjustedOpacity <= 0.8) return \"opacity-80\";\n        return \"opacity-90\";\n    };\n\n    const videoId = useMemo(() => {\n        if (!settings) return null;\n\n        let selectedVideoId: string | null = null;\n\n        if (settings.randomVideo && settings.videoList && settings.videoList.length > 0) {\n            selectedVideoId = getRandomVideoId(settings.videoList);\n        } else if (settings.videoUrl && settings.videoUrl.trim() !== \"\") {\n            selectedVideoId = getYouTubeId(settings.videoUrl);\n        } else if (settings.videoList && settings.videoList.length > 0) {\n            // Fallback: nếu không có video nào được chỉ định, dùng video đầu tiên trong list\n            selectedVideoId = settings.videoList[0];\n        }\n\n        // Final fallback: nếu vẫn không có video hợp lệ, dùng fallback video\n        if (!selectedVideoId) {\n            selectedVideoId = FALLBACK_VIDEOS[0];\n        }\n\n        return selectedVideoId;\n    }, [settings?.randomVideo, settings?.videoUrl, settings?.videoList]);\n\n    // Handler để xử lý user interaction\n    const handleUserInteraction = () => {\n        setHasUserInteracted(true);\n        setHasError(false); // Reset error state on interaction\n        // Force reload iframe với delay để đảm bảo autoplay\n        setTimeout(() => setIframeKey(prev => prev + 1), 300);\n    };\n\n    // Effect để đảm bảo video autoplay sau khi user có interaction\n    useEffect(() => {\n        if (hasUserInteracted) return;\n\n        // Listen for user interactions\n        const events = ['click', 'touchstart', 'keydown', 'mousedown', 'scroll'];\n        events.forEach(event => {\n            document.addEventListener(event, handleUserInteraction, { once: true, passive: true });\n        });\n\n        return () => {\n            events.forEach(event => {\n                document.removeEventListener(event, handleUserInteraction);\n            });\n        };\n    }, [hasUserInteracted]);\n\n    // Effect để auto-trigger interaction sau 2 giây nếu user chưa tương tác\n    useEffect(() => {\n        if (!hasUserInteracted && videoId) {\n            const timer = setTimeout(handleUserInteraction, 2000);\n            return () => clearTimeout(timer);\n        }\n    }, [hasUserInteracted, videoId]);\n\n    if (!settings) {\n        return <div className=\"fixed inset-0 -z-10 bg-gradient-to-br from-indigo-500 to-purple-600\" />;\n    }\n\n    return (\n        <>\n            <div className=\"fixed inset-0 z-0\">\n                {settings.type === \"video\" && videoId ? (\n                    hasError ? (\n                        <div className=\"absolute inset-0 bg-gradient-to-br from-red-900 to-purple-900 flex items-center justify-center\">\n                            <div className=\"text-white text-center\">\n                                <p className=\"text-lg\">Video loading failed</p>\n                                <p className=\"text-sm opacity-75\">Retrying...</p>\n                            </div>\n                        </div>\n                    ) : (\n                        <iframe\n                                key={iframeKey}\n                                src={`https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1&controls=0&loop=1&playlist=${videoId}&showinfo=0&rel=0&iv_load_policy=3&modestbranding=1&playsinline=1&enablejsapi=1&origin=${window.location.origin}`}\n                                allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                                className=\"absolute inset-0 w-full h-full object-cover pointer-events-none select-none\"\n                                style={{ opacity: settings.opacity }}\n                                onLoad={(e) => {\n                                    const iframe = e.currentTarget;\n                                    if (iframe?.contentWindow) {\n                                        try {\n                                            iframe.contentWindow.postMessage('{\"event\":\"command\",\"func\":\"mute\",\"args\":\"\"}', 'https://www.youtube.com');\n                                        } catch (e) {\n                                            console.warn(\"Could not mute video:\", e);\n                                        }\n                                    }\n                                }}\n                                onError={() => {\n                                    console.warn(\"YouTube iframe failed to load, trying `fallback...\");\n                                    setHasError(true);\n                                    setTimeout(() => {\n                                        setIframeKey(prev => prev + 1);\n                                        setHasError(false);\n                                    }, 2000);\n                                }}\n                            />\n                        )\n                ) : (\n                        <div className=\"absolute inset-0 bg-gradient-to-br from-indigo-500 to-purple-600\" />\n                )}\n                {/* Dynamic opacity overlay */}\n                <div className={`absolute inset-0 bg-black ${getOpacityClass(settings.opacity)}`} />\n            </div>\n\n            {/* Show sound control only when video is playing */}\n            {settings.type === \"video\" && videoId && (\n                <SoundControl\n                    enableSound={settings.enableSound}\n                    onSoundToggle={updateSoundSetting}\n                />\n            )}\n        </>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3372, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n      \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n      \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,qMAAA,CAAA,aAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,0KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;0BAET,8OAAC,0KAAA,CAAA,WAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,0KAAA,CAAA,SAA0B;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,0KAAA,CAAA,OAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,qMAAA,CAAA,aAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC,0KAAA,CAAA,sBAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,iDACA,gBAAgB,cAChB,sDACA,gBAAgB,gBAChB,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,0KAAA,CAAA,kBAAmC;YAAC,WAAU;;;;;;;;;;;AAGnD,UAAU,WAAW,GAAG,0KAAA,CAAA,sBAAuC,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 3438, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> { }\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAKA,MAAM,yBAAW,qMAAA,CAAA,aAAgB,CAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,wSACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 3464, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/loading-screen.tsx"],"sourcesContent":["\"use client\"\nimport { useState, useEffect, useRef } from \"react\"\nimport Image from 'next/image'\nimport \"@/components/awesome/css/all.min.css\"\n\ninterface LoadingScreenProps {\n    duration?: number\n    onComplete?: () => void\n    title?: string\n    subtitle?: string\n    logoUrl?: string\n    isAnimation?: boolean // Thêm prop để xác định có phải animation không\n}\n\nexport function LoadingScreen({\n    duration = 3000,\n    onComplete,\n    title = \"An Kun Studio\",\n    subtitle = \"Đang chuyển hướng ...\",\n    logoUrl = process.env.LOGO,\n    isAnimation = true\n}: Readonly<LoadingScreenProps>) {\n    const [progress, setProgress] = useState(0)\n    const [visible, setVisible] = useState(true)\n    const progressIntervalRef = useRef<NodeJS.Timeout | null>(null)\n    const completeTimeoutRef = useRef<NodeJS.Timeout | null>(null)\n    const hideTimeoutRef = useRef<NodeJS.Timeout | null>(null)\n\n    useEffect(() => {\n        startProgress()\n\n        // Copy ref values to local variables for cleanup\n        const progressInterval = progressIntervalRef.current\n        const completeTimeout = completeTimeoutRef.current\n        const hideTimeout = hideTimeoutRef.current\n\n        return () => {\n            if (progressInterval) clearInterval(progressInterval)\n            if (completeTimeout) clearTimeout(completeTimeout)\n            if (hideTimeout) clearTimeout(hideTimeout)\n        }\n    }, [])\n\n    const startProgress = () => {\n        progressIntervalRef.current = setInterval(() => {\n            setProgress(prev => {\n                const newProgress = prev + (Math.random() * 10 + 2) // 2-12% increment\n                if (newProgress >= 100) {\n                    if (progressIntervalRef.current) clearInterval(progressIntervalRef.current)\n                    completeLoading()\n                    return 100\n                }\n                return newProgress\n            })\n        }, 150)\n    }\n\n    const completeLoading = () => {\n        completeTimeoutRef.current = setTimeout(() => {\n            setVisible(false)\n            if (onComplete) {\n                onComplete()\n            }\n        }, 500)\n    }\n\n    if (!visible) return null\n\n    return (\n        <div className={`fixed top-0 left-0 w-full h-full bg-gradient-to-br from-gray-950 via-black to-gray-900 \n                     flex flex-col items-center justify-center z-[10000] font-sans\n                     ${!visible ? 'opacity-0 transition-opacity duration-500' : ''}`}\n        >\n\n            {/* Loading Content */}\n            <div className=\"text-center max-w-[400px]\">\n                <h1 className=\"text-4xl font-bold bg-gradient-to-r from-red-400 to-pink-400 bg-clip-text text-transparent mb-4 animate-fadeInUp\">\n                    {title}\n                </h1>\n                <p className=\"text-lg text-gray-300 mb-8 animate-fadeInUp\">\n                    {subtitle}\n                </p>\n\n                {/* Progress Bar */}\n                <div className=\"mb-6\">\n                    <div className=\"w-[300px] h-2 bg-gray-700 rounded-full overflow-hidden mx-auto mb-2\">\n                        <div\n                            className=\"h-full bg-gradient-to-r from-red-500 via-pink-500 to-orange-500 rounded-full transition-all duration-300\"\n                            style={{ width: `${progress}%` }}\n                        ></div>\n                    </div>\n                    <div className=\"text-sm text-gray-400 animate-fadeInUp\">\n                        {Math.round(progress)}%\n                    </div>\n                </div>\n\n                {/* Loading Dots */}\n                <div className=\"flex justify-center gap-2\">\n                    <span className=\"w-2 h-2 bg-red-500 rounded-full animate-bounce\" style={{ animationDelay: '0s' }}></span>\n                    <span className=\"w-2 h-2 bg-red-500 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></span>\n                    <span className=\"w-2 h-2 bg-red-500 rounded-full animate-bounce\" style={{ animationDelay: '0.4s' }}></span>\n                </div>\n            </div>\n\n            {/* Loading Info Text */}\n            <div className=\"absolute bottom-4 text-center text-xs text-gray-500\">\n                <p><i className=\"fas fa-info-circle mr-1\"></i> Digital Music Distribution Platform</p>\n                <p className=\"mt-1\">\n                    <i className=\"fas fa-copyright mr-1\"></i> An Kun Studio 2025\n                </p>\n            </div>\n        </div>\n    )\n}\n\n// Tạo thêm keyframes cho animation fadeInUp\nconst styles = `\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.animate-fadeInUp {\n  animation: fadeInUp 1s ease-out forwards;\n}\n`\n\n// Thêm styles vào document khi component được load\nif (typeof document !== 'undefined') {\n    const styleElement = document.createElement('style')\n    styleElement.textContent = styles\n    document.head.appendChild(styleElement)\n}\n"],"names":[],"mappings":";;;;AACA;AADA;;;;AAcO,SAAS,cAAc,EAC1B,WAAW,IAAI,EACf,UAAU,EACV,QAAQ,eAAe,EACvB,WAAW,uBAAuB,EAClC,UAAU,QAAQ,GAAG,CAAC,IAAI,EAC1B,cAAc,IAAI,EACS;IAC3B,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,sBAAsB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAyB;IAC1D,MAAM,qBAAqB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAyB;IACzD,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAyB;IAErD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN;QAEA,iDAAiD;QACjD,MAAM,mBAAmB,oBAAoB,OAAO;QACpD,MAAM,kBAAkB,mBAAmB,OAAO;QAClD,MAAM,cAAc,eAAe,OAAO;QAE1C,OAAO;YACH,IAAI,kBAAkB,cAAc;YACpC,IAAI,iBAAiB,aAAa;YAClC,IAAI,aAAa,aAAa;QAClC;IACJ,GAAG,EAAE;IAEL,MAAM,gBAAgB;QAClB,oBAAoB,OAAO,GAAG,YAAY;YACtC,YAAY,CAAA;gBACR,MAAM,cAAc,OAAO,CAAC,KAAK,MAAM,KAAK,KAAK,CAAC,EAAE,kBAAkB;;gBACtE,IAAI,eAAe,KAAK;oBACpB,IAAI,oBAAoB,OAAO,EAAE,cAAc,oBAAoB,OAAO;oBAC1E;oBACA,OAAO;gBACX;gBACA,OAAO;YACX;QACJ,GAAG;IACP;IAEA,MAAM,kBAAkB;QACpB,mBAAmB,OAAO,GAAG,WAAW;YACpC,WAAW;YACX,IAAI,YAAY;gBACZ;YACJ;QACJ,GAAG;IACP;IAEA,IAAI,CAAC,SAAS,OAAO;IAErB,qBACI,8OAAC;QAAI,WAAW,CAAC;;qBAEJ,EAAE,CAAC,UAAU,8CAA8C,IAAI;;0BAIxE,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCACT;;;;;;kCAEL,8OAAC;wBAAE,WAAU;kCACR;;;;;;kCAIL,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;0CACX,cAAA,8OAAC;oCACG,WAAU;oCACV,OAAO;wCAAE,OAAO,GAAG,SAAS,CAAC,CAAC;oCAAC;;;;;;;;;;;0CAGvC,8OAAC;gCAAI,WAAU;;oCACV,KAAK,KAAK,CAAC;oCAAU;;;;;;;;;;;;;kCAK9B,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAK,WAAU;gCAAiD,OAAO;oCAAE,gBAAgB;gCAAK;;;;;;0CAC/F,8OAAC;gCAAK,WAAU;gCAAiD,OAAO;oCAAE,gBAAgB;gCAAO;;;;;;0CACjG,8OAAC;gCAAK,WAAU;gCAAiD,OAAO;oCAAE,gBAAgB;gCAAO;;;;;;;;;;;;;;;;;;0BAKzG,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;;0CAAE,8OAAC;gCAAE,WAAU;;;;;;4BAA8B;;;;;;;kCAC9C,8OAAC;wBAAE,WAAU;;0CACT,8OAAC;gCAAE,WAAU;;;;;;4BAA4B;;;;;;;;;;;;;;;;;;;AAK7D;AAEA,4CAA4C;AAC5C,MAAM,SAAS,CAAC;;;;;;;;;;;;;;;AAehB,CAAC;AAED,mDAAmD;AACnD,IAAI,OAAO,aAAa,aAAa;IACjC,MAAM,eAAe,SAAS,aAAa,CAAC;IAC5C,aAAa,WAAW,GAAG;IAC3B,SAAS,IAAI,CAAC,WAAW,CAAC;AAC9B","debugId":null}},
    {"offset": {"line": 3696, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/ai-chat-assistant.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef, useEffect } from \"react\"\nimport { AnimatePresence, motion } from \"framer-motion\"\nimport { Sparkles, Send, X, Loader2 } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardFooter, CardHeader } from \"@/components/ui/card\"\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { LoadingScreen } from \"@/components/loading-screen\"\n\n// Utility function để tạo ID duy nhất\nlet messageCounter = 0;\nconst generateStableId = (prefix: string = 'msg') => {\n    messageCounter++;\n    return `${prefix}_${messageCounter}`;\n};\n\n// Utility functions để xử lý timestamp\nconst getStableTimestamp = () => {\n    const now = new Date();\n    // Chỉ lấy phần nguyên của thời gian, bỏ milliseconds\n    return new Date(Math.floor(now.getTime() / 1000) * 1000).toISOString();\n};\n\n// Format thời gian hiển thị không phụ thuộc locale\nconst formatMessageTime = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const hours = date.getHours().toString().padStart(2, '0');\n    const minutes = date.getMinutes().toString().padStart(2, '0');\n    return `${hours}:${minutes}`;\n};\n\nexport type Message = {\n    id: string\n    role: \"user\" | \"assistant\" | \"system\"\n    content: string\n    timestamp: string\n}\n\ninterface AiChatAssistantProps {\n    readonly isOpen: boolean\n    readonly onClose: () => void\n}\n\nexport function AiChatAssistant({ isOpen, onClose }: AiChatAssistantProps) {\n    const [messages, setMessages] = useState<Message[]>([\n        {\n            id: generateStableId('welcome'),\n            role: \"assistant\",\n            content: \"Xin chào! Tôi là trợ lý AI của An Kun Studio. Tôi có thể trả lời các câu hỏi liên quan đến An Kun Studio, dịch vụ âm nhạc và phân phối nhạc số. Bạn cần giúp gì?\",\n            timestamp: getStableTimestamp(),\n        },\n    ])\n    const [input, setInput] = useState(\"\")\n    const [isLoading, setIsLoading] = useState(false)\n    const [retryCount, setRetryCount] = useState(0)\n    const [isInitializing, setIsInitializing] = useState(true)\n    const MAX_RETRIES = 2\n    const messagesEndRef = useRef<HTMLDivElement>(null)\n    const inputRef = useRef<HTMLTextAreaElement>(null)\n\n    useEffect(() => {\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n    }, [messages])\n\n    useEffect(() => {\n        if (isOpen) {\n            // Giả lập thời gian khởi động AI\n            const initTimer = setTimeout(() => {\n                setIsInitializing(false)\n                inputRef.current?.focus()\n            }, 2000)\n\n            return () => clearTimeout(initTimer)\n        }\n    }, [isOpen])\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault()\n        if (input.trim() === \"\" || isLoading) return\n\n        const userMessage: Message = {\n            id: generateStableId('user'),\n            role: \"user\",\n            content: input,\n            timestamp: getStableTimestamp(),\n        }\n\n        setMessages((prev) => [...prev, userMessage])\n        setInput(\"\")\n        setIsLoading(true)\n\n        try {\n            const controller = new AbortController();\n            const timeoutId = setTimeout(() => {\n                controller.abort();\n            }, 15000);\n\n            const response = await fetch(\"/api/ai-chat\", {\n                signal: controller.signal,\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Accept\": \"application/json\",\n                    \"X-Request-ID\": generateStableId('req')\n                },\n                body: JSON.stringify({\n                    messages: [...messages, userMessage].map(m => ({\n                        role: m.role,\n                        content: m.content\n                    }))\n                }),\n            });\n\n            clearTimeout(timeoutId);\n\n            // Kiểm tra headers quan trọng\n            const contentType = response.headers.get(\"content-type\");\n            if (!contentType?.includes(\"application/json\")) {\n                throw new Error(\"INVALID_RESPONSE\");\n            }\n\n            if (!response.ok) {\n                await response.json().catch(() => null);\n\n                if ((response.status >= 500 || response.status === 0) && retryCount < MAX_RETRIES) {\n                    setRetryCount(prev => prev + 1);\n                    const backoffTime = Math.pow(2, retryCount) * 1000;\n                    await new Promise(resolve => setTimeout(resolve, backoffTime));\n                    handleSubmit(e);\n                    return;\n                }\n\n                if (response.status === 401) {\n                    throw new Error(\"AUTH_ERROR\");\n                } else if (response.status === 400) {\n                    throw new Error(\"REQUEST_ERROR\");\n                } else if (response.status === 402) {\n                    throw new Error(\"QUOTA_EXCEEDED\");\n                } else if (response.status === 429) {\n                    throw new Error(\"RATE_LIMIT\");\n                } else {\n                    throw new Error(\"API_ERROR\");\n                }\n            }\n\n            const data = await response.json();\n\n            if (data.isError) {\n                throw new Error(\"RESPONSE_ERROR\");\n            }\n\n            const aiMessage: Message = {\n                id: generateStableId('ai'),\n                role: \"assistant\",\n                content: data.response ?? \"Xin lỗi, tôi không thể xử lý yêu cầu này. Vui lòng thử lại sau.\",\n                timestamp: getStableTimestamp(),\n            }\n\n            setMessages((prev) => [...prev, aiMessage]);\n            setRetryCount(0);\n        } catch (error) {\n            let errorContent = \"Xin lỗi! Hiện tại AI Assistant đang gặp trục trặc. Vui lòng thử lại sau vài phút.\";\n            const retryMessage = \"\\n\\nBạn có thể thử: \\n1. Đặt câu hỏi ngắn gọn hơn\\n2. Chia nhỏ câu hỏi thành nhiều phần\\n3. Chờ một lúc rồi thử lại\";\n\n            if (error instanceof Error) {\n                const errorType = error.message || \"UNKNOWN_ERROR\";\n                console.warn(\"AI Chat error type:\", errorType);\n\n                switch (errorType) {\n                    case \"AUTH_ERROR\":\n                        errorContent = \"Xin lỗi! Có vấn đề về xác thực. Vui lòng liên hệ Admin qua:\\n• Email: admin@ankunstudio.com\\n• Hoặc Facebook page của chúng tôi\";\n                        break;\n                    case \"REQUEST_ERROR\":\n                        errorContent = \"Yêu cầu không hợp lệ. Vui lòng thử lại sau.\";\n                        break;\n                    case \"QUOTA_EXCEEDED\":\n                        errorContent = \"Quota AI đã hết. Vui lòng liên hệ admin để được hỗ trợ.\";\n                        break;\n                    case \"RATE_LIMIT\":\n                        errorContent = \"Bạn đang gửi yêu cầu quá nhanh. Vui lòng thử lại sau.\";\n                        break;\n                    case \"RESPONSE_ERROR\":\n                        errorContent = \"Rất tiếc! AI không thể xử lý yêu cầu này.\" + retryMessage;\n                        break;\n                    case \"INVALID_RESPONSE\":\n                        errorContent = \"Định dạng phản hồi không hợp lệ. Vui lòng báo cáo lỗi này cho admin.\";\n                        break;\n                    case \"ABORTED\":\n                        errorContent = \"Kết nối bị gián đoạn! Vui lòng kiểm tra mạng và thử lại.\";\n                        break;\n                    default:\n                        errorContent += retryMessage;\n                        break;\n                }\n            }\n\n            const errorMessage: Message = {\n                id: generateStableId('error'),\n                role: \"assistant\",\n                content: errorContent,\n                timestamp: getStableTimestamp(),\n            }\n            setMessages((prev) => [...prev, errorMessage]);\n\n            // Reset retry count nếu không phải lỗi server\n            if (error instanceof Error && !error.message.includes(\"API_ERROR\")) {\n                setRetryCount(0);\n            }\n        } finally {\n            setIsLoading(false);\n        }\n    }\n\n    // Improved animations\n    const chatVariants = {\n        hidden: { opacity: 0, y: 20, scale: 0.95 },\n        visible: {\n            opacity: 1,\n            y: 0,\n            scale: 1,\n            transition: {\n                type: \"spring\" as const,\n                damping: 30,\n                stiffness: 300,\n                mass: 0.5\n            }\n        },\n        exit: {\n            opacity: 0,\n            y: 20,\n            scale: 0.95,\n            transition: {\n                duration: 0.2,\n                ease: \"easeOut\" as const\n            }\n        }\n    } as const\n\n    interface MessageBubbleProps {\n        readonly message: Message\n        readonly index: number\n    }\n\n    function MessageBubble({ message, index }: MessageBubbleProps) {\n        const isUser = message.role === \"user\"\n\n        return (\n            <motion.div\n                className={`flex ${isUser ? \"justify-end\" : \"justify-start\"} mb-4`}\n                initial={{ opacity: 0, y: 10, scale: 0.95 }}\n                animate={{\n                    opacity: 1,\n                    y: 0,\n                    scale: 1,\n                    transition: {\n                        delay: index * 0.1,\n                        duration: 0.4,\n                        ease: [0.4, 0, 0.2, 1]\n                    }\n                }}\n            >\n                <div\n                    className={`flex items-start gap-2 max-w-[80%] ${isUser ? \"flex-row-reverse\" : \"\"}`}\n                >\n                    <motion.div\n                        className={`p-4 rounded-2xl backdrop-blur-lg border\n                            ${isUser\n                                ? \"bg-gradient-to-br from-purple-600/90 to-purple-700/90 border-purple-500/30 text-white shadow-[0_4px_20px_rgba(168,85,247,0.2)]\"\n                                : \"bg-gradient-to-br from-white/15 to-white/5 border-white/20 text-white/90 shadow-[0_4px_20px_rgba(255,255,255,0.1)]\"\n                            } \n                            hover:shadow-2xl hover:scale-[1.02] hover:-translate-y-0.5 transition-all duration-300\n                        `}\n                        whileHover={{ scale: 1.02, y: -2 }}\n                        transition={{ type: \"spring\", stiffness: 400, damping: 20 }}\n                    >\n                        <p className=\"text-sm leading-relaxed\">{message.content}</p>\n                        <div className={`text-xs mt-2 ${isUser ? \"text-purple-200/80\" : \"text-white/60\"}`}>\n                            {formatMessageTime(message.timestamp)}\n                        </div>\n                    </motion.div>\n                </div>\n            </motion.div>\n        )\n    }\n\n    if (!isOpen) return null\n\n    if (isInitializing) {\n        return (\n            <div className=\"fixed inset-0 z-50\">\n                <LoadingScreen\n                    title=\"AI Assistant\"\n                    subtitle=\"Đang khởi động trợ lý AI...\"\n                    duration={2000}\n                    onComplete={() => setIsInitializing(false)}\n                />\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"fixed inset-0 bg-gradient-to-br from-purple-900/40 via-blue-900/30 to-black/30 backdrop-blur-[12px] z-50 flex items-center justify-center p-4\">\n            <AnimatePresence>\n                <motion.div\n                    className=\"w-full max-w-2xl\"\n                    variants={chatVariants}\n                    initial=\"hidden\"\n                    animate=\"visible\"\n                    exit=\"exit\"\n                >\n                    <Card className=\"shadow-[0_8px_32px_rgba(0,0,0,0.2)] border border-white/10 bg-gradient-to-br from-white/15 via-white/10 to-white/5 backdrop-blur-xl overflow-hidden\">\n                        <CardHeader className=\"border-b border-white/10 bg-gradient-to-r from-white/10 via-white/5 to-transparent p-4 flex flex-row justify-between items-center\">\n                            <div className=\"flex items-center gap-2\">\n                                <motion.div\n                                    whileHover={{ scale: 1.1, rotate: 180 }}\n                                    transition={{ type: \"spring\", stiffness: 300, damping: 10 }}\n                                >\n                                    <Sparkles className=\"h-5 w-5 text-purple-400 filter drop-shadow-[0_0_8px_rgba(168,85,247,0.5)]\" />\n                                </motion.div>\n                                <h3 className=\"font-medium text-white text-shadow-sm\">AI Assistant</h3>\n                            </div>\n                            <Button\n                                variant=\"ghost\"\n                                size=\"icon\"\n                                className=\"rounded-full text-white/80 hover:text-white hover:bg-white/10 transition-all duration-300 hover:shadow-[0_0_15px_rgba(255,255,255,0.1)]\"\n                                onClick={onClose}\n                            >\n                                <X className=\"h-4 w-4\" />\n                            </Button>\n                        </CardHeader>\n\n                        <CardContent className=\"p-0\">\n                            <ScrollArea className=\"h-[400px] p-4 scrollbar-thin scrollbar-track-white/5 scrollbar-thumb-white/20\">\n                                <div className=\"space-y-4\">\n                                    {messages.map((message, index) => (\n                                        <MessageBubble\n                                            key={message.id}\n                                            message={message}\n                                            index={index}\n                                        />\n                                    ))}\n                                    <div ref={messagesEndRef} />\n                                </div>\n                            </ScrollArea>\n                        </CardContent>\n\n                        <CardFooter className=\"border-t border-white/10 bg-gradient-to-r from-white/10 via-white/5 to-transparent p-4\">\n                            <form onSubmit={handleSubmit} className=\"flex gap-2 w-full\">\n                                <Textarea\n                                    ref={inputRef}\n                                    value={input}\n                                    onChange={(e) => setInput(e.target.value)}\n                                    placeholder=\"Nhập tin nhắn...\"\n                                    className=\"min-h-[44px] max-h-[120px] bg-white/10 border-white/20 text-white/90 placeholder:text-white/50 resize-none rounded-2xl backdrop-blur-md focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all duration-300 overflow-y-auto\"\n                                />\n                                <Button\n                                    type=\"submit\"\n                                    size=\"icon\"\n                                    disabled={isLoading || input.trim() === \"\"}\n                                    className={`rounded-full h-11 w-11 bg-gradient-to-br from-purple-500 to-purple-700 hover:from-purple-600 hover:to-purple-800 disabled:from-purple-800 disabled:to-purple-900 shadow-lg hover:shadow-purple-500/20 transition-all duration-300\n                                        ${isLoading ? 'animate-pulse' : ''}`}\n                                >\n                                    {isLoading ? (\n                                        <Loader2 className=\"h-4 w-4 animate-spin\" />\n                                    ) : (\n                                        <Send className=\"h-4 w-4\" />\n                                    )}\n                                </Button>\n                            </form>\n                        </CardFooter>\n                    </Card>\n                </motion.div>\n            </AnimatePresence>\n        </div>\n    )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4222, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/ai-chat-button.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Sparkles } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { AiChatAssistant } from \"@/components/ai-chat-assistant\"\n\n// Tôi là An Kun\n// Hỗ trợ dự án, Copilot, Gemini\n// Tác giả kiêm xuất bản bởi An Kun Studio Digital Music\n\nexport function AiChatButton() {\n    const [isOpen, setIsOpen] = useState(false)\n\n    return (\n        <>\n            <motion.div\n                className=\"fixed bottom-6 right-6 z-40\"\n                initial={{ scale: 0 }}\n                animate={{ scale: 1 }}\n                transition={{\n                    type: \"spring\",\n                    stiffness: 260,\n                    damping: 20,\n                    delay: 0.3\n                }}\n            >\n                <Button\n                    onClick={() => setIsOpen(true)}\n                    className=\"w-14 h-14 rounded-full bg-gradient-to-r from-purple-600 to-blue-500 shadow-lg hover:shadow-purple-600/20 hover:from-purple-700 hover:to-blue-600 flex items-center justify-center\"\n                    size=\"icon\"\n                >\n                    <motion.div\n                        animate={{\n                            rotate: [0, 20, -20, 0],\n                            scale: [1, 1.1, 1]\n                        }}\n                        transition={{\n                            duration: 2,\n                            repeat: Infinity,\n                            repeatType: \"loop\",\n                            ease: \"easeInOut\",\n                            times: [0, 0.2, 0.8, 1]\n                        }}\n                    >\n                        <Sparkles className=\"h-6 w-6 text-white\" />\n                    </motion.div>\n                </Button>\n            </motion.div>\n\n            <AnimatePresence>\n                {isOpen && <AiChatAssistant isOpen={isOpen} onClose={() => setIsOpen(false)} />}\n            </AnimatePresence>\n        </>\n    )\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AACA;AACA;AACA;AANA;;;;;;;AAYO,SAAS;IACZ,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAErC,qBACI;;0BACI,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;gBACP,WAAU;gBACV,SAAS;oBAAE,OAAO;gBAAE;gBACpB,SAAS;oBAAE,OAAO;gBAAE;gBACpB,YAAY;oBACR,MAAM;oBACN,WAAW;oBACX,SAAS;oBACT,OAAO;gBACX;0BAEA,cAAA,8OAAC,2HAAA,CAAA,SAAM;oBACH,SAAS,IAAM,UAAU;oBACzB,WAAU;oBACV,MAAK;8BAEL,cAAA,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;wBACP,SAAS;4BACL,QAAQ;gCAAC;gCAAG;gCAAI,CAAC;gCAAI;6BAAE;4BACvB,OAAO;gCAAC;gCAAG;gCAAK;6BAAE;wBACtB;wBACA,YAAY;4BACR,UAAU;4BACV,QAAQ;4BACR,YAAY;4BACZ,MAAM;4BACN,OAAO;gCAAC;gCAAG;gCAAK;gCAAK;6BAAE;wBAC3B;kCAEA,cAAA,8OAAC,0MAAA,CAAA,WAAQ;4BAAC,WAAU;;;;;;;;;;;;;;;;;;;;;0BAKhC,8OAAC,yLAAA,CAAA,kBAAe;0BACX,wBAAU,8OAAC,sIAAA,CAAA,kBAAe;oBAAC,QAAQ;oBAAQ,SAAS,IAAM,UAAU;;;;;;;;;;;;;AAIrF","debugId":null}},
    {"offset": {"line": 4330, "column": 0}, "map": {"version":3,"sources":["file:///F:/studio.ankun/components/root-layout-client.tsx"],"sourcesContent":["\"use client\"\n\nimport React, { useState, useEffect } from \"react\"\nimport { AuthProvider } from \"@/components/auth-provider\"\nimport { ThemeProvider } from \"@/components/theme-provider\"\nimport { MainContentLayout } from \"@/components/main-content-layout\"\nimport { DynamicBackground } from \"@/components/dynamic-background\"\nimport { AiChatButton } from \"@/components/ai-chat-button\"\nimport { LoadingScreen } from \"@/components/loading-screen\"\n\ninterface RootLayoutClientProps {\n    readonly children: React.ReactNode\n    readonly className?: string\n}\n\nexport function RootLayoutClient({ children, className }: RootLayoutClientProps) {\n    const [isLoading, setIsLoading] = useState(true)\n\n    useEffect(() => {\n        // Giả lập thời gian tải trang\n        const timer = setTimeout(() => {\n            setIsLoading(false)\n        }, 3000)\n\n        return () => clearTimeout(timer)\n    }, [])\n\n    return (\n        <body className={className} suppressHydrationWarning>\n            {isLoading ? (\n                <LoadingScreen\n                    title=\"An Kun Studio\"\n                    subtitle=\"Đang tải trang...\"\n                    duration={3000}\n                    logoUrl=\"\\loading.webm\"\n                    isAnimation={true}\n                    onComplete={() => setIsLoading(false)}\n                />\n            ) : (\n                <ThemeProvider attribute=\"class\" defaultTheme=\"system\" enableSystem>\n                    <AuthProvider>\n                        <DynamicBackground />\n                        <MainContentLayout>\n                            {children}\n                        </MainContentLayout>\n                        <AiChatButton />\n                    </AuthProvider>\n                </ThemeProvider>\n            )}\n        </body>\n    )\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAeO,SAAS,iBAAiB,EAAE,QAAQ,EAAE,SAAS,EAAyB;IAC3E,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,8BAA8B;QAC9B,MAAM,QAAQ,WAAW;YACrB,aAAa;QACjB,GAAG;QAEH,OAAO,IAAM,aAAa;IAC9B,GAAG,EAAE;IAEL,qBACI,8OAAC;QAAK,WAAW;QAAW,wBAAwB;kBAC/C,0BACG,8OAAC,gIAAA,CAAA,gBAAa;YACV,OAAM;YACN,UAAS;YACT,UAAU;YACV,SAAQ;YACR,aAAa;YACb,YAAY,IAAM,aAAa;;;;;iCAGnC,8OAAC,gIAAA,CAAA,gBAAa;YAAC,WAAU;YAAQ,cAAa;YAAS,YAAY;sBAC/D,cAAA,8OAAC,+HAAA,CAAA,eAAY;;kCACT,8OAAC,oIAAA,CAAA,oBAAiB;;;;;kCAClB,8OAAC,wIAAA,CAAA,oBAAiB;kCACb;;;;;;kCAEL,8OAAC,mIAAA,CAAA,eAAY;;;;;;;;;;;;;;;;;;;;;AAMrC","debugId":null}}]
}