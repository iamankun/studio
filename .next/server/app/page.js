(()=>{var a={};a.id=974,a.ids=[974],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32631:(a,b,c)=>{Promise.resolve().then(c.bind(c,52238))},33873:a=>{"use strict";a.exports=require("path")},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},52238:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>b4});var d=c(60687),e=c(14947),f=c(43210),g=c.n(f),h=c(85814),i=c.n(h),j=c(30474),k=c(37897),l=c(10022),m=c(58869),n=c(84027),o=c(18962);let p=(0,o.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var q=c(99891),r=c(41550);let s=(0,o.A)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);var t=c(78272),u=c(3589),v=c(61611),w=c(40083),x=c(11860);let y=(0,o.A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),z=(0,o.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),A=(0,o.A)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),B=(0,o.A)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);var C=c(10218),D=c(24934),E=c(55629);function F(){let{setTheme:a,theme:b}=(0,C.D)(),[c,e]=f.useState(!1);return(f.useEffect(()=>{e(!0)},[]),c)?(0,d.jsxs)(E.rI,{children:[(0,d.jsx)(E.ty,{asChild:!0,children:(0,d.jsxs)(D.$,{variant:"ghost",size:"sm",className:"rounded-full h-8 w-8 p-0",children:[(0,d.jsx)(A,{className:"h-[1rem] w-[1rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,d.jsx)(B,{className:"absolute h-[1rem] w-[1rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,d.jsx)("span",{className:"sr-only",children:"Chuyển giao diện s\xe1ng/tối"})]})}),(0,d.jsxs)(E.SQ,{align:"end",children:[(0,d.jsxs)(E._2,{onClick:()=>a("light"),className:"light"===b?"bg-accent text-accent-foreground":"",children:[(0,d.jsx)(A,{className:"mr-2 h-4 w-4"}),"S\xe1ng"]}),(0,d.jsxs)(E._2,{onClick:()=>a("dark"),className:"dark"===b?"bg-accent text-accent-foreground":"",children:[(0,d.jsx)(B,{className:"mr-2 h-4 w-4"}),"Tối"]}),(0,d.jsxs)(E._2,{onClick:()=>a("system"),className:"system"===b?"bg-accent text-accent-foreground":"",children:[(0,d.jsx)(A,{className:"mr-2 h-4 w-4"}),"Theo hệ thống"]})]})]}):(0,d.jsxs)(D.$,{variant:"ghost",size:"sm",className:"rounded-full h-8 w-8 p-0",children:[(0,d.jsx)("div",{className:"h-[1rem] w-[1rem]"})," "]})}var G=c(70373),H=c(61037);function I({currentView:a,onViewChange:b}){let{user:c,logout:g,showLoginModal:h,showRegisterModal:o}=(0,e.A)(),A=(0,H.a)(),[B,C]=(0,f.useState)(!1),[I,J]=(0,f.useState)(!1),K=[{id:"dashboard",label:"Dashboard",icon:k.A},{id:"submissions",label:"Submissions",icon:l.A},{id:"profile",label:"Hồ sơ",icon:m.A},{id:"settings",label:"C\xe0i đặt",icon:n.A},...c?.role==="Label Manager"?[{id:"users",label:"Quản l\xfd Users",icon:p},{id:"admin",label:"Admin Panel",icon:q.A},{id:"email",label:"Email Center",icon:r.A},{id:"logs",label:"System Logs",icon:l.A}]:[]];return(0,d.jsxs)("nav",{className:`fixed top-0 w-full z-50 bg-background/95 backdrop-blur-sm shadow-sm border-b transition-all duration-300 ${I?"h-12":"h-auto"}`,children:[(0,d.jsxs)("div",{className:"flex justify-between items-center px-4 py-2",children:[(0,d.jsxs)(i(),{href:"/",className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"bg-primary/10 rounded-full p-1.5",children:(0,d.jsx)(j.default,{src:"/face.png",alt:"AKs Studio Logo",className:"h-7 w-7",width:28,height:28})}),!I&&(0,d.jsx)("span",{className:"font-dosis-semibold text-lg whitespace-nowrap ml-1",children:"AKs Studio"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[!I&&c&&(0,d.jsxs)("div",{className:"hidden lg:flex items-center gap-3 mr-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-purple-500/10 rounded-full",children:[(0,d.jsx)(l.A,{className:"h-4 w-4 text-purple-600"}),(0,d.jsx)("span",{className:"text-sm font-medium",children:"0 Submissions"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-blue-500/10 rounded-full",children:[(0,d.jsx)(s,{className:"h-4 w-4 text-blue-600"}),(0,d.jsx)("span",{className:"text-sm font-medium",children:"0 Tracks"})]}),"Label Manager"===c.role&&(0,d.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-orange-500/10 rounded-full",children:[(0,d.jsx)(p,{className:"h-4 w-4 text-orange-600"}),(0,d.jsx)("span",{className:"text-sm font-medium",children:"1 Nghệ sĩ"})]})]}),(0,d.jsx)(D.$,{variant:"ghost",size:"sm",onClick:()=>{J(!I)},className:"hidden md:flex",children:I?(0,d.jsx)(t.A,{className:"h-4 w-4"}):(0,d.jsx)(u.A,{className:"h-4 w-4"})}),c&&(0,d.jsxs)(E.rI,{children:[(0,d.jsx)(E.ty,{asChild:!0,children:(0,d.jsxs)(D.$,{variant:"ghost",size:"sm",className:"flex items-center gap-2 hover:bg-primary/10",children:[(0,d.jsxs)(G.eu,{className:"w-8 h-8",children:[(0,d.jsx)(G.BK,{src:c.avatar||"/face.png",alt:c.fullName||c.username||"User avatar"}),(0,d.jsx)(G.q5,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white font-medium text-sm",children:c.fullName?.charAt(0)||c.username?.charAt(0)||"A"})]}),!I&&(0,d.jsxs)("div",{className:"hidden sm:flex flex-col items-start",children:[(0,d.jsx)("span",{className:"text-sm font-medium leading-none",children:c.fullName||c.username}),(0,d.jsx)("span",{className:"text-xs text-muted-foreground leading-none mt-0.5",children:c.role})]})]})}),(0,d.jsxs)(E.SQ,{className:"w-56",align:"end",forceMount:!0,children:[(0,d.jsx)(E.lp,{className:"font-normal",children:(0,d.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,d.jsx)("p",{className:"text-sm font-medium leading-none",children:c.fullName||c.username}),(0,d.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:c.email||"Kh\xf4ng c\xf3 email"}),(0,d.jsxs)("p",{className:"text-xs leading-none text-muted-foreground",children:["Vai tr\xf2: ",c.role]})]})}),(0,d.jsx)(E.mB,{}),(0,d.jsxs)(E._2,{onClick:()=>b("profile"),children:[(0,d.jsx)(m.A,{className:"mr-2 h-4 w-4"}),(0,d.jsx)("span",{children:"Hồ sơ c\xe1 nh\xe2n"})]}),(0,d.jsxs)(E._2,{onClick:()=>b("settings"),children:[(0,d.jsx)(n.A,{className:"mr-2 h-4 w-4"}),(0,d.jsx)("span",{children:"C\xe0i đặt"})]}),"Label Manager"===c.role&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(E._2,{onClick:()=>b("admin"),children:[(0,d.jsx)(v.A,{className:"mr-2 h-4 w-4"}),(0,d.jsx)("span",{children:"Quản l\xfd hệ thống"})]}),(0,d.jsxs)(E._2,{onClick:()=>b("admin"),children:[(0,d.jsx)(q.A,{className:"mr-2 h-4 w-4"}),(0,d.jsx)("span",{children:"Admin Panel"})]}),(0,d.jsxs)(E._2,{onClick:()=>b("email"),children:[(0,d.jsx)(r.A,{className:"mr-2 h-4 w-4"}),(0,d.jsx)("span",{children:"Email Center"})]}),(0,d.jsxs)(E._2,{onClick:()=>b("logs"),children:[(0,d.jsx)(l.A,{className:"mr-2 h-4 w-4"}),(0,d.jsx)("span",{children:"System Logs"})]})]}),(0,d.jsx)(E.mB,{}),(0,d.jsxs)(E._2,{onClick:g,className:"text-red-600",children:[(0,d.jsx)(w.A,{className:"mr-2 h-4 w-4"}),(0,d.jsx)("span",{children:"Đăng xuất"})]})]})]}),!c&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)(D.$,{variant:"ghost",size:"sm",onClick:h,className:"h-9 px-3 text-muted-foreground hover:text-primary hover:bg-primary/10  transition-all duration-300 border border-transparent hover:border-primary/20 backdrop-blur-sm group relative overflow-hidden",children:[(0,d.jsxs)("span",{className:"relative z-10 flex items-center gap-2",children:[(0,d.jsx)(m.A,{className:"h-4 w-4"}),"Login"]}),(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/0 via-primary/5 to-primary/0  translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-500"})]}),(0,d.jsxs)(D.$,{variant:"outline",size:"sm",onClick:o,className:"h-9 px-3 bg-gradient-to-r from-primary/10 to-purple-600/10  border-primary/30 hover:border-primary/50 text-foreground hover:text-primary hover:bg-gradient-to-r hover:from-primary/20 hover:to-purple-600/20 transition-all duration-300 backdrop-blur-sm group relative overflow-hidden hover:shadow-lg hover:shadow-primary/20",children:[(0,d.jsxs)("span",{className:"relative z-10 flex items-center gap-2",children:[(0,d.jsx)("i",{className:"fas fa-user-plus text-xs"}),"Register"]}),(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/0 via-primary/10 to-primary/0  translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"})]})]}),A&&(0,d.jsx)(D.$,{variant:"ghost",size:"icon",onClick:()=>{C(!B)},className:"md:hidden","aria-expanded":B,"aria-label":"Toggle menu",children:B?(0,d.jsx)(x.A,{className:"h-5 w-5"}):(0,d.jsx)(y,{className:"h-5 w-5"})}),(0,d.jsx)(F,{})]})]}),!I&&(0,d.jsx)("div",{className:`${A?B?"flex":"hidden":"flex"} flex-col md:flex-row items-start md:items-center justify-between px-4 py-1.5 font-dosis mobile-menu-transition border-t border-border/30`,children:(0,d.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-3 w-full md:w-auto",children:[K.map((c,e)=>{let f=c.icon,g=a===c.id;return(0,d.jsxs)(D.$,{variant:g?"secondary":"ghost",size:"sm",className:`rounded-full hover:bg-primary/10 w-full md:w-auto justify-start ${g?"bg-primary/20 text-primary":""}`,onClick:a=>{a.preventDefault(),a.stopPropagation(),console.log(`TopNavBar: Clicked on ${c.id} (index: ${e})`),b(c.id)},children:[(0,d.jsx)(f,{className:"h-[1rem] w-[1rem] mr-1"}),(0,d.jsx)("span",{className:"text-sm",children:c.label})]},`${c.id}-${e}`)}),(0,d.jsx)("div",{className:"hidden md:block w-px h-4 bg-border mx-2"}),(0,d.jsxs)(D.$,{variant:"ghost",size:"sm",className:"rounded-full hover:bg-primary/10 w-full md:w-auto justify-start",onClick:()=>window.history.back(),children:[(0,d.jsx)(z,{className:"h-[1rem] w-[1rem] mr-1"}),(0,d.jsx)("span",{className:"text-sm",children:"Quay lại"})]})]})})]})}var J=c(55192);let K=(0,o.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function L(){let[a,b]=(0,f.useState)({}),[c,g]=(0,f.useState)({username:"ankun",password:"admin123"}),{user:h,login:i,logout:j}=(0,e.A)(),k=async a=>{try{console.log(`Testing ${a}...`);let c=await fetch(a),d=await c.json();console.log(`${a} result:`,d),b(b=>({...b,[a]:{status:c.status,success:c.ok,data:d}}))}catch(c){console.error(`Error testing ${a}:`,c),b(b=>({...b,[a]:{status:"ERROR",success:!1,error:c instanceof Error?c.message:String(c)}}))}},l=async()=>{let a=await i(c.username,c.password);console.log("Login result:",a),b(b=>({...b,"/api/auth/login":{status:a?200:401,success:a,data:a?"Login successful":"Login failed"}}))};return(0,d.jsxs)(J.Zp,{className:"mb-6",children:[(0,d.jsx)(J.aR,{children:(0,d.jsx)(J.ZB,{children:"\uD83D\uDD27 Quick API Debug"})}),(0,d.jsx)(J.Wu,{children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"p-4 bg-blue-50 rounded",children:[(0,d.jsx)("h4",{className:"font-semibold mb-2",children:"\uD83D\uDD10 Login Test"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"text-sm",children:["Current user: ",h?h.username:"Not logged in"]}),(0,d.jsx)(D.$,{onClick:l,size:"sm",children:"Test Login (ankun/admin123)"})]})]}),(0,d.jsx)(D.$,{onClick:()=>{k("/api/artists"),k("/api/submissions"),k("/api/admin/stats"),k("/api/logs"),k("/api/email/stats")},className:"w-full",children:"Test All APIs"}),(0,d.jsx)("div",{className:"space-y-2",children:Object.entries(a).map(([a,b])=>(0,d.jsxs)("div",{className:"p-2 bg-muted rounded text-sm",children:[(0,d.jsxs)("strong",{children:[a,":"]}),(0,d.jsx)("span",{className:b.success?"text-green-600":"text-red-600",children:b.status}),b.data?.count&&(0,d.jsxs)("span",{children:[" - Count: ",b.data.count]}),b.error&&(0,d.jsxs)("span",{className:"text-red-600",children:[" - ",b.error]})]},a))})]})})]})}function M(){let[a,b]=(0,f.useState)({}),[c,e]=(0,f.useState)({}),g=async(a,c,d="GET",f)=>{e(b=>({...b,[a]:!0}));try{let e={method:d,headers:{"Content-Type":"application/json"}};f&&"GET"!==d&&(e.body=JSON.stringify(f)),console.log(`Testing ${a} API...`);let g=await fetch(c,e),h=await g.json();b(b=>({...b,[a]:{status:g.status,statusText:g.statusText,data:h,success:g.ok,timestamp:new Date().toLocaleTimeString()}}))}catch(c){b(b=>({...b,[a]:{error:c instanceof Error?c.message:String(c),success:!1,timestamp:new Date().toLocaleTimeString()}}))}finally{e(b=>({...b,[a]:!1}))}},h=[{name:"Artists",url:"/api/artists"},{name:"Submissions",url:"/api/submissions"},{name:"Auth",url:"/api/auth/login",method:"POST",body:{username:"test",password:"invalid"}}];return(0,d.jsx)("div",{className:"p-6 space-y-4",children:(0,d.jsxs)(J.Zp,{children:[(0,d.jsx)(J.aR,{children:(0,d.jsx)(J.ZB,{children:"\uD83E\uDDEA API Debugger"})}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:h.map(b=>(0,d.jsxs)(D.$,{onClick:()=>g(b.name,b.url,b.method,b.body),disabled:c[b.name],variant:a[b.name]?.success?"default":"outline",children:[c[b.name]?"⏳":"\uD83E\uDDEA"," Test ",b.name]},b.name))}),(0,d.jsx)(D.$,{onClick:()=>h.forEach(a=>g(a.name,a.url,a.method,a.body)),className:"w-full mb-4",children:"\uD83D\uDE80 Test All APIs"}),(0,d.jsx)("div",{className:"space-y-4",children:Object.entries(a).map(([a,b])=>(0,d.jsxs)(J.Zp,{className:`border-2 ${b.success?"border-green-200":"border-red-200"}`,children:[(0,d.jsx)(J.aR,{className:"pb-2",children:(0,d.jsxs)(J.ZB,{className:"text-sm flex justify-between",children:[(0,d.jsxs)("span",{children:[a," API"]}),(0,d.jsx)("span",{className:`text-xs px-2 py-1 rounded ${b.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b.success?"✅ Success":"❌ Failed"})]})}),(0,d.jsx)(J.Wu,{children:(0,d.jsxs)("div",{className:"text-xs space-y-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Time:"})," ",b.timestamp]}),b.status&&(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Status:"})," ",b.status," ",b.statusText]}),b.error&&(0,d.jsxs)("div",{className:"text-red-600",children:[(0,d.jsx)("strong",{children:"Error:"})," ",b.error]}),b.data&&(0,d.jsxs)("details",{children:[(0,d.jsx)("summary",{className:"cursor-pointer font-semibold",children:"Response Data"}),(0,d.jsx)("pre",{className:"mt-2 p-2 bg-gray-100 rounded text-xs overflow-auto",children:JSON.stringify(b.data,null,2)})]})]})})]},a))})]})]})})}function N({onViewChange:a}){let[b,c]=(0,f.useState)({totalSubmissions:0,totalTracks:0,totalArtists:0}),[e,g]=(0,f.useState)(!0);return(0,d.jsxs)("div",{className:"pt-4 p-6 pb-20 bg-background transition-all duration-300",children:[(0,d.jsx)(L,{}),(0,d.jsx)("div",{className:"mb-8 bg-card rounded-lg shadow-sm p-6 border",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Dashboard - Nền tảng ph\xe2n phối nhạc số"}),(0,d.jsx)("p",{className:"text-muted-foreground",children:"Quản l\xfd v\xe0 theo d\xf5i c\xe1c bản ph\xe1t h\xe0nh \xe2m nhạc của bạn"})]})}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,d.jsxs)(J.Zp,{className:"bg-gradient-to-br from-purple-500 to-pink-500 text-white border-0 shadow-lg hover:shadow-xl transition-shadow",children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium opacity-90",children:"Tổng Submissions"}),(0,d.jsx)(l.A,{className:"h-5 w-5 opacity-80"})]}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"text-3xl font-bold",children:e?"...":b.totalSubmissions}),(0,d.jsx)("p",{className:"text-xs opacity-80 mt-1",children:0===b.totalSubmissions?"Chưa c\xf3 submission n\xe0o":`${b.totalSubmissions} submissions`})]})]}),(0,d.jsxs)(J.Zp,{className:"bg-gradient-to-br from-blue-500 to-cyan-500 text-white border-0 shadow-lg hover:shadow-xl transition-shadow",children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium opacity-90",children:"Tracks Đ\xe3 Ph\xe1t H\xe0nh"}),(0,d.jsx)(s,{className:"h-5 w-5 opacity-80"})]}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"text-3xl font-bold",children:e?"...":b.totalTracks}),(0,d.jsx)("p",{className:"text-xs opacity-80 mt-1",children:0===b.totalTracks?"Chưa c\xf3 track n\xe0o":"Sẵn s\xe0ng ph\xe1t h\xe0nh"})]})]}),(0,d.jsxs)(J.Zp,{className:"bg-gradient-to-br from-green-500 to-emerald-500 text-white border-0 shadow-lg hover:shadow-xl transition-shadow",children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium opacity-90",children:"Upload Nhanh"}),(0,d.jsx)(K,{className:"h-5 w-5 opacity-80"})]}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"text-3xl font-bold",children:"Sẵn S\xe0ng"}),(0,d.jsx)("p",{className:"text-xs opacity-80 mt-1",children:"Tải nhạc l\xean ngay"})]})]}),(0,d.jsxs)(J.Zp,{className:"bg-gradient-to-br from-orange-500 to-red-500 text-white border-0 shadow-lg hover:shadow-xl transition-shadow",children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium opacity-90",children:"Nghệ Sĩ"}),(0,d.jsx)(p,{className:"h-5 w-5 opacity-80"})]}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"text-3xl font-bold",children:e?"...":b.totalArtists}),(0,d.jsx)("p",{className:"text-xs opacity-80 mt-1",children:"Nghệ sĩ đang hoạt động"})]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,d.jsxs)(J.Zp,{className:"shadow-sm border",children:[(0,d.jsx)(J.aR,{className:"border-b",children:(0,d.jsxs)(J.ZB,{className:"text-foreground flex items-center space-x-2",children:[(0,d.jsx)(l.A,{className:"h-5 w-5 text-primary"}),(0,d.jsx)("span",{children:"Hoạt Động Gần Đ\xe2y"})]})}),(0,d.jsx)(J.Wu,{className:"p-6",children:(0,d.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:(0,d.jsx)(l.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,d.jsx)("h3",{className:"font-medium text-foreground mb-2",children:"Chưa c\xf3 hoạt động n\xe0o"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Tải l\xean track đầu ti\xean để bắt đầu!"}),(0,d.jsx)("button",{className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm hover:bg-primary/90 transition-colors",onClick:()=>a?.("upload"),children:"Bắt Đầu Upload"})]})})]}),(0,d.jsxs)(J.Zp,{className:"shadow-sm border",children:[(0,d.jsx)(J.aR,{className:"border-b",children:(0,d.jsxs)(J.ZB,{className:"text-foreground flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,d.jsx)("span",{children:"Trạng Th\xe1i Hệ Thống"})]})}),(0,d.jsx)(J.Wu,{className:"p-6",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-500/10 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,d.jsx)("span",{className:"font-medium text-foreground",children:"Nền Tảng"})]}),(0,d.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Trực Tuyến"})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-500/10 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,d.jsx)("span",{className:"font-medium text-foreground",children:"Dịch Vụ Upload"})]}),(0,d.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Sẵn S\xe0ng"})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-500/10 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,d.jsx)("span",{className:"font-medium text-foreground",children:"Ph\xe2n Phối"})]}),(0,d.jsx)("span",{className:"text-sm text-yellow-600 font-medium",children:"Chế Độ Demo"})]})]})})]})]}),(0,d.jsx)("div",{className:"mt-8",children:(0,d.jsxs)(J.Zp,{children:[(0,d.jsx)(J.aR,{children:(0,d.jsx)(J.ZB,{children:"\uD83D\uDD27 API Debug Tool"})}),(0,d.jsx)(J.Wu,{children:(0,d.jsx)(M,{})})]})})]})}var O=c(68988),P=c(63974),Q=c(39390),R=c(15616),S=c(98599),T=c(11273),U=c(70569),V=c(65551),W=c(83721),X=c(18853),Y=c(46059),Z=c(14163),$="Checkbox",[_,aa]=(0,T.A)($),[ab,ac]=_($);function ad(a){let{__scopeCheckbox:b,checked:c,children:e,defaultChecked:g,disabled:h,form:i,name:j,onCheckedChange:k,required:l,value:m="on",internal_do_not_use_render:n}=a,[o,p]=(0,V.i)({prop:c,defaultProp:g??!1,onChange:k,caller:$}),[q,r]=f.useState(null),[s,t]=f.useState(null),u=f.useRef(!1),v=!q||!!i||!!q.closest("form"),w={checked:o,disabled:h,setChecked:p,control:q,setControl:r,name:j,form:i,value:m,hasConsumerStoppedPropagationRef:u,required:l,defaultChecked:!al(g)&&g,isFormControl:v,bubbleInput:s,setBubbleInput:t};return(0,d.jsx)(ab,{scope:b,...w,children:"function"==typeof n?n(w):e})}var ae="CheckboxTrigger",af=f.forwardRef(({__scopeCheckbox:a,onKeyDown:b,onClick:c,...e},g)=>{let{control:h,value:i,disabled:j,checked:k,required:l,setControl:m,setChecked:n,hasConsumerStoppedPropagationRef:o,isFormControl:p,bubbleInput:q}=ac(ae,a),r=(0,S.s)(g,m),s=f.useRef(k);return f.useEffect(()=>{let a=h?.form;if(a){let b=()=>n(s.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[h,n]),(0,d.jsx)(Z.sG.button,{type:"button",role:"checkbox","aria-checked":al(k)?"mixed":k,"aria-required":l,"data-state":am(k),"data-disabled":j?"":void 0,disabled:j,value:i,...e,ref:r,onKeyDown:(0,U.m)(b,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:(0,U.m)(c,a=>{n(a=>!!al(a)||!a),q&&p&&(o.current=a.isPropagationStopped(),o.current||a.stopPropagation())})})});af.displayName=ae;var ag=f.forwardRef((a,b)=>{let{__scopeCheckbox:c,name:e,checked:f,defaultChecked:g,required:h,disabled:i,value:j,onCheckedChange:k,form:l,...m}=a;return(0,d.jsx)(ad,{__scopeCheckbox:c,checked:f,defaultChecked:g,disabled:i,required:h,onCheckedChange:k,name:e,form:l,value:j,internal_do_not_use_render:({isFormControl:a})=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(af,{...m,ref:b,__scopeCheckbox:c}),a&&(0,d.jsx)(ak,{__scopeCheckbox:c})]})})});ag.displayName=$;var ah="CheckboxIndicator",ai=f.forwardRef((a,b)=>{let{__scopeCheckbox:c,forceMount:e,...f}=a,g=ac(ah,c);return(0,d.jsx)(Y.C,{present:e||al(g.checked)||!0===g.checked,children:(0,d.jsx)(Z.sG.span,{"data-state":am(g.checked),"data-disabled":g.disabled?"":void 0,...f,ref:b,style:{pointerEvents:"none",...a.style}})})});ai.displayName=ah;var aj="CheckboxBubbleInput",ak=f.forwardRef(({__scopeCheckbox:a,...b},c)=>{let{control:e,hasConsumerStoppedPropagationRef:g,checked:h,defaultChecked:i,required:j,disabled:k,name:l,value:m,form:n,bubbleInput:o,setBubbleInput:p}=ac(aj,a),q=(0,S.s)(c,p),r=(0,W.Z)(h),s=(0,X.X)(e);f.useEffect(()=>{if(!o)return;let a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,b=!g.current;if(r!==h&&a){let c=new Event("click",{bubbles:b});o.indeterminate=al(h),a.call(o,!al(h)&&h),o.dispatchEvent(c)}},[o,r,h,g]);let t=f.useRef(!al(h)&&h);return(0,d.jsx)(Z.sG.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??t.current,required:j,disabled:k,name:l,value:m,form:n,...b,tabIndex:-1,ref:q,style:{...b.style,...s,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function al(a){return"indeterminate"===a}function am(a){return al(a)?"indeterminate":a?"checked":"unchecked"}ak.displayName=aj;var an=c(13964),ao=c(96241);let ap=f.forwardRef(({className:a,...b},c)=>(0,d.jsx)(ag,{ref:c,className:(0,ao.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...b,children:(0,d.jsx)(ai,{className:(0,ao.cn)("flex items-center justify-center text-current"),children:(0,d.jsx)(an.A,{className:"h-4 w-4"})})}));ap.displayName=ag.displayName;var aq=c(72942),ar=c(43),as="Radio",[at,au]=(0,T.A)(as),[av,aw]=at(as),ax=f.forwardRef((a,b)=>{let{__scopeRadio:c,name:e,checked:g=!1,required:h,disabled:i,value:j="on",onCheck:k,form:l,...m}=a,[n,o]=f.useState(null),p=(0,S.s)(b,a=>o(a)),q=f.useRef(!1),r=!n||l||!!n.closest("form");return(0,d.jsxs)(av,{scope:c,checked:g,disabled:i,children:[(0,d.jsx)(Z.sG.button,{type:"button",role:"radio","aria-checked":g,"data-state":aB(g),"data-disabled":i?"":void 0,disabled:i,value:j,...m,ref:p,onClick:(0,U.m)(a.onClick,a=>{g||k?.(),r&&(q.current=a.isPropagationStopped(),q.current||a.stopPropagation())})}),r&&(0,d.jsx)(aA,{control:n,bubbles:!q.current,name:e,value:j,checked:g,required:h,disabled:i,form:l,style:{transform:"translateX(-100%)"}})]})});ax.displayName=as;var ay="RadioIndicator",az=f.forwardRef((a,b)=>{let{__scopeRadio:c,forceMount:e,...f}=a,g=aw(ay,c);return(0,d.jsx)(Y.C,{present:e||g.checked,children:(0,d.jsx)(Z.sG.span,{"data-state":aB(g.checked),"data-disabled":g.disabled?"":void 0,...f,ref:b})})});az.displayName=ay;var aA=f.forwardRef(({__scopeRadio:a,control:b,checked:c,bubbles:e=!0,...g},h)=>{let i=f.useRef(null),j=(0,S.s)(i,h),k=(0,W.Z)(c),l=(0,X.X)(b);return f.useEffect(()=>{let a=i.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(k!==c&&b){let d=new Event("click",{bubbles:e});b.call(a,c),a.dispatchEvent(d)}},[k,c,e]),(0,d.jsx)(Z.sG.input,{type:"radio","aria-hidden":!0,defaultChecked:c,...g,tabIndex:-1,ref:j,style:{...g.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function aB(a){return a?"checked":"unchecked"}aA.displayName="RadioBubbleInput";var aC=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],aD="RadioGroup",[aE,aF]=(0,T.A)(aD,[aq.RG,au]),aG=(0,aq.RG)(),aH=au(),[aI,aJ]=aE(aD),aK=f.forwardRef((a,b)=>{let{__scopeRadioGroup:c,name:e,defaultValue:f,value:g,required:h=!1,disabled:i=!1,orientation:j,dir:k,loop:l=!0,onValueChange:m,...n}=a,o=aG(c),p=(0,ar.jH)(k),[q,r]=(0,V.i)({prop:g,defaultProp:f??null,onChange:m,caller:aD});return(0,d.jsx)(aI,{scope:c,name:e,required:h,disabled:i,value:q,onValueChange:r,children:(0,d.jsx)(aq.bL,{asChild:!0,...o,orientation:j,dir:p,loop:l,children:(0,d.jsx)(Z.sG.div,{role:"radiogroup","aria-required":h,"aria-orientation":j,"data-disabled":i?"":void 0,dir:p,...n,ref:b})})})});aK.displayName=aD;var aL="RadioGroupItem",aM=f.forwardRef((a,b)=>{let{__scopeRadioGroup:c,disabled:e,...g}=a,h=aJ(aL,c),i=h.disabled||e,j=aG(c),k=aH(c),l=f.useRef(null),m=(0,S.s)(b,l),n=h.value===g.value,o=f.useRef(!1);return f.useEffect(()=>{let a=a=>{aC.includes(a.key)&&(o.current=!0)},b=()=>o.current=!1;return document.addEventListener("keydown",a),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",a),document.removeEventListener("keyup",b)}},[]),(0,d.jsx)(aq.q7,{asChild:!0,...j,focusable:!i,active:n,children:(0,d.jsx)(ax,{disabled:i,required:h.required,checked:n,...k,...g,name:h.name,ref:m,onCheck:()=>h.onValueChange(g.value),onKeyDown:(0,U.m)(a=>{"Enter"===a.key&&a.preventDefault()}),onFocus:(0,U.m)(g.onFocus,()=>{o.current&&l.current?.click()})})})});aM.displayName=aL;var aN=f.forwardRef((a,b)=>{let{__scopeRadioGroup:c,...e}=a,f=aH(c);return(0,d.jsx)(az,{...f,...e,ref:b})});aN.displayName="RadioGroupIndicator";var aO=c(65822);let aP=f.forwardRef(({className:a,...b},c)=>(0,d.jsx)(aK,{className:(0,ao.cn)("grid gap-2",a),...b,ref:c}));aP.displayName=aK.displayName;let aQ=f.forwardRef(({className:a,...b},c)=>(0,d.jsx)(aM,{ref:c,className:(0,ao.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...b,children:(0,d.jsx)(aN,{className:"flex items-center justify-center",children:(0,d.jsx)(aO.A,{className:"h-2.5 w-2.5 fill-current text-current"})})}));aQ.displayName=aM.displayName;var aR=c(85910),aS=c(69804),aT=function(a){return a.PENDING="PENDING",a.APPROVED="APPROVED",a.REJECTED="REJECTED",a.PROCESSING="PROCESSING",a.PUBLISHED="PUBLISHED",a.CANCELLED="CANCELLED",a.DRAFT="DRAFT",a}({}),aU=function(a){return a.SINGLE="SINGLE",a.EP="EP",a.ALBUM="ALBUM",a.COMPILATION="COMPILATION",a}({});let aV=(0,o.A)("Disc3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M6 12c0-1.7.7-3.2 1.8-4.2",key:"oqkarx"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M18 12c0 1.7-.7 3.2-1.8 4.2",key:"1eah9h"}]]),aW=(0,o.A)("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),aX=(0,o.A)("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),aY=(0,o.A)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);var aZ=c(88233);let a$=(0,o.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var a_=c(46234);class a0{constructor(){this.apiAvailable=!0,console.log("DatabaseApiService: Initialized (Production Only - API Based)")}normalizeSubmissions(a){return a.map(a=>{let b=a.artist_name??a.artists??"";return b&&""!==b.trim()?b.split(/[,&]|feat\.|featuring|ft\./gi).length>3&&(b="Various Artist"):b="Various Artist",{...a,cover_art_url:a.cover_art_url??a.artwork_path??"/dianhac.jpg",artwork_path:a.artwork_path??a.cover_art_url??"/dianhac.jpg",imageUrl:a.imageUrl??a.cover_art_url??a.artwork_path??"/dianhac.jpg",audio_file_url:a.audio_file_url??a.file_path??"/VNA2P25XXXXX.wav",file_path:a.file_path??a.audio_file_url??"/VNA2P25XXXXX.wav",audioUrl:a.audioUrl??a.audio_file_url??a.file_path??"/VNA2P25XXXXX.wav",track_title:a.track_title??a.title??"Untitled Track",artist_name:b,status:a.status??"pending",genre:a.genre??"Unknown",submission_date:a.submission_date??a.created_at??new Date().toISOString()}})}async initialize(){console.log("✅ Database API Service initialized (API-based)")}async authenticateUser(a,b){a_.v.info("DatabaseApiService: Authentication attempt",{component:"DatabaseApiService",action:"authenticateUser",data:{username:a}});try{let c=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:b})}),d=await c.json();if(d.success)return a_.v.info("DatabaseApiService: Authentication successful",{component:"DatabaseApiService",action:"authenticateUser",userId:d.user?.id}),console.log(`✅ API authentication successful for ${d.user?.role}`),{success:!0,data:d.user,source:"API"};return a_.v.error("DatabaseApiService: Authentication failed",{component:"DatabaseApiService",action:"authenticateUser",error:d.message}),{success:!1,message:d.message??"Authentication failed"}}catch(b){let a=b instanceof Error?b.message:"Unknown error";return a_.v.error("DatabaseApiService: Authentication error",{component:"DatabaseApiService",action:"authenticateUser",error:a}),console.error("API auth failed:",b),{success:!1,message:"Authentication service unavailable.",error:a}}}async createUser(a){let{username:b,email:c,password:d,fullName:e}=a;if(!b||!c||!d||!e)return{success:!1,message:"Missing required fields for user creation."};try{let a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:b,email:c,password:d,fullName:e})}),f=await a.json();if(f.success)return{success:!0,data:f.user,source:"API"};return{success:!1,message:f.message??"User creation failed"}}catch(a){return console.error("API createUser failed:",a),{success:!1,message:"User creation service unavailable."}}}async getArtists(){try{let a=await fetch("/api/artists"),b=await a.json();if(b.success)return{success:!0,data:b.data,source:"API"};return{success:!1,data:[],message:b.error??"Failed to retrieve artists"}}catch(a){return console.error("API: Failed to get artists:",a),{success:!1,data:[],message:"Artist service unavailable."}}}async updateArtistProfile(a,b){try{let c=await fetch("/api/profile/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a,role:"Artist",...b})}),d=await c.json();if(d.success)return{success:!0,data:d.data,source:"API"};return{success:!1,message:d.error??"Artist profile update failed"}}catch(a){return console.error("API: Failed to update artist profile:",a),{success:!1,message:"Artist profile update service unavailable."}}}async updateLabelManagerProfile(a,b){try{let c=await fetch("/api/profile/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a,role:"Label Manager",...b})}),d=await c.json();if(d.success)return{success:!0,data:d.data,source:"API"};return{success:!1,message:d.error??"Label Manager profile update failed"}}catch(a){return console.error("API: Failed to update label manager profile:",a),{success:!1,message:"Label Manager profile update service unavailable."}}}async getUserAvatar(a,b){try{let c=b?`?type=${b}`:"",d=await fetch(`/api/images/avatar/${a}${c}`),e=await d.json();if(e.success)return{success:!0,data:e.data,source:"API"};return{success:!1,message:e.error??"Failed to get user avatar"}}catch(a){return console.error("API: Failed to get user avatar:",a),{success:!1,message:"Avatar service unavailable."}}}async updateUserAvatar(a,b){try{let c=new FormData;c.append("file",b.file),c.append("artistName",b.artistName),c.append("userId",a);let d=await fetch("/api/upload/avatar",{method:"POST",body:c}),e=await d.json();if(e.success)return{success:!0,data:{url:e.url,path:e.path},source:"API"};return{success:!1,message:e.error??"Failed to update user avatar"}}catch(a){return console.error("API: Failed to update user avatar:",a),{success:!1,message:"Avatar update service unavailable."}}}async getSubmissions(a){a_.v.info("DatabaseApiService: Getting submissions",{component:"DatabaseApiService",action:"getSubmissions",data:{username:a}});try{let b=a?`?username=${a}`:"",c=await fetch(`/api/submissions${b}`),d=await c.json();if(!d.success)return{success:!1,data:[],message:d.error??"Failed to retrieve submissions"};{let a=this.normalizeSubmissions(d.data);return{success:!0,data:a,source:"API"}}}catch(b){let a=b instanceof Error?b.message:"Unknown error";return a_.v.error("DatabaseApiService: Get submissions error",{component:"DatabaseApiService",action:"getSubmissions",error:a}),console.error("API: Failed to get submissions:",b),{success:!1,data:[],message:"Submission service unavailable.",error:a}}}async getSubmissionById(a){try{let b=await fetch(`/api/submissions/${a}`),c=await b.json();if(c.success)return{success:!0,data:c.data,source:"API"};return{success:!1,message:c.error??"Failed to get submission"}}catch(a){return console.error("API: Failed to get submission by ID:",a),{success:!1,message:"Submission service unavailable."}}}async createSubmission(a){a_.v.info("DatabaseApiService: Creating submission",{component:"DatabaseApiService",action:"createSubmission"});try{let b=await fetch("/api/submissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();if(c.success)return a_.v.info("DatabaseApiService: Submission created",{component:"DatabaseApiService",action:"createSubmission",submissionId:c.data?.id}),{success:!0,data:c.data,source:"API"};return a_.v.error("DatabaseApiService: Create submission failed",{component:"DatabaseApiService",action:"createSubmission",error:c.error}),{success:!1,message:c.error??"Create submission failed"}}catch(b){let a=b instanceof Error?b.message:"Unknown error";return a_.v.error("DatabaseApiService: Create submission error",{component:"DatabaseApiService",action:"createSubmission",error:a}),{success:!1,message:"Create submission service unavailable.",error:a}}}async saveSubmission(a){let b=await this.createSubmission(a);return b.success&&b.data?{success:!0,data:b.data.id,source:b.source}:{success:!1,error:b.message}}async updateSubmission(a,b){a_.v.info("DatabaseApiService: Updating submission",{component:"DatabaseApiService",action:"updateSubmission",data:{id:a}});try{let c=await fetch(`/api/submissions/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),d=await c.json();if(d.success)return a_.v.info("DatabaseApiService: Submission updated",{component:"DatabaseApiService",action:"updateSubmission",submissionId:a}),{success:!0,data:d.data,source:"API"};return a_.v.error("DatabaseApiService: Submission update failed",{component:"DatabaseApiService",action:"updateSubmission",error:d.error}),{success:!1,message:d.error??"Update failed"}}catch(b){let a=b instanceof Error?b.message:"Unknown error";return a_.v.error("DatabaseApiService: Update submission error",{component:"DatabaseApiService",action:"updateSubmission",error:a}),console.error("API: Failed to update submission:",b),{success:!1,message:"Update service unavailable.",error:a}}}async updateSubmissionStatus(a,b){a_.v.info("DatabaseApiService: Updating submission status",{component:"DatabaseApiService",action:"updateSubmissionStatus",data:{id:a,status:b}});try{let c=await fetch(`/api/submissions/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:b})}),d=await c.json();if(d.success)return{success:!0,data:!0,source:"API"};return{success:!1,message:d.error??"Update status failed"}}catch(b){let a=b instanceof Error?b.message:"Unknown error";return a_.v.error("DatabaseApiService: Update submission status error",{component:"DatabaseApiService",action:"updateSubmissionStatus",error:a}),{success:!1,message:"Update status service unavailable.",error:a}}}async deleteSubmission(a){a_.v.info("DatabaseApiService: Deleting submission",{component:"DatabaseApiService",action:"deleteSubmission",data:{id:a}});try{let b=await fetch(`/api/submissions/${a}`,{method:"DELETE"}),c=await b.json();if(c.success)return a_.v.info("DatabaseApiService: Submission deleted",{component:"DatabaseApiService",action:"deleteSubmission",submissionId:a}),{success:!0,data:!0,source:"API"};return a_.v.error("DatabaseApiService: Submission deletion failed",{component:"DatabaseApiService",action:"deleteSubmission",error:c.error}),{success:!1,message:c.error??"Deletion failed"}}catch(b){let a=b instanceof Error?b.message:"Unknown error";return a_.v.error("DatabaseApiService: Delete submission error",{component:"DatabaseApiService",action:"deleteSubmission",error:a}),{success:!1,message:"Delete service unavailable.",error:a}}}async createTrack(a){a_.v.info("DatabaseApiService: Creating track",{component:"DatabaseApiService",action:"createTrack",data:{submissionId:a.submissionId,title:a.title}});try{let b=await fetch("/api/tracks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();if(c.success)return a_.v.info("DatabaseApiService: Track created",{component:"DatabaseApiService",action:"createTrack",trackId:c.data?.id}),{success:!0,data:c.data,source:"API"};return a_.v.error("DatabaseApiService: Create track failed",{component:"DatabaseApiService",action:"createTrack",error:c.error}),{success:!1,message:c.error??"Create track failed"}}catch(b){let a=b instanceof Error?b.message:"Unknown error";return a_.v.error("DatabaseApiService: Create track error",{component:"DatabaseApiService",action:"createTrack",error:a}),{success:!1,message:"Create track service unavailable.",error:a}}}async updateTrack(a,b){a_.v.info("DatabaseApiService: Updating track",{component:"DatabaseApiService",action:"updateTrack",data:{trackId:a}});try{let c=await fetch(`/api/tracks/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),d=await c.json();if(d.success)return a_.v.info("DatabaseApiService: Track updated",{component:"DatabaseApiService",action:"updateTrack",trackId:a}),{success:!0,data:d.data,source:"API"};return a_.v.error("DatabaseApiService: Track update failed",{component:"DatabaseApiService",action:"updateTrack",error:d.error}),{success:!1,message:d.error??"Update track failed"}}catch(b){let a=b instanceof Error?b.message:"Unknown error";return a_.v.error("DatabaseApiService: Update track error",{component:"DatabaseApiService",action:"updateTrack",error:a}),{success:!1,message:"Update track service unavailable.",error:a}}}async getTracksBySubmissionId(a){a_.v.info("DatabaseApiService: Getting tracks by submission ID",{component:"DatabaseApiService",action:"getTracksBySubmissionId",data:{submissionId:a}});try{let b=await fetch(`/api/submissions/${a}/tracks`),c=await b.json();if(c.success)return{success:!0,data:c.data,source:"API"};return{success:!1,data:[],message:c.error??"Failed to get tracks"}}catch(b){let a=b instanceof Error?b.message:"Unknown error";return a_.v.error("DatabaseApiService: Get tracks by submission ID error",{component:"DatabaseApiService",action:"getTracksBySubmissionId",error:a}),{success:!1,data:[],message:"Get tracks service unavailable.",error:a}}}async getTrackById(a){try{let b=await fetch(`/api/tracks/${a}`),c=await b.json();if(c.success)return{success:!0,data:c.data,source:"API"};return{success:!1,message:c.error??"Failed to get track"}}catch(a){return console.error("API: Failed to get track by ID:",a),{success:!1,message:"Track service unavailable."}}}async deleteTrack(a){a_.v.info("DatabaseApiService: Deleting track",{component:"DatabaseApiService",action:"deleteTrack",data:{trackId:a}});try{let b=await fetch(`/api/tracks/${a}`,{method:"DELETE"}),c=await b.json();if(c.success)return a_.v.info("DatabaseApiService: Track deleted",{component:"DatabaseApiService",action:"deleteTrack",trackId:a}),{success:!0,data:!0,source:"API"};return a_.v.error("DatabaseApiService: Track deletion failed",{component:"DatabaseApiService",action:"deleteTrack",error:c.error}),{success:!1,message:c.error??"Track deletion failed"}}catch(b){let a=b instanceof Error?b.message:"Unknown error";return a_.v.error("DatabaseApiService: Delete track error",{component:"DatabaseApiService",action:"deleteTrack",error:a}),{success:!1,message:"Delete track service unavailable.",error:a}}}async createSubmissionWithTracks(a,b){a_.v.info("DatabaseApiService: Creating submission with tracks",{component:"DatabaseApiService",action:"createSubmissionWithTracks",data:{title:a.title,trackCount:b.length}});try{let c=await fetch("/api/submissions/with-tracks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submission:a,tracks:b})}),d=await c.json();if(d.success)return a_.v.info("DatabaseApiService: Submission with tracks created",{component:"DatabaseApiService",action:"createSubmissionWithTracks",submissionId:d.data?.submission?.id}),{success:!0,data:d.data,source:"API"};return a_.v.error("DatabaseApiService: Create submission with tracks failed",{component:"DatabaseApiService",action:"createSubmissionWithTracks",error:d.error}),{success:!1,message:d.error??"Create submission with tracks failed"}}catch(b){let a=b instanceof Error?b.message:"Unknown error";return a_.v.error("DatabaseApiService: Create submission with tracks error",{component:"DatabaseApiService",action:"createSubmissionWithTracks",error:a}),{success:!1,message:"Create submission with tracks service unavailable.",error:a}}}async createSubmissionFromLegacy(a){try{var b;let{submission:c,tracks:d}={submission:{id:(b=a).id,title:b.songTitle,artist:b.artistName,UPC:b.upc||null,type:{single:"SINGLE",ep:"EP",lp:"ALBUM",album:"ALBUM",compilation:"COMPILATION"}[b.releaseType]||"SINGLE",coverImagePath:b.imageFile||b.imageUrl,releaseDate:new Date(b.releaseDate),status:{pending:"PENDING",approved:"APPROVED",rejected:"REJECTED",processing:"PROCESSING",published:"PUBLISHED",cancelled:"CANCELLED",draft:"DRAFT","Đ\xe3 nhận, đang chờ duyệt":"PENDING","Đ\xe3 duyệt, từ chối ph\xe1t h\xe0nh":"REJECTED","Đ\xe3 duyệt, đang chờ ph\xe1t h\xe0nh!":"APPROVED","Đ\xe3 ph\xe1t h\xe0nh, đang chờ ra mắt":"PROCESSING","Ho\xe0n th\xe0nh ph\xe1t h\xe0nh!":"PUBLISHED","Đ\xe3 hủy":"CANCELLED","Bản nh\xe1p":"DRAFT"}[b.status]||"PENDING",metadataLocked:b.metadataLocked||!1,published:b.published||!1,albumName:b.albumName||null,mainCategory:b.mainCategory||null,subCategory:b.subCategory||null,platforms:b.platforms?{platforms:b.platforms}:null,distributionLink:b.distributionLink||null,distributionPlatforms:b.distributionPlatforms?{platforms:b.distributionPlatforms}:null,statusVietnamese:b.statusVietnamese||null,rejectionReason:b.rejectionReason||null,notes:b.notes||null,signedDocumentPath:null,signedAt:null,signerFullName:null,isDocumentSigned:!1,userId:b.userId,labelId:b.labelId||""},tracks:b.trackInfos?.map(a=>({title:a.songTitle,artist:a.artistName,filePath:a.filePath||"",duration:a.duration||0,isrc:a.isrc||null,fileName:a.fileName||null,artistFullName:a.artistFullName||null,fileSize:a.fileSize||null,format:a.format||null,bitrate:a.bitrate||null,sampleRate:a.sampleRate||null,mainCategory:null,subCategory:null,lyrics:null}))||[]};return await this.createSubmissionWithTracks(c,d)}catch(b){let a=b instanceof Error?b.message:"Unknown error";return a_.v.error("DatabaseApiService: Create submission from legacy error",{component:"DatabaseApiService",action:"createSubmissionFromLegacy",error:a}),{success:!1,message:"Legacy submission conversion failed.",error:a}}}async getVideos(a){try{let b=a?`?${new URLSearchParams(a).toString()}`:"",c=await fetch(`/api/videos${b}`),d=await c.json();return d.success?{success:!0,data:d.data,source:"API"}:{success:!1,data:[],message:d.error??"Failed to get videos"}}catch(a){return console.error("API: Failed to get videos:",a),{success:!1,data:[],message:"Video service unavailable."}}}async saveVideo(a){try{let b=await fetch("/api/videos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();return c.success?{success:!0,data:c.data?.id,source:"API"}:{success:!1,message:c.error??"Save video failed"}}catch(a){return{success:!1,message:"Save video service unavailable.",error:a instanceof Error?a.message:"Unknown error"}}}async getFiles(a){try{let b=a?`?folderId=${a}`:"",c=await fetch(`/api/files${b}`),d=await c.json();return d.success?{success:!0,data:d.data,source:"API"}:{success:!1,data:[],message:d.error??"Failed to get files"}}catch(a){return console.error("API: Failed to get files:",a),{success:!1,data:[],message:"File service unavailable."}}}async getFolders(a){try{let b=a?`?parentId=${a}`:"",c=await fetch(`/api/folders${b}`),d=await c.json();return d.success?{success:!0,data:d.data,source:"API"}:{success:!1,data:[],message:d.error??"Failed to get folders"}}catch(a){return console.error("API: Failed to get folders:",a),{success:!1,data:[],message:"Folder service unavailable."}}}async getStatus(){try{let a=await fetch("http://localhost:3000/api/database-status"),b=await a.json();return{api:this.apiAvailable,prisma:b.success,database:b.success}}catch(a){return console.error("API: Failed to get status:",a),{api:!1,prisma:!1,database:!1}}}async testConnection(){a_.v.info("DatabaseApiService: Testing connection",{component:"DatabaseApiService",action:"testConnection"});try{let a=await fetch("http://localhost:3000/api/database-status"),b=await a.json();return{success:b.success,data:b.success,source:"API"}}catch(b){let a=b instanceof Error?b.message:"Unknown error";return console.error("❌ Database connection test failed:",a),{success:!1,message:"Connection test failed.",error:a}}}}let a1=new a0;function a2({onSubmissionAdded:a,showModal:b}){let{user:c}=(0,e.A)(),[g,h]=(0,f.useState)(""),[i,j]=(0,f.useState)(""),[k,l]=(0,f.useState)("singer"),[n,o]=(0,f.useState)(""),[p,q]=(0,f.useState)(""),[r,s]=(0,f.useState)(""),[t,u]=(0,f.useState)("pop"),[v,w]=(0,f.useState)("official"),[y,z]=(0,f.useState)("single"),[A,B]=(0,f.useState)("yes"),[C,E]=(0,f.useState)("no"),[G,H]=(0,f.useState)([]),[I,L]=(0,f.useState)("no"),[M,N]=(0,f.useState)(""),[S,T]=(0,f.useState)(""),[U,V]=(0,f.useState)(!1),[W,X]=(0,f.useState)(1e3),[Y,Z]=(0,f.useState)(null),[$,_]=(0,f.useState)(""),[aa,ab]=(0,f.useState)([]),[ac,ad]=(0,f.useState)(null),ae=(0,f.useRef)({});if(!c)return(0,d.jsx)("div",{className:"p-6 min-h-screen flex items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Đang tải th\xf4ng tin"}),(0,d.jsx)("p",{className:"text-gray-500",children:"Vui l\xf2ng chờ trong gi\xe2y l\xe1t..."})]})});let af=(a,b,c,d)=>{ab(e=>e.map(e=>e.id===a?{...e,info:{...e.info,additionalArtists:e.info.additionalArtists.map((a,e)=>e===b?{...a,[c]:d}:a)}}:e))},ag=async a=>{let{files:c}=a.target,d=c?.[0];if(d)try{let a=await (0,ao.Wl)(d);if(!a.valid)return void b("Lỗi",a.errors,"error");Z(d),_(URL.createObjectURL(d))}catch(a){b("Lỗi",["C\xf3 lỗi xảy ra khi tải ảnh"],"error")}},ah=async()=>{let d=[];n.trim()||d.push("Vui l\xf2ng nhập t\xean b\xe0i h\xe1t"),i.trim()||d.push("Vui l\xf2ng nhập t\xean nghệ sĩ"),g.trim()||d.push("Vui l\xf2ng nhập họ t\xean đầy đủ"),r.trim()||d.push("Vui l\xf2ng nhập email"),r.includes("@")||d.push("Email kh\xf4ng hợp lệ"),0===aa.length&&d.push("Vui l\xf2ng upload \xedt nhất một file nhạc"),Y||d.push("Vui l\xf2ng upload ảnh b\xeca"),S||d.push("Vui l\xf2ng chọn ng\xe0y ph\xe1t h\xe0nh");let e=aa.filter(a=>!a.info.songTitle.trim());if(e.length>0&&d.push(`${e.length} track chưa c\xf3 t\xean b\xe0i h\xe1t`),aa.forEach(a=>{a.info.additionalArtists.forEach((b,c)=>{b.name.trim()||d.push(`Track "${a.info.songTitle}": Nghệ sĩ phối hợp #${c+1} chưa c\xf3 t\xean`)})}),d.length>0)return void b("Lỗi",d,"error");V(!0);try{let d;(0,aS.Pv)("form","upload-submission-form",{trackCount:aa.length,hasImage:!!Y,mainCategory:t,subCategory:v,releaseType:y}),d=W,ab(a=>a.map(a=>{if(!a.info.isrc||""===a.info.isrc){let{isrc:b,newCounter:c}=((a,b)=>{let c=b+1,d=new Date().getFullYear().toString().slice(2);return{isrc:`VNA2P${d}${String(c).padStart(5,"0")}`,newCounter:c}})(0,d);return d=c,{...a,info:{...a.info,isrc:b}}}return a})),X(d),await new Promise(a=>setTimeout(a,100));let e=aa[0]?.info.isrc||`VNA2P${new Date().getFullYear().toString().slice(2)}00001`,f=new FormData;Y&&f.append("file",Y),f.append("type","image"),f.append("userId",c.id),f.append("artistName",i),f.append("songTitle",n),f.append("isrc",e);let h=await fetch("/api/upload",{method:"POST",body:f}),j=await h.json();if(!j.success)throw Error(`Lỗi upload ảnh: ${j.message}`);let l=[];for(let a of aa){let b=new FormData;b.append("file",a.file),b.append("type","audio"),b.append("userId",c.id),b.append("artistName",i),b.append("songTitle",a.info.songTitle),b.append("isrc",a.id);let d=await fetch("/api/upload",{method:"POST",body:b}),e=await d.json();if(!e.success)throw Error(`Lỗi upload \xe2m thanh ${a.file.name}: ${e.message}`);l.push({title:a.info.songTitle,artist:a.info.artistName,filePath:e.url,duration:a.info.duration||0,isrc:a.id,fileName:a.file.name,artistFullName:a.info.artistFullName,fileSize:a.file.size,format:a.file.type,bitrate:null,sampleRate:null,mainCategory:a.info.mainCategory||null,subCategory:a.info.subCategory||null,lyrics:a.info.lyrics||null})}let m="single"===y?aU.SINGLE:"ep"===y?aU.EP:"album"===y||"lp"===y?aU.ALBUM:aU.SINGLE,o={title:n,artist:i,UPC:null,type:m,coverImagePath:j.url,releaseDate:new Date(S),status:aT.PENDING,metadataLocked:!1,published:!1,albumName:p||null,mainCategory:t,subCategory:v||null,platforms:"yes"===C?{platforms:G}:null,distributionLink:null,distributionPlatforms:null,statusVietnamese:"Đ\xe3 nhận, đang chờ duyệt",rejectionReason:null,notes:"yes"===I?M:null,signedDocumentPath:null,signedAt:null,signerFullName:null,isDocumentSigned:!1,userId:c.id,labelId:c.id},q=await a1.createSubmissionWithTracks(o,l);if(!q.success)throw Error(q.message||"Kh\xf4ng thể tạo submission");let s={id:q.data.submission.id,userId:c.id,isrc:l[0]?.isrc||"",uploaderUsername:c.username,artistName:i,songTitle:n,albumName:p,userEmail:r,imageFile:Y?.name??"",imageUrl:j.url,audioUrl:1===l.length?l[0].filePath:void 0,audioUrls:l.map(a=>a.filePath),audioFilesCount:l.length,status:"Đ\xe3 nhận, đang chờ duyệt",submissionDate:new Date().toISOString(),mainCategory:t,subCategory:v,releaseType:y,isCopyrightOwner:A,hasBeenReleased:C,platforms:"yes"===C?G:[],hasLyrics:I,lyrics:"yes"===I?M:"",releaseDate:S,artistRole:k,fullName:g,additionalArtists:[],trackInfos:aa.map(a=>a.info)};a(s),(0,aS.kF)(q.data.submission.id,"create","success",{artistName:i,songTitle:n,trackCount:l.length,mainCategory:t,subCategory:v,releaseType:y,releaseDate:S}),ai(),b("Th\xe0nh c\xf4ng",["Đ\xe3 gửi b\xe0i h\xe1t để chờ duyệt!"],"success")}catch(c){let a=c instanceof Error?c.message:"C\xf3 lỗi xảy ra khi gửi b\xe0i h\xe1t";(0,aS.kF)("Kh\xf4ng x\xe1c định","create","error",{artistName:i,songTitle:n,error:a,trackCount:aa.length}),b("Lỗi",[a],"error")}finally{V(!1)}},ai=()=>{j("Artist"===c.role?c.username:""),o(""),q(""),s(c.email??""),u("pop"),w("official"),z("single"),B("yes"),E("no"),H([]),L("no"),N(""),Z(null),_(""),ab([]),T((0,ao.ww)())};return(0,d.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-blue-950 p-4",children:(0,d.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"\uD83C\uDFB5 Upload nhạc để ph\xe1t h\xe0nh to\xe0n cầu"}),(0,d.jsx)("p",{className:"text-muted-foreground",children:process.env.COMPANY_DESCRIPTION})]}),(0,d.jsx)("div",{className:"flex items-center",children:(0,d.jsx)(F,{})})]}),(0,d.jsxs)(aR.tU,{defaultValue:"basic",className:"w-full",onValueChange:a=>{(0,aS.Pv)("tab",a,{formStep:a})},children:[(0,d.jsxs)(aR.j7,{className:"grid w-full grid-cols-4",children:[(0,d.jsxs)(aR.Xi,{value:"basic",className:"flex items-center gap-2",children:[(0,d.jsx)(m.A,{className:"h-4 w-4"}),"Th\xf4ng tin cơ bản"]}),(0,d.jsxs)(aR.Xi,{value:"media",className:"flex items-center gap-2",children:[(0,d.jsx)(K,{className:"h-4 w-4"}),"Media Files"]}),(0,d.jsxs)(aR.Xi,{value:"metadata",className:"flex items-center gap-2",children:[(0,d.jsx)(aV,{className:"h-4 w-4"}),"Metadata"]}),(0,d.jsxs)(aR.Xi,{value:"release",className:"flex items-center gap-2",children:[(0,d.jsx)(aW,{className:"h-4 w-4"}),"Ph\xe1t h\xe0nh"]})]}),(0,d.jsx)(aR.av,{value:"basic",className:"space-y-6",children:(0,d.jsx)(J.Zp,{children:(0,d.jsxs)(J.Wu,{className:"p-6 space-y-4",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Th\xf4ng tin nghệ sĩ"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:"fullName",children:"Họ v\xe0 t\xean đầy đủ *"}),(0,d.jsx)(O.p,{id:"fullName",value:g,onChange:a=>h(a.target.value),placeholder:"V\xed dụ: Nguyễn Mạnh A"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:"artistName",children:"T\xean nghệ sĩ *"}),(0,d.jsx)(O.p,{id:"artistName",value:i,onChange:a=>j(a.target.value),placeholder:"V\xed dụ: An Kun"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:"userEmail",children:"Email *"}),(0,d.jsx)(O.p,{id:"userEmail",type:"email",value:r,onChange:a=>s(a.target.value),placeholder:process.env.COMPANY_EMAIL})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:"artistRole",children:"Vai tr\xf2 ch\xednh *"}),(0,d.jsxs)(P.l6,{value:k,onValueChange:a=>l(a),children:[(0,d.jsx)(P.bq,{children:(0,d.jsx)(P.yv,{})}),(0,d.jsxs)(P.gC,{children:[(0,d.jsx)(P.eb,{value:"singer",children:"Ca sĩ"}),(0,d.jsx)(P.eb,{value:"singer-songwriter",children:"Singer-Songwriter"}),(0,d.jsx)(P.eb,{value:"rapper",children:"Rapper"}),(0,d.jsx)(P.eb,{value:"producer",children:"Producer"}),(0,d.jsx)(P.eb,{value:"composer",children:"Composer"}),(0,d.jsx)(P.eb,{value:"songwriter",children:"Songwriter"}),(0,d.jsx)(P.eb,{value:"instrumental",children:"Instrumental"})]})]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:"songTitle",children:"T\xean b\xe0i h\xe1t *"}),(0,d.jsx)(O.p,{id:"songTitle",value:n,onChange:a=>o(a.target.value),placeholder:"T\xean b\xe0i h\xe1t của bạn"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:"albumName",children:"T\xean album (t\xf9y chọn)"}),(0,d.jsx)(O.p,{id:"albumName",value:p,onChange:a=>q(a.target.value),placeholder:"T\xean b\xe0i h\xe1t - Single hoặc Album - EP"})]})]})]})})}),(0,d.jsx)(aR.av,{value:"media",className:"space-y-6",children:(0,d.jsx)(J.Zp,{children:(0,d.jsxs)(J.Wu,{className:"p-6 space-y-6",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Tải l\xean Media Files"}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:"imageUpload",children:"Ảnh b\xeca b\xe0i h\xe1t (JPG, 4000x4000px, tối đa 10MB) *"}),(0,d.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,d.jsx)("input",{id:"imageUpload",type:"file",accept:"image/jpeg,image/jpg",onChange:ag,className:"hidden"}),(0,d.jsxs)(D.$,{type:"button",variant:"outline",onClick:()=>document.getElementById("imageUpload")?.click(),className:"mb-4",children:[(0,d.jsx)(K,{className:"mr-2 h-4 w-4"}),"Chọn b\xeca ảnh đĩa"]}),$&&(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)("img",{src:$,alt:"Xem trước n\xe8",className:"mx-auto max-w-xs rounded-lg"}),(0,d.jsxs)(D.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{Z(null),_("")},className:"mt-2",children:[(0,d.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"X\xf3a ảnh"]})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:"audioUpload",children:"File nhạc (WAV 24-bit, 2 k\xeanh, 192kHz, tối đa 100MB mỗi file) *"}),(0,d.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,d.jsx)("input",{id:"audioUpload",type:"file",accept:"audio/wav",multiple:!0,onChange:a=>{let{files:c}=a.target;c&&0!==c.length&&Array.from(c).forEach(async a=>{try{let c=(0,ao.XN)(a);if(!c.valid)return void b("Lỗi",[`${a.name}: ${c.errors.join(", ")}`],"error");let d=`temp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,e={file:a,id:d,info:{fileName:a.name,isrc:"",songTitle:a.name.replace(/\.[^/.]+$/,""),artistName:i,artistFullName:g,additionalArtists:[]}};ab(a=>[...a,e])}catch(c){b("Lỗi",[`C\xf3 lỗi xảy ra khi tải file ${a.name}`],"error")}})},className:"hidden"}),(0,d.jsxs)(D.$,{type:"button",variant:"outline",onClick:()=>document.getElementById("audioUpload")?.click(),className:"mb-4",children:[(0,d.jsx)(K,{className:"mr-2 h-4 w-4"}),"Chọn file nhạc"]}),aa.length>0&&(0,d.jsx)("div",{className:"mt-4 space-y-4",children:aa.map((a,b)=>(0,d.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,d.jsx)("span",{className:"font-medium",children:a.file.name}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(D.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{var b,c;return b=a.id,c=URL.createObjectURL(a.file),void(ac===b?(ae.current[b]?.pause(),ad(null)):(ac&&ae.current[ac]?.pause(),!ae.current[b]&&(ae.current[b]=new Audio(c),ae.current[b].addEventListener("ended",()=>{ad(null)})),ae.current[b].play(),ad(b)))},children:ac===a.id?(0,d.jsx)(aX,{className:"h-4 w-4"}):(0,d.jsx)(aY,{className:"h-4 w-4"})}),(0,d.jsx)(D.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{var b;return b=a.id,void(ab(a=>a.filter(a=>a.id!==b)),ac===b&&(ae.current[b]?.pause(),ad(null)),ae.current[b]&&(URL.revokeObjectURL(ae.current[b].src),delete ae.current[b]))},children:(0,d.jsx)(aZ.A,{className:"h-4 w-4"})})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:`track-title-${a.id}`,children:"T\xean b\xe0i h\xe1t"}),(0,d.jsx)(O.p,{id:`track-title-${a.id}`,value:a.info.songTitle,onChange:b=>{ab(c=>c.map(c=>c.id===a.id?{...c,info:{...c.info,songTitle:b.target.value}}:c))},placeholder:"Nhập t\xean b\xe0i h\xe1t",className:"mt-1"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(Q.J,{htmlFor:`track-isrc-${a.id}`,children:["ISRC (t\xf9y chọn)",(0,d.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"- Để trống nếu chưa c\xf3, sẽ tự tạo khi release"})]}),(0,d.jsx)(O.p,{id:`track-isrc-${a.id}`,value:a.info.isrc,onChange:b=>{var c,d;return c=a.id,d=b.target.value,void ab(a=>a.map(a=>a.id===c?{...a,info:{...a.info,isrc:d}}:a))},placeholder:"VNA2P25XXXXX hoặc để trống",className:"mt-1",maxLength:12}),a.info.isrc&&(0,d.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:["✓ ISRC đ\xe3 c\xf3: ",a.info.isrc]}),!a.info.isrc&&(0,d.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"\uD83D\uDCCB Sẽ tự tạo ISRC khi gửi submission"})]})]}),(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,d.jsx)(Q.J,{children:"Nghệ sĩ tham gia ft. (t\xf9y chọn)"}),(0,d.jsxs)(D.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{var b;return b=a.id,void ab(a=>a.map(a=>a.id===b?{...a,info:{...a.info,additionalArtists:[...a.info.additionalArtists,{name:"",fullName:"",role:"featuring",percentage:0}]}}:a))},children:[(0,d.jsx)(a$,{className:"h-4 w-4 mr-2"}),"Th\xeam nghệ sĩ"]})]}),a.info.additionalArtists.map((b,c)=>(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 mb-2 p-2 bg-gray-50 rounded",children:[(0,d.jsx)(O.p,{placeholder:"T\xean nghệ sĩ",value:b.name,onChange:b=>af(a.id,c,"name",b.target.value)}),(0,d.jsx)(O.p,{placeholder:"Họ t\xean đầy đủ",value:b.fullName||"Theo giấy tờ CCCD",onChange:b=>af(a.id,c,"fullName",b.target.value)}),(0,d.jsxs)(P.l6,{value:b.role,onValueChange:b=>af(a.id,c,"role",b),children:[(0,d.jsx)(P.bq,{children:(0,d.jsx)(P.yv,{})}),(0,d.jsxs)(P.gC,{children:[(0,d.jsx)(P.eb,{value:"featuring",children:"Featuring"}),(0,d.jsx)(P.eb,{value:"vocalist",children:"Vocalist"}),(0,d.jsx)(P.eb,{value:"rapper",children:"Rapper"}),(0,d.jsx)(P.eb,{value:"producer",children:"Producer"}),(0,d.jsx)(P.eb,{value:"composer",children:"Composer"}),(0,d.jsx)(P.eb,{value:"songwriter",children:"Songwriter"}),(0,d.jsx)(P.eb,{value:"instrumental",children:"Instrumental"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(O.p,{type:"number",placeholder:"% quyền",min:"0",max:"100",value:b.percentage,onChange:b=>af(a.id,c,"percentage",parseInt(b.target.value)||0)}),(0,d.jsx)(D.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{var b;return b=a.id,void ab(a=>a.map(a=>a.id===b?{...a,info:{...a.info,additionalArtists:a.info.additionalArtists.filter((a,b)=>b!==c)}}:a))},children:(0,d.jsx)(x.A,{className:"h-4 w-4"})})]})]},c))]})]},a.id))})]})]})]})})}),(0,d.jsx)(aR.av,{value:"metadata",className:"space-y-6",children:(0,d.jsx)(J.Zp,{children:(0,d.jsxs)(J.Wu,{className:"p-6 space-y-4",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Th\xf4ng tin metadata"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:"mainCategory",children:"Thể loại ch\xednh *"}),(0,d.jsxs)(P.l6,{value:t,onValueChange:a=>u(a),children:[(0,d.jsx)(P.bq,{children:(0,d.jsx)(P.yv,{})}),(0,d.jsxs)(P.gC,{children:[(0,d.jsx)(P.eb,{value:"pop",children:"Pop"}),(0,d.jsx)(P.eb,{value:"singer-songwriter",children:"Singer-Songwriter"}),(0,d.jsx)(P.eb,{value:"hiphoprap",children:"Hip Hop/Rap"}),(0,d.jsx)(P.eb,{value:"edm",children:"EDM"}),(0,d.jsx)(P.eb,{value:"rnb",children:"R&B"}),(0,d.jsx)(P.eb,{value:"ballad",children:"Ballad"}),(0,d.jsx)(P.eb,{value:"acoustic",children:"Acoustic"}),(0,d.jsx)(P.eb,{value:"indie",children:"Indie"}),(0,d.jsx)(P.eb,{value:"other_main",children:"Kh\xe1c"})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:"subCategory",children:"Thể loại phụ *"}),(0,d.jsxs)(P.l6,{value:v,onValueChange:a=>w(a),children:[(0,d.jsx)(P.bq,{children:(0,d.jsx)(P.yv,{})}),(0,d.jsxs)(P.gC,{children:[(0,d.jsx)(P.eb,{value:"official",children:"Official"}),(0,d.jsx)(P.eb,{value:"cover",children:"Cover"}),(0,d.jsx)(P.eb,{value:"vpop",children:"V-Pop"}),(0,d.jsx)(P.eb,{value:"lofi",children:"Lo-fi"}),(0,d.jsx)(P.eb,{value:"chill",children:"Chill"}),(0,d.jsx)(P.eb,{value:"trap",children:"Trap"}),(0,d.jsx)(P.eb,{value:"house",children:"House"}),(0,d.jsx)(P.eb,{value:"alternative",children:"Alternative"}),(0,d.jsx)(P.eb,{value:"folk",children:"Folk"}),(0,d.jsx)(P.eb,{value:"other_sub",children:"Kh\xe1c"})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:"releaseType",children:"Loại ph\xe1t h\xe0nh *"}),(0,d.jsxs)(P.l6,{value:y,onValueChange:a=>z(a),children:[(0,d.jsx)(P.bq,{children:(0,d.jsx)(P.yv,{})}),(0,d.jsxs)(P.gC,{children:[(0,d.jsx)(P.eb,{value:"single",children:"Single"}),(0,d.jsx)(P.eb,{value:"ep",children:"EP"}),(0,d.jsx)(P.eb,{value:"lp",children:"LP"}),(0,d.jsx)(P.eb,{value:"album",children:"Album"})]})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"Bạn c\xf3 sở hữu bản quyền của b\xe0i h\xe1t n\xe0y kh\xf4ng? *"}),(0,d.jsxs)(aP,{value:A,onValueChange:a=>B(a),className:"flex gap-4 mt-2",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(aQ,{value:"yes",id:"copyright-yes"}),(0,d.jsx)(Q.J,{htmlFor:"copyright-yes",children:"C\xf3"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(aQ,{value:"no",id:"copyright-no"}),(0,d.jsx)(Q.J,{htmlFor:"copyright-no",children:"Kh\xf4ng"})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"B\xe0i h\xe1t n\xe0y đ\xe3 từng được ph\xe1t h\xe0nh chưa? *"}),(0,d.jsxs)(aP,{value:C,onValueChange:a=>E(a),className:"flex gap-4 mt-2",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(aQ,{value:"yes",id:"released-yes"}),(0,d.jsx)(Q.J,{htmlFor:"released-yes",children:"Đ\xe3 ph\xe1t h\xe0nh"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(aQ,{value:"no",id:"released-no"}),(0,d.jsx)(Q.J,{htmlFor:"released-no",children:"Chưa ph\xe1t h\xe0nh"})]})]})]}),"yes"===C&&(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"C\xe1c nền tảng đ\xe3 ph\xe1t h\xe0nh:"}),(0,d.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:[{value:"youtube",label:"YouTube"},{value:"spotify",label:"Spotify"},{value:"apple_music",label:"Apple Music"},{value:"soundcloud",label:"SoundCloud"},{value:"other_platform",label:"Kh\xe1c"}].map(a=>(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(ap,{id:a.value,checked:G.includes(a.value),onCheckedChange:b=>{var c;return c=a.value,void(b?H(a=>[...a,c]):H(a=>a.filter(a=>a!==c)))}}),(0,d.jsx)(Q.J,{htmlFor:a.value,children:a.label})]},a.value))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"B\xe0i h\xe1t c\xf3 lời kh\xf4ng? *"}),(0,d.jsxs)(aP,{value:I,onValueChange:a=>L(a),className:"flex gap-4 mt-2",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(aQ,{value:"yes",id:"lyrics-yes"}),(0,d.jsx)(Q.J,{htmlFor:"lyrics-yes",children:"C\xf3 lời"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(aQ,{value:"no",id:"lyrics-no"}),(0,d.jsx)(Q.J,{htmlFor:"lyrics-no",children:"Instrumental"})]})]})]}),"yes"===I&&(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:"lyrics",children:"Lời b\xe0i h\xe1t"}),(0,d.jsx)(R.T,{id:"lyrics",value:M,onChange:a=>N(a.target.value),placeholder:"Nhập lời b\xe0i h\xe1t của bạn...",rows:8})]})]})})}),(0,d.jsx)(aR.av,{value:"release",className:"space-y-6",children:(0,d.jsx)(J.Zp,{children:(0,d.jsxs)(J.Wu,{className:"p-6 space-y-4",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Th\xf4ng tin ph\xe1t h\xe0nh"}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:"releaseDate",children:"Ng\xe0y ph\xe1t h\xe0nh mong muốn *"}),(0,d.jsx)(O.p,{id:"releaseDate",type:"date",value:S,onChange:a=>T(a.target.value),min:(0,ao.ww)()}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Ng\xe0y ph\xe1t h\xe0nh phải \xedt nhất 2 ng\xe0y kể từ h\xf4m nay hoặc đ\xe3 từng ph\xe1t h\xe0nh th\xec nhập ng\xe0y cũ"})]}),(0,d.jsxs)("div",{className:"bg-secondary/50 border border-border/50 p-4 rounded-lg",children:[(0,d.jsx)("h4",{className:"font-semibold mb-2 text-foreground",children:"\uD83D\uDCCB T\xf3m tắt th\xf4ng tin"}),(0,d.jsxs)("div",{className:"space-y-2 text-sm text-foreground",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Nghệ sĩ:"})," ",i||"Chưa nhập"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"B\xe0i h\xe1t:"})," ",n||"Chưa nhập"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Album:"})," ",p||"Kh\xf4ng c\xf3"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Thể loại:"})," ",t," - ",v]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Loại ph\xe1t h\xe0nh:"})," ",y]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Files \xe2m thanh:"})," ",aa.length," file(s)"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"C\xf3 ảnh b\xeca:"})," ",Y?"C\xf3":"Chưa c\xf3"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Ng\xe0y ph\xe1t h\xe0nh:"})," ",S||"Chưa chọn"]})]})]}),(0,d.jsx)(D.$,{onClick:ah,disabled:U||!n||!i||0===aa.length,className:"w-full",size:"lg",children:U?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Đang gửi..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aW,{className:"mr-2 h-4 w-4"}),"Gửi để tớ duyệt nhanh duyệt lẹ n\xe0o"]})})]})})})]})]})})}let a3=(0,o.A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),a4=(0,o.A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);function a5({isOpen:a,onClose:b,submission:c,onUpdateStatus:e,onUpdateSubmission:g,onDeleteSubmission:h,showModal:i,isLabelManager:k=!1}){let[l,m]=(0,f.useState)(""),[n,o]=(0,f.useState)(""),[p,q]=(0,f.useState)(!1);if(!a||!c)return null;let r=c.status&&(c.status.includes("Đ\xe3 ph\xe1t h\xe0nh")||c.status.includes("Ho\xe0n th\xe0nh ph\xe1t h\xe0nh")),s=["Đ\xe3 nhận, đang chờ duyệt","Đ\xe3 duyệt, từ chối ph\xe1t h\xe0nh","Đ\xe3 duyệt, đang chờ ph\xe1t h\xe0nh!","Đ\xe3 ph\xe1t h\xe0nh, đang chờ ra mắt","Ho\xe0n th\xe0nh ph\xe1t h\xe0nh!"],t=a=>{e&&c&&(e(c.id,a),i&&i("Cập nhật th\xe0nh c\xf4ng",[`Đ\xe3 cập nhật trạng th\xe1i của "${c.songTitle}" th\xe0nh "${a}"`],"success"))};return(0,d.jsx)("div",{className:"fixed inset-0 bg-gray-900/85 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:a=>{a.target===a.currentTarget&&b()},children:(0,d.jsxs)("div",{className:"bg-gray-800 text-gray-200 p-8 rounded-xl shadow-2xl border border-gray-700 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,d.jsxs)("h3",{className:"text-2xl font-semibold text-purple-400",children:["Chi Tiết: ",c.songTitle]}),(0,d.jsx)("button",{onClick:b,className:"text-gray-400 hover:text-white text-3xl",children:(0,d.jsx)(x.A,{})})]}),(0,d.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"ID:"}),(0,d.jsx)("span",{className:"ml-2 font-light",children:c.id})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"ISRC:"}),(0,d.jsx)("span",{className:"ml-2 font-light text-green-400",children:c.isrc||"N/A"})]}),r&&(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"UPC:"}),k&&p?(0,d.jsx)(O.p,{value:l,onChange:a=>m(a.target.value),className:"ml-2 inline-block w-64 h-7 bg-gray-700 border-gray-600",placeholder:"Nhập UPC..."}):(0,d.jsx)("span",{className:"ml-2 font-light text-yellow-400",children:c.upc||"Chưa c\xf3"}),k&&!p&&(0,d.jsx)("button",{onClick:()=>q(!0),className:"ml-2 text-xs text-blue-400 hover:text-blue-300",children:"Chỉnh sửa"})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"T\xean b\xe0i h\xe1t:"}),(0,d.jsx)("span",{className:"ml-2 font-light",children:c.songTitle})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Nghệ sĩ ch\xednh:"}),(0,d.jsxs)("span",{className:"ml-2 font-light",children:[c.artistName," (T\xean thật: ",c.fullName||"N/A",") - Vai tr\xf2: ",c.artistRole]})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Người gửi:"}),(0,d.jsxs)("span",{className:"ml-2 font-light",children:[c.userEmail," (Username: ",c.uploaderUsername,")"]})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Ng\xe0y gửi:"}),(0,d.jsx)("span",{className:"ml-2 font-light",children:c.submissionDate})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Ng\xe0y ph\xe1t h\xe0nh:"}),(0,d.jsx)("span",{className:"ml-2 font-light",children:c.releaseDate?new Date(c.releaseDate).toLocaleDateString("vi-VN"):"N/A"})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Trạng th\xe1i:"}),(0,d.jsx)("span",{className:`status-badge ml-2 px-2 py-1 rounded-full text-xs font-semibold uppercase tracking-wide ${(0,ao.qY)(c.status)}`,children:c.status}),e&&(0,d.jsxs)(P.l6,{value:c.status,onValueChange:t,children:[(0,d.jsx)(P.bq,{className:"inline-block ml-4 w-64 h-8 bg-gray-700 border-gray-600",children:(0,d.jsx)(P.yv,{placeholder:"Cập nhật trạng th\xe1i"})}),(0,d.jsx)(P.gC,{children:s.map(a=>(0,d.jsx)(P.eb,{value:a,children:a},a))})]})]}),r&&(0,d.jsxs)("div",{className:"py-2 px-3 bg-gray-750 rounded-md",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("strong",{children:"Link ph\xe2n phối:"}),k&&p&&(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(D.$,{variant:"default",size:"sm",onClick:()=>{g&&c&&(g(c.id,{upc:l,distributionLink:n}),i&&i("Cập nhật th\xe0nh c\xf4ng",["Đ\xe3 cập nhật th\xf4ng tin ph\xe2n phối th\xe0nh c\xf4ng"],"success"),q(!1))},className:"h-7 text-xs bg-green-600 hover:bg-green-700",children:"Lưu th\xf4ng tin"}),(0,d.jsx)(D.$,{variant:"outline",size:"sm",onClick:()=>q(!1),className:"h-7 text-xs",children:"Hủy"})]}),k&&!p&&(0,d.jsx)(D.$,{variant:"outline",size:"sm",onClick:()=>q(!0),className:"h-7 text-xs",children:"Chỉnh sửa th\xf4ng tin"})]}),k&&p?(0,d.jsx)(O.p,{value:n,onChange:a=>o(a.target.value),className:"mt-2 w-full h-8 bg-gray-700 border-gray-600",placeholder:"Nhập FFM.to link..."}):n?(0,d.jsxs)("div",{className:"mt-2",children:[(0,d.jsxs)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 flex items-center gap-1",children:[n," ",(0,d.jsx)(a3,{size:14})]}),(0,d.jsx)(()=>n&&(n.includes("ffm.to")||n.includes("featuredmusic.to")||n.includes("feature.fm"))?(0,d.jsxs)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-3",children:[(0,d.jsxs)("a",{href:`https://open.spotify.com/search/${encodeURIComponent(c.songTitle)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-green-400 hover:text-green-300 transition-colors",children:[(0,d.jsx)("div",{className:"w-5 h-5 relative",children:(0,d.jsx)(j.default,{src:"/platforms/spotify.png",alt:"Spotify",width:20,height:20})}),(0,d.jsx)("span",{children:"Spotify"}),(0,d.jsx)(a3,{size:12})]}),(0,d.jsxs)("a",{href:`https://music.apple.com/search?term=${encodeURIComponent(c.songTitle)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-red-400 hover:text-red-300 transition-colors",children:[(0,d.jsx)("div",{className:"w-5 h-5 relative",children:(0,d.jsx)(j.default,{src:"/platforms/apple.png",alt:"Apple Music",width:20,height:20})}),(0,d.jsx)("span",{children:"Apple Music"}),(0,d.jsx)(a3,{size:12})]}),(0,d.jsxs)("a",{href:`https://www.youtube.com/results?search_query=${encodeURIComponent(c.songTitle+" "+c.artistName)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-red-500 hover:text-red-400 transition-colors",children:[(0,d.jsx)("div",{className:"w-5 h-5 relative",children:(0,d.jsx)(j.default,{src:"/platforms/youtube.png",alt:"YouTube",width:20,height:20})}),(0,d.jsx)("span",{children:"YouTube"}),(0,d.jsx)(a3,{size:12})]})]}):null,{})]}):(0,d.jsx)("p",{className:"mt-2 text-gray-400 italic",children:"Chưa c\xf3 link ph\xe2n phối"})]}),(0,d.jsx)("hr",{className:"my-3 border-gray-700"}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("p",{children:(0,d.jsx)("strong",{children:"Ảnh b\xeca:"})}),(0,d.jsxs)(D.$,{variant:"outline",size:"sm",onClick:()=>{if(c.imageUrl&&c.imageUrl.startsWith("data:")){let a=document.createElement("a");a.href=c.imageUrl,a.download=`${c.isrc}.jpg`,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},className:"text-xs",children:[(0,d.jsx)(a4,{className:"h-4 w-4 mr-1"}),"Tải xuống"]})]}),c.imageUrl&&(0,d.jsx)("div",{className:"mt-2 rounded-md overflow-hidden w-full max-w-xs mx-auto",children:(0,d.jsx)("div",{className:"relative w-full aspect-square",children:(0,d.jsx)(j.default,{src:"Various Artist"===c.artistName?"/placeholders/various-artist.jpg":c.imageUrl||"/placeholders/default-cover.jpg",alt:`Cover for ${c.songTitle}`,className:"object-contain rounded-lg border border-gray-600",fill:!0,sizes:"(max-width: 768px) 100vw, 300px",onError:a=>{a.target.src="Various Artist"===c.artistName?"/placeholders/various-artist.jpg":"/placeholders/default-cover.jpg"}})})}),(0,d.jsx)("hr",{className:"my-3 border-gray-700"}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Thể loại ch\xednh:"}),(0,d.jsx)("span",{className:"ml-2 font-light",children:c.mainCategory})]}),c.subCategory&&(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Thể loại phụ:"}),(0,d.jsx)("span",{className:"ml-2 font-light",children:c.subCategory})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Định dạng ph\xe1t h\xe0nh:"}),(0,d.jsxs)("span",{className:"ml-2 font-light",children:[c.releaseType," (",c.audioFilesCount," track)"]})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"T\xean file ảnh b\xeca:"}),(0,d.jsx)("span",{className:"ml-2 font-light",children:c.imageFile})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Bản quyền:"}),(0,d.jsx)("span",{className:"ml-2 font-light",children:"yes"===c.isCopyrightOwner?"Ch\xednh chủ":"Cover/Remix"})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Đ\xe3 ph\xe1t h\xe0nh trước đ\xf3:"}),(0,d.jsx)("span",{className:"ml-2 font-light",children:"yes"===c.hasBeenReleased?"Rồi":"Chưa"})]}),"yes"===c.hasBeenReleased&&c.platforms&&c.platforms.length>0&&(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Nền tảng đ\xe3 ph\xe1t h\xe0nh:"}),(0,d.jsx)("span",{className:"ml-2 font-light",children:c.platforms.join(", ")})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"C\xf3 lời:"}),(0,d.jsx)("span",{className:"ml-2 font-light",children:"yes"===c.hasLyrics?"C\xf3":"Kh\xf4ng"})]}),"yes"===c.hasLyrics&&c.lyrics&&(0,d.jsxs)("div",{className:"mt-2 p-3 bg-gray-750 rounded-md",children:[(0,d.jsx)("strong",{className:"block mb-1 text-gray-400",children:"Lời b\xe0i h\xe1t:"}),(0,d.jsx)("pre",{className:"whitespace-pre-wrap text-xs font-light",children:c.lyrics})]}),c.additionalArtists&&c.additionalArtists.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("hr",{className:"my-3 border-gray-700"}),(0,d.jsx)("p",{children:(0,d.jsx)("strong",{children:"Nghệ sĩ hợp t\xe1c:"})}),(0,d.jsx)("ul",{className:"list-disc list-inside ml-4 font-light",children:c.additionalArtists.map((a,b)=>(0,d.jsxs)("li",{children:[a.name," (Vai tr\xf2: ",a.role,", T\xean thật: ",a.fullName||"N/A",")"]},b))})]}),c.trackInfos&&c.trackInfos.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("hr",{className:"my-3 border-gray-700"}),(0,d.jsx)("p",{children:(0,d.jsx)("strong",{children:"Chi tiết từng track:"})}),(0,d.jsx)("div",{className:"space-y-2",children:c.trackInfos.map((a,b)=>(0,d.jsxs)("div",{className:"p-2 bg-gray-700 rounded",children:[(0,d.jsxs)("p",{className:"text-xs",children:[(0,d.jsxs)("strong",{children:["Track ",b+1,":"]})," ",a.songTitle||a.fileName]}),(0,d.jsxs)("p",{className:"text-xs text-gray-400",children:["Nghệ sĩ: ",a.artistName," (",a.artistFullName,")"]}),a.additionalArtists&&a.additionalArtists.length>0&&(0,d.jsxs)("p",{className:"text-xs text-gray-400",children:["Hợp t\xe1c: ",a.additionalArtists.map(a=>a.name).join(", ")]})]},b))})]}),c.notes&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("hr",{className:"my-3 border-gray-700"}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Ghi ch\xfa:"}),(0,d.jsx)("span",{className:"ml-2 font-light",children:c.notes})]})]}),(0,d.jsx)("hr",{className:"my-3 border-gray-700"}),c.audioUrl&&(0,d.jsxs)("div",{className:"my-3",children:[(0,d.jsx)("strong",{children:"Nghe thử nhạc:"}),(0,d.jsx)("audio",{controls:!0,src:c.audioUrl,className:"w-full mt-2",children:"Tr\xecnh duyệt của bạn kh\xf4ng hỗ trợ audio."})]}),(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)("strong",{className:"block mb-2",children:"Cập nhật trạng th\xe1i:"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map((a,b)=>(0,d.jsx)(D.$,{variant:c.status===a?"default":"outline",size:"sm",onClick:()=>t(a),className:"text-xs rounded-full",children:a},b))})]})]}),(0,d.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,d.jsxs)(D.$,{onClick:b,className:"flex-1 rounded-full bg-purple-600 hover:bg-purple-700",children:[(0,d.jsx)(x.A,{className:"h-5 w-5 mr-2"}),"Đ\xf3ng"]}),k&&h&&(0,d.jsxs)(D.$,{onClick:()=>{c&&h&&window.confirm(`Bạn c\xf3 chắc chắn muốn x\xf3a b\xe0i nộp "${c.songTitle}" kh\xf4ng?
H\xe0nh động n\xe0y kh\xf4ng thể ho\xe0n t\xe1c.`)&&(h(c.id),b())},className:"rounded-full bg-red-600 hover:bg-red-700",variant:"destructive",children:[(0,d.jsx)(aZ.A,{className:"h-5 w-5 mr-2"}),"X\xf3a"]})]})]})})}class a6{static canViewSubmission(a,b){return"Label Manager"===a.role?{allowed:!0}:"Artist"===a.role?b.artist_id===a.id||b.user_id===a.id?{allowed:!0}:{allowed:!1,reason:"Artists can only view their own submissions"}:{allowed:!1,reason:"Unauthorized role"}}static canEditSubmission(a,b){return"Label Manager"===a.role?{allowed:!0}:"Artist"===a.role?b.artist_id!==a.id&&b.user_id!==a.id?{allowed:!1,reason:"Artists can only edit their own submissions"}:"pending"!==b.status?{allowed:!1,reason:"Artists can only edit submissions that are still pending approval"}:{allowed:!0}:{allowed:!1,reason:"Unauthorized role"}}static canDeleteSubmission(a){return"Label Manager"===a.role?{allowed:!0}:{allowed:!1,reason:"Only Label Managers can delete submissions"}}static canAccessSystemSettings(a){return"Label Manager"===a.role?{allowed:!0}:{allowed:!1,reason:"Only Label Managers can access system settings"}}static canUseDebugTools(a){return"Label Manager"===a.role?{allowed:!0}:{allowed:!1,reason:"Only Label Managers can use debug tools"}}static canViewFullStatistics(a){return"Label Manager"===a.role?{allowed:!0}:{allowed:!1,reason:"Only Label Managers can view full statistics"}}static canApproveRejectSubmission(a){return"Label Manager"===a.role?{allowed:!0}:{allowed:!1,reason:"Only Label Managers can approve or reject submissions"}}static canResubmitAfterRejection(a,b){return"Artist"!==a.role?{allowed:!1,reason:"Only artists can resubmit rejected submissions"}:b.artist_id!==a.id&&b.user_id!==a.id?{allowed:!1,reason:"Artists can only resubmit their own submissions"}:"rejected"!==b.status?{allowed:!1,reason:"Can only resubmit rejected submissions"}:{allowed:!0}}static validateReleaseDate(a,b,c){let d=new Date(b.submission_date??b.created_at??new Date),e=new Date(c);if("published"===b.status)return{allowed:!0};let f=new Date(d.getTime()+1728e5);return e<d||e>f?{allowed:!1,reason:`Release date must be between ${d.toDateString()} and ${f.toDateString()}`}:{allowed:!0}}static filterSubmissionsForUser(a,b){return"Label Manager"===a.role?b:"Artist"===a.role?b.filter(b=>b.artist_id===a.id||b.user_id===a.id):[]}static generateUserStatistics(a,b){let c=this.filterSubmissionsForUser(a,b),d={total:c.length,pending:c.filter(a=>"pending"===a.status).length,approved:c.filter(a=>"approved"===a.status).length,rejected:c.filter(a=>"rejected"===a.status).length,published:c.filter(a=>"published"===a.status).length,cancelled:c.filter(a=>"cancelled"===a.status).length};return"Label Manager"===a.role?{...d,userRole:"Label Manager",canViewAll:!0,totalArtists:[...new Set(b.map(a=>a.artist_id??a.user_id))].length,recentSubmissions:b.slice(0,10)}:{...d,userRole:"Artist",canViewAll:!1,artistName:a.fullName}}}let a7=(0,o.A)("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),a8=(0,o.A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),a9=(0,o.A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]),ba=(0,o.A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),bb=(0,o.A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function bc({viewType:a,onUpdateStatus:b,showModal:c,onViewChange:g,submissions:h}){let{user:i}=(0,e.A)(),[k,m]=(0,f.useState)(null),[n,o]=(0,f.useState)(!1),[p,q]=(0,f.useState)("");if(!i)return(0,d.jsx)("div",{className:"p-6 min-h-screen flex items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Đang tải th\xf4ng tin"}),(0,d.jsx)("p",{className:"text-gray-500",children:"Vui l\xf2ng chờ trong gi\xe2y l\xe1t..."})]})});let r=("mySubmissions"===a?h.filter(a=>a.uploaderUsername===i.username):h).filter(a=>{if(!p)return!0;let b=p.toLowerCase(),c=a=>null!=a&&String(a).toLowerCase().includes(b);return c(a.artistName)||c(a.songTitle)||c(a.albumName)||c(a.id)||c(a.isrc)||c(a.status)}),t=async a=>{try{console.log(`Đang x\xf3a submission ${a}`);let b=await fetch(`/api/submissions/${a}`,{method:"DELETE"}),d=await b.json();d.success?(c("X\xf3a th\xe0nh c\xf4ng",[`Đ\xe3 x\xf3a b\xe0i nộp "${k?.songTitle||""}" th\xe0nh c\xf4ng`],"success"),o(!1),m(null)):c("Lỗi x\xf3a b\xe0i nộp",[d.message||"Kh\xf4ng thể x\xf3a b\xe0i nộp"],"error")}catch(a){console.error("Error deleting submission:",a),c("Lỗi x\xf3a b\xe0i nộp",["Đ\xe3 xảy ra lỗi khi thực hiện x\xf3a b\xe0i nộp"],"error")}},u=["Đ\xe3 nhận, đang chờ duyệt","Đ\xe3 duyệt, từ chối ph\xe1t h\xe0nh","Đ\xe3 duyệt, đang chờ ph\xe1t h\xe0nh!","Đ\xe3 ph\xe1t h\xe0nh, đang chờ ra mắt","Ho\xe0n th\xe0nh ph\xe1t h\xe0nh!"],v="Label Manager"===i.role,w=v?h:h.filter(a=>a.uploaderUsername===i.username),x=w.length,y=w.filter(a=>["Đ\xe3 duyệt, đang chờ ph\xe1t h\xe0nh!","Ho\xe0n th\xe0nh ph\xe1t h\xe0nh!","Đ\xe3 ph\xe1t h\xe0nh, đang chờ ra mắt"].includes(a.status)).length,z=w.filter(a=>"Đ\xe3 nhận, đang chờ duyệt"===a.status).length,A=w.filter(a=>"Đ\xe3 duyệt, từ chối ph\xe1t h\xe0nh"===a.status).length,B=w.filter(a=>"Đ\xe3 ph\xe1t h\xe0nh, đang chờ ra mắt"===a.status).length,C=w.filter(a=>"Ho\xe0n th\xe0nh ph\xe1t h\xe0nh!"===a.status).length,E=w.reduce((a,b)=>a+(Array.isArray(b.trackInfos)?b.trackInfos.length:0),0),F=w.reduce((a,b)=>a+(Array.isArray(b.audioUrls)?b.audioUrls.length:+!!b.audioUrl),0),G=w.reduce((a,b)=>{let c=b.mainCategory||"other_main";return a[c]||(a[c]=0),a[c]++,a},{}),H=w.reduce((a,b)=>(Array.isArray(b.platforms)&&b.platforms.forEach(b=>{a[b]||(a[b]=0),a[b]++}),a),{}),I=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString("vi-VN",{year:"numeric",month:"short",day:"numeric"})}catch{return a}},L=async(a,b)=>{try{console.log(`Sending update for submission ${a}:`,b);let d={upc:b.upc,distributionLink:b.distributionLink},e=await fetch(`/api/submissions/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!e.ok){let a=await e.text();throw Error(`HTTP error ${e.status}: ${a}`)}let f=await e.json();f.success?(k&&k.id===a&&m({...k,...d}),c("Cập nhật th\xe0nh c\xf4ng",["Th\xf4ng tin ph\xe2n phối đ\xe3 được cập nhật th\xe0nh c\xf4ng"],"success")):c("Lỗi cập nhật",[f.error||"Kh\xf4ng thể cập nhật th\xf4ng tin"],"error")}catch(a){console.error("Error updating submission:",a),c("Lỗi cập nhật",[a instanceof Error?a.message:"Đ\xe3 xảy ra lỗi khi cập nhật th\xf4ng tin"],"error")}},M=async a=>{try{let d=await fetch("/api/submissions/approve-reject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submissionId:a,action:"approve"})}),e=await d.json();e.success?(b(a,"approved"),c("Duyệt th\xe0nh c\xf4ng",["B\xe0i nộp đ\xe3 được duyệt"],"success")):c("Lỗi duyệt b\xe0i",[e.message||"Kh\xf4ng thể duyệt b\xe0i nộp"],"error")}catch(a){console.error("Error approving submission:",a),c("Lỗi duyệt b\xe0i",["Đ\xe3 xảy ra lỗi khi duyệt b\xe0i nộp"],"error")}},N=async a=>{let d=prompt("Nhập l\xfd do từ chối (t\xf9y chọn):");try{let e=await fetch("/api/submissions/approve-reject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submissionId:a,action:"reject",comment:d||void 0})}),f=await e.json();f.success?(b(a,"rejected"),c("Từ chối th\xe0nh c\xf4ng",["B\xe0i nộp đ\xe3 bị từ chối"],"success")):c("Lỗi từ chối b\xe0i",[f.message||"Kh\xf4ng thể từ chối b\xe0i nộp"],"error")}catch(a){console.error("Error rejecting submission:",a),c("Lỗi từ chối b\xe0i",["Đ\xe3 xảy ra lỗi khi từ chối b\xe0i nộp"],"error")}};return(0,d.jsxs)("div",{className:"p-2 md:p-6",children:[(0,d.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Submissions"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Quản l\xfd c\xe1c b\xe0i nhạc bạn đ\xe3 gửi l\xean hệ thống"})]}),(0,d.jsx)("div",{className:"w-full md:w-64",children:(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("input",{type:"text",placeholder:"T\xecm kiếm submissions...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",value:p,onChange:a=>q(a.target.value)}),(0,d.jsx)("button",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400",onClick:()=>q(""),children:p?"\xd7":"\uD83D\uDD0D"})]})})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium text-gray-300",children:"Tổng submissions"}),(0,d.jsx)(l.A,{className:"h-4 w-4 text-purple-500"})]}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-white",children:x}),(0,d.jsx)("p",{className:"text-xs text-gray-400",children:"Tổng số b\xe0i gửi l\xean"})]})]}),(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium text-gray-300",children:"Đ\xe3 duyệt"}),(0,d.jsx)(s,{className:"h-4 w-4 text-green-500"})]}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-white",children:y}),(0,d.jsx)("p",{className:"text-xs text-gray-400",children:"Sẵn s\xe0ng ph\xe1t h\xe0nh"})]})]}),(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium text-gray-300",children:"Chờ duyệt"}),(0,d.jsx)(l.A,{className:"h-4 w-4 text-yellow-500"})]}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-white",children:z}),(0,d.jsx)("p",{className:"text-xs text-gray-400",children:"Đang chờ kiểm duyệt"})]})]}),(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium text-gray-300",children:"Bị từ chối"}),(0,d.jsx)(l.A,{className:"h-4 w-4 text-red-500"})]}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-white",children:A}),(0,d.jsx)("p",{className:"text-xs text-gray-400",children:"Đ\xe3 bị từ chối ph\xe1t h\xe0nh"})]})]}),(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium text-gray-300",children:"Đang ph\xe1t h\xe0nh"}),(0,d.jsx)(a7,{className:"h-4 w-4 text-blue-400"})]}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-white",children:B}),(0,d.jsx)("p",{className:"text-xs text-gray-400",children:"Đang chờ ra mắt"})]})]}),(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium text-gray-300",children:"Ho\xe0n th\xe0nh ph\xe1t h\xe0nh"}),(0,d.jsx)(s,{className:"h-4 w-4 text-pink-400"})]}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-white",children:C}),(0,d.jsx)("p",{className:"text-xs text-gray-400",children:"Đ\xe3 ho\xe0n th\xe0nh ph\xe1t h\xe0nh"})]})]}),(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium text-gray-300",children:"Tổng số track"}),(0,d.jsx)(s,{className:"h-4 w-4 text-blue-500"})]}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-white",children:E}),(0,d.jsx)("p",{className:"text-xs text-gray-400",children:"C\xe1c track đ\xe3 gửi"})]})]}),(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium text-gray-300",children:"Tổng file \xe2m thanh"}),(0,d.jsx)(s,{className:"h-4 w-4 text-purple-400"})]}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-white",children:F}),(0,d.jsx)("p",{className:"text-xs text-gray-400",children:"C\xe1c file \xe2m thanh đ\xe3 gửi"})]})]})]}),(0,d.jsxs)(J.Zp,{className:"mt-6 bg-gray-800 border border-gray-700",children:[(0,d.jsxs)(J.aR,{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(a7,{className:"mr-3 text-purple-400 w-8 h-8"}),(0,d.jsxs)("div",{children:[(0,d.jsx)(J.ZB,{className:"text-white",children:p?"Kết quả t\xecm kiếm":"Danh s\xe1ch submissions"}),p&&(0,d.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["T\xecm thấy ",r.length," kết quả cho “",p,"”"]})]})]}),(0,d.jsxs)(D.$,{className:"bg-purple-600 hover:bg-purple-700 text-white",onClick:()=>g?.("upload"),children:[(0,d.jsx)(K,{className:"h-4 w-4 mr-2"}),"Upload New Track"]})]}),(0,d.jsx)(J.Wu,{className:"p-0",children:0===r.length?(0,d.jsxs)("div",{className:"text-center py-8",children:[(0,d.jsx)(s,{className:"h-12 w-12 text-gray-600 mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-gray-400",children:p?"Kh\xf4ng t\xecm thấy submissions khớp với từ kh\xf3a":"Kh\xf4ng t\xecm thấy submissions n\xe0o"}),(0,d.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:p?"Thử t\xecm với từ kh\xf3a kh\xe1c":"Tải l\xean b\xe0i h\xe1t đầu ti\xean của bạn để bắt đầu"}),(0,d.jsxs)(D.$,{className:"mt-4 bg-purple-600 hover:bg-purple-700 text-white",onClick:()=>g?.("upload"),children:[(0,d.jsx)(K,{className:"h-4 w-4 mr-2"}),"Upload Track"]})]}):(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,d.jsx)("thead",{className:"bg-gray-750",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"ISRC"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"ID"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Ảnh B\xeca"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Nghệ Sĩ"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"T\xean B\xe0i H\xe1t"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Audio"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Ng\xe0y Gửi"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Ng\xe0y Ph\xe1t H\xe0nh"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Trạng Th\xe1i"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"H\xe0nh Động"})]})}),(0,d.jsx)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:r.map(a=>(0,d.jsxs)("tr",{className:"hover:bg-gray-750 transition-colors duration-150",children:[(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsx)("span",{className:"text-xs font-mono text-green-400",children:a.isrc||"N/A"})}),(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsx)("span",{className:"text-xs font-mono text-purple-400",children:a.id})}),(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"relative h-10 w-10 overflow-hidden rounded-md border border-gray-600",children:(0,d.jsx)(j.default,{src:"Various Artist"===a.artistName?"/placeholders/various-artist.jpg":a.imageUrl||"/placeholders/default-cover.jpg",alt:"Cover",width:40,height:40,className:"h-10 w-10 object-cover",style:{objectPosition:"center"},unoptimized:a.imageUrl?.startsWith("data:"),onError:b=>{b.target.src="Various Artist"===a.artistName?"/placeholders/various-artist.jpg":"/placeholders/default-cover.jpg"}})}),(0,d.jsx)(D.$,{variant:"ghost",size:"sm",onClick:()=>(a=>{if(a.imageUrl&&a.imageUrl.startsWith("data:")){let b=document.createElement("a");b.href=a.imageUrl,b.download=`${a.songTitle}_cover.jpg`,document.body.appendChild(b),b.click(),document.body.removeChild(b),c("Tải Xuống Th\xe0nh C\xf4ng",[`Đ\xe3 tải ảnh b\xeca "${a.songTitle}"`],"success")}else c("Th\xf4ng B\xe1o",["Kh\xf4ng thể tải xuống ảnh b\xeca."],"error")})(a),className:"p-1",title:"Tải xuống ảnh b\xeca",children:(0,d.jsx)(a4,{className:"h-4 w-4"})})]})}),(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsx)("span",{className:"text-sm text-gray-200 font-medium",children:a.artistName})}),(0,d.jsxs)("td",{className:"px-4 py-3",children:[(0,d.jsx)("span",{className:"text-sm text-gray-300",children:a.songTitle}),(0,d.jsxs)("p",{className:"text-xs text-gray-500",children:[a.audioFilesCount," track(s)"]})]}),(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsxs)("div",{className:"flex flex-col gap-1",children:[Array.isArray(a.audioUrls)&&a.audioUrls.length>0?a.audioUrls.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("audio",{controls:!0,src:a,className:"h-8",preload:"none",style:{maxWidth:180}}),(0,d.jsxs)("span",{className:"text-xs text-gray-400",children:["Track ",b+1]})]},a)):a.audioUrl?(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("audio",{controls:!0,src:a.audioUrl,className:"h-8",preload:"none",style:{maxWidth:180}}),(0,d.jsx)("span",{className:"text-xs text-gray-400",children:"Single"})]}):(0,d.jsx)("span",{className:"text-xs text-gray-500",children:"Kh\xf4ng c\xf3 audio"}),(0,d.jsx)("div",{className:"flex items-center space-x-2 mt-1",children:(0,d.jsx)(D.$,{variant:"ghost",size:"sm",onClick:()=>{c("Tải Xuống Audio",[`Đang chuẩn bị tải ${a.audioFilesCount} file audio cho "${a.songTitle}". T\xednh năng đang ph\xe1t triển.`],"success")},className:"p-1",title:"Tải xuống audio",children:(0,d.jsx)(a4,{className:"h-4 w-4"})})})]})}),(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsx)("span",{className:"text-sm text-gray-400",children:I(a.submissionDate)})}),(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsx)("span",{className:"text-sm text-gray-400",children:a.releaseDate?I(a.releaseDate):"N/A"})}),(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsx)("span",{className:`status-badge ${function(a){switch(a){case"Đ\xe3 nhận, đang chờ duyệt":case"pending":return"bg-yellow-600 text-yellow-100";case"Đ\xe3 duyệt, từ chối ph\xe1t h\xe0nh":case"rejected":return"bg-red-600 text-red-100";case"Đ\xe3 duyệt, đang chờ ph\xe1t h\xe0nh!":case"approved":return"bg-blue-600 text-blue-100";case"Đ\xe3 ph\xe1t h\xe0nh, đang chờ ra mắt":case"processing":return"bg-purple-600 text-purple-100";case"Ho\xe0n th\xe0nh ph\xe1t h\xe0nh!":case"published":return"bg-green-600 text-green-100";default:return"bg-gray-600 text-gray-100"}}(a.status)}`,children:function(a){switch(a){case"pending":return"Đ\xe3 nhận, đang chờ duyệt";case"approved":return"Đ\xe3 duyệt, đang chờ ph\xe1t h\xe0nh!";case"rejected":return"Đ\xe3 duyệt, từ chối ph\xe1t h\xe0nh";case"processing":return"Đ\xe3 ph\xe1t h\xe0nh, đang chờ ra mắt";case"published":return"Ho\xe0n th\xe0nh ph\xe1t h\xe0nh!";case"cancelled":return"Đ\xe3 hủy";case"draft":return"Bản nh\xe1p";default:return a}}(a.status)})}),(0,d.jsxs)("td",{className:"px-4 py-3 text-sm space-x-2 whitespace-nowrap",children:[(0,d.jsxs)(D.$,{variant:"outline",size:"sm",onClick:()=>(a=>{let b=h.find(b=>b.id===a);b&&(m(b),o(!0))})(a.id),className:"text-xs",children:[(0,d.jsx)(a8,{className:"h-4 w-4 mr-1"}),"Xem"]}),"                        ",a6.canEditSubmission(i,{id:a.id,track_title:a.songTitle,artist_name:a.artistName,user_id:a.userId,genre:a.mainCategory||"pop",submission_date:a.submissionDate,status:"pending"}).allowed&&(0,d.jsxs)(D.$,{variant:"outline",size:"sm",onClick:()=>{m(a),o(!0),c("Chỉnh sửa b\xe0i nộp",[`Mở form chỉnh sửa cho "${a.songTitle}"`],"success")},className:"text-xs text-blue-400 hover:text-blue-300",children:[(0,d.jsx)(a9,{className:"h-4 w-4 mr-1"}),"Sửa"]}),a6.canDeleteSubmission(i).allowed&&(0,d.jsxs)(D.$,{variant:"outline",size:"sm",onClick:()=>t(a.id),className:"text-xs text-red-400 hover:text-red-300",children:[(0,d.jsx)(aZ.A,{className:"h-4 w-4 mr-1"}),"X\xf3a"]}),a6.canApproveRejectSubmission(i).allowed&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(D.$,{variant:"outline",size:"sm",onClick:()=>M(a.id),className:"text-xs text-green-400 hover:text-green-300",children:[(0,d.jsx)(ba,{className:"h-4 w-4 mr-1"}),"Duyệt"]}),(0,d.jsxs)(D.$,{variant:"outline",size:"sm",onClick:()=>N(a.id),className:"text-xs text-red-400 hover:text-red-300",children:[(0,d.jsx)(bb,{className:"h-4 w-4 mr-1"}),"Hủy"]})]}),"Label Manager"===i.role&&(0,d.jsxs)(P.l6,{value:a.status,onValueChange:c=>b(a.id,c),children:[(0,d.jsx)(P.bq,{className:"w-auto text-xs py-1.5 h-auto",children:(0,d.jsx)(P.yv,{})}),(0,d.jsx)(P.gC,{children:u.map(a=>(0,d.jsx)(P.eb,{value:a,className:"text-xs",children:a},a))})]})]})]},a.id))})]})})})]}),Object.keys(G).length>0&&(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border-gray-700 col-span-1 md:col-span-2 lg:col-span-4",children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium text-gray-300",children:"Ph\xe2n loại theo thể loại"}),(0,d.jsx)(l.A,{className:"h-4 w-4 text-indigo-500"})]}),(0,d.jsx)(J.Wu,{children:(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(G).map(([a,b])=>(0,d.jsxs)("div",{className:"px-2 py-1 bg-gray-700 rounded-md text-xs",children:[(0,d.jsx)("span",{className:"font-semibold",children:{pop:"Pop","singer-songwriter":"Singer-Songwriter",hiphoprap:"Hip Hop/Rap",edm:"EDM",rnb:"R&B",ballad:"Ballad",acoustic:"Acoustic",indie:"Indie",other_main:"Kh\xe1c"}[a]||a}),": ",b]},a))})})]}),Object.keys(H).length>0&&(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border-gray-700 col-span-1 md:col-span-2 lg:col-span-4",children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium text-gray-300",children:"Ph\xe2n loại theo nền tảng"}),(0,d.jsx)(l.A,{className:"h-4 w-4 text-orange-500"})]}),(0,d.jsx)(J.Wu,{children:(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(H).map(([a,b])=>(0,d.jsxs)("div",{className:"px-2 py-1 bg-gray-700 rounded-md text-xs",children:[(0,d.jsx)("span",{className:"font-semibold",children:{youtube:"YouTube",spotify:"Spotify",apple_music:"Apple Music",soundcloud:"SoundCloud",other_platform:"Kh\xe1c"}[a]||a}),": ",b]},a))})})]}),k&&(0,d.jsx)(a5,{isOpen:n,onClose:()=>o(!1),submission:k,onUpdateStatus:b,onUpdateSubmission:L,showModal:c,isLabelManager:v,onDeleteSubmission:t})]})}var bd=c(56085);let be=(0,o.A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),bf=(0,o.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);function bg({icon:a,className:b,solid:c=!0,regular:e=!1,brands:f=!1,light:g=!1,duotone:h=!1,thin:i=!1,size:j,fixedWidth:k=!1,spin:l=!1,pulse:m=!1,rotate:n,...o}){let p=c?"fas":"";p=e?"far":p,p=f?"fab":p,p=g?"fal":p,p=h?"fad":p,p=i?"fat":p,a&&!p&&["facebook","twitter","instagram","youtube","tiktok","spotify","apple","google","amazon"].some(b=>a.includes(b))&&(p="fab");let q=[p,a,j?`fa-${j}`:"",k?"fa-fw":"",l?"fa-spin":"",m?"fa-pulse":"",n?`fa-rotate-${n}`:"",b||""].filter(Boolean);return(0,d.jsx)("i",{className:(0,ao.cn)(q.join(" ")),...o})}function bh({showModal:a}){let{user:b,login:c}=(0,e.A)(),[g,h]=(0,f.useState)({username:"",fullName:"",email:"",bio:"",avatar:"",socialLinks:{facebook:"",youtube:"",spotify:"",appleMusic:"",tiktok:"",instagram:""}}),[i,k]=(0,f.useState)("/face.png");if(!b)return(0,d.jsx)("div",{className:"p-6 min-h-screen flex items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Đang tải th\xf4ng tin"}),(0,d.jsx)("p",{className:"text-gray-500",children:"Vui l\xf2ng chờ trong gi\xe2y l\xe1t..."})]})});let l=(a,b)=>{if(a.startsWith("socialLinks.")){let c=a.replace("socialLinks.",""),d=s(c,b);h(a=>({...a,socialLinks:{...a.socialLinks,[c]:d}}))}else h(c=>({...c,[a]:b}))},n=async d=>{let e=d.target.files?.[0];if(e){if(!["image/jpeg","image/png","image/jpg"].includes(e.type)){a("Lỗi Tải Ảnh","Chỉ nhận JPG/PNG."),d.target.value="";return}a("Đang Xử L\xfd","Đang tải v\xe0 xử l\xfd ảnh đại diện...");let f=new FormData;f.append("file",e),f.append("artistName",b.username||"default-user"),f.append("userId",b.id||"default-id"),f.append("role",b.role||"Artist");try{a("Đang xử l\xfd","Đang tải ảnh l\xean, vui l\xf2ng đợi...");let d=await fetch("/api/upload/avatar",{method:"POST",body:f});if(!d.ok){let a=await d.text();throw console.error("API error response:",a),Error(`HTTP error ${d.status}: ${a}`)}let e=await d.json();e.success&&e.url?(k(e.url),h(a=>({...a,avatar:e.url})),a("Th\xe0nh c\xf4ng","Ảnh đại diện đ\xe3 được cập nhật","success"),b&&await c(b.username,"")):(console.error("Upload failed:",e),a("Lỗi Upload",e.message??"Kh\xf4ng upload được ảnh đại diện!"))}catch(c){let b=c instanceof Error?c.message:"Lỗi kh\xf4ng x\xe1c định";console.error("Detailed error:",c),a("Lỗi Upload",`Kh\xf4ng thể kết nối server: ${b}`)}}},o=async(b,c)=>{if(!b)return void a("Chưa c\xf3 Link","Vui l\xf2ng nhập link trước khi copy.","error");try{await navigator.clipboard.writeText(b),a("Copy Th\xe0nh C\xf4ng",`Đ\xe3 copy link ${c}: ${b}`,"success")}catch(b){console.error("Clipboard copy failed:",b),a("Lỗi Copy","Kh\xf4ng thể copy link v\xe0o clipboard.")}},p=async c=>{c.preventDefault();try{a("Đang xử l\xfd","Đang cập nhật th\xf4ng tin profile...");let c={...g,id:b.id,username:b.username,role:b.role,table:"Label Manager"===b.role?"label_manager":"artist",avatar:g.avatar||("/face.png"!==i?i:b.avatar),socialLinks:Object.fromEntries(Object.entries(g.socialLinks).filter(([,a])=>""!==a.trim()))};console.log("Gửi dữ liệu cập nhật profile:",c);let d=await fetch("/api/profile/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok){let a=await d.text();throw Error(`HTTP error ${d.status}: ${a}`)}let e=await d.json();if(e.success){if(e.user){let a=JSON.parse(localStorage.getItem("currentUser")||"{}"),b={...a,fullName:e.user.fullName||a.fullName,email:e.user.email||a.email,bio:e.user.bio||a.bio,avatar:e.user.avatar||a.avatar,socialLinks:e.user.socialLinks||a.socialLinks};localStorage.setItem("currentUser",JSON.stringify(b)),window.location.reload()}a("Th\xe0nh C\xf4ng","Đ\xe3 cập nhật profile th\xe0nh c\xf4ng!","success")}else throw Error(e.message||"Cập nhật kh\xf4ng th\xe0nh c\xf4ng")}catch(c){console.error("Error updating profile:",c);let b=c instanceof Error?c.message:"Lỗi kh\xf4ng x\xe1c định";a("Lỗi Cập Nhật",`C\xf3 lỗi xảy ra khi cập nhật profile: ${b}`,"error")}},s=(a,b)=>{if(!b.trim())return"";switch(a){case"facebook":case"instagram":return b.replace("@","").trim();case"youtube":case"tiktok":if(b.startsWith("@"))return b.trim();return`@${b.trim()}`;case"spotify":case"appleMusic":if(b.includes("/")){let a=b.split("/");return a[a.length-1].trim()}return b.trim();default:return b.trim()}};return(0,d.jsxs)("div",{className:"p-2 md:p-6",children:[(0,d.jsxs)("h2",{className:"text-3xl font-bold text-white mb-6 flex items-center",children:[(0,d.jsx)(m.A,{className:"mr-3 text-purple-400"}),"Hồ sơ nghệ sĩ của t\xf4i"]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,d.jsx)("div",{className:"lg:col-span-2",children:(0,d.jsx)(J.Zp,{className:"bg-gray-800 border border-gray-700 max-w-2xl mx-auto",children:(0,d.jsx)(J.Wu,{className:"p-6 md:p-10",children:(0,d.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:"username",children:"T\xean đăng nhập"}),(0,d.jsx)(O.p,{id:"username",value:g.username,readOnly:!0,className:"rounded-xl mt-1 bg-gray-600 cursor-not-allowed"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(Q.J,{htmlFor:"fullName",children:["Họ t\xean đầy đủ",(0,d.jsx)("span",{className:"text-red-500 font-bold ml-0.5",children:"*"})]}),(0,d.jsx)(O.p,{id:"fullName",value:g.fullName,onChange:a=>l("fullName",a.target.value),required:!0,className:"rounded-xl mt-1"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(Q.J,{htmlFor:"email",children:["Email",(0,d.jsx)("span",{className:"text-red-500 font-bold ml-0.5",children:"*"})]}),(0,d.jsx)(O.p,{id:"email",type:"email",value:g.email,onChange:a=>l("email",a.target.value),required:!0,className:"rounded-xl mt-1"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:"avatarFile",children:"Ảnh đại diện (JPG/PNG, tự động crop về 1:1)"}),(0,d.jsx)(O.p,{id:"avatarFile",type:"file",accept:"image/jpeg,image/png",onChange:n,className:"mt-1"}),(0,d.jsx)("div",{className:"mt-3 rounded-full w-32 h-32 border-2 border-gray-600 mx-auto overflow-hidden",children:(0,d.jsx)(j.default,{src:i||"/placeholder.svg",alt:"Avatar Preview",width:128,height:128,className:"object-cover w-full h-full",style:{aspectRatio:"1/1"}})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{htmlFor:"bio",children:"Tiểu sử nghệ sĩ"}),(0,d.jsx)(R.T,{id:"bio",value:g.bio,onChange:a=>l("bio",a.target.value),rows:5,className:"rounded-xl mt-1",placeholder:"Giới thiệu nghệ sĩ"}),(0,d.jsxs)(D.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{let c=[`L\xe0 một ${b.role} t\xe0i năng, ${g.fullName||b.username} lu\xf4n mang đến những l\xe0n gi\xf3 mới cho \xe2m nhạc Việt.`,`Với đam m\xea ch\xe1y bỏng, ${g.fullName||b.username} đang từng bước khẳng định vị tr\xed của m\xecnh. #GenZMusic`,`\xc2m nhạc của ${g.fullName||b.username} l\xe0 sự kết hợp độc đ\xe1o giữa truyền thống v\xe0 hiện đại, chạm đến cảm x\xfac người nghe.`,`${g.fullName||b.username} - nghệ sĩ GenZ với phong c\xe1ch ri\xeang biệt, lu\xf4n t\xecm t\xf2i v\xe0 s\xe1ng tạo trong từng giai điệu.`,`Từ những beat chill đến những bản ballad s\xe2u lắng, ${g.fullName||b.username} chinh phục tr\xe1i tim người nghe bằng \xe2m nhạc ch\xe2n th\xe0nh.`],d=c[Math.floor(Math.random()*c.length)];h(a=>({...a,bio:d})),a("Gợi \xdd Bio","Đ\xe3 c\xf3 bio mẫu! Bạn c\xf3 thể chỉnh sửa th\xeam nh\xe9!","success")},className:"mt-2 rounded-full",children:[(0,d.jsx)(bd.A,{className:"h-4 w-4 mr-2"}),"Gợi \xdd Bio"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-purple-400 pt-4 border-t border-gray-600 mb-4",children:"Li\xean kết mạng x\xe3 hội"}),(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(g.socialLinks).map(([a,b])=>(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"block text-xs font-medium text-gray-400 mb-1 capitalize",children:"appleMusic"===a?"Apple Music":a}),(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)(O.p,{value:b,onChange:b=>l(`socialLinks.${a}`,b.target.value),className:"rounded-xl rounded-r-none flex-grow",placeholder:"facebook"===a?"iamankun":"youtube"===a?"@ankun_music":"spotify"===a?"5NIqsUlRfxkY4d2WjhcmXs":"appleMusic"===a?"1545463988":"tiktok"===a?"@iamankun":"instagram"===a?"iamankun":`https://${a}.com/...`}),(0,d.jsx)(D.$,{type:"button",variant:"outline",onClick:()=>o(b??"",a),className:"rounded-xl rounded-l-none border-l-0 px-3",children:(0,d.jsx)(be,{className:"h-4 w-4"})})]})]},a))})]}),(0,d.jsxs)("div",{className:"border-t border-gray-700 pt-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-purple-400 mb-4",children:"\uD83D\uDD14 Test Notification System"}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,d.jsx)(D.$,{type:"button",variant:"outline",onClick:()=>a("Profile Test","Profile notification with musical sound!","success"),className:"text-sm",children:"\uD83C\uDFB5 Success Sound"}),(0,d.jsx)(D.$,{type:"button",variant:"outline",onClick:()=>a("Error Test","Error notification with alert sound!","error"),className:"text-sm",children:"\uD83D\uDEA8 Error Sound"})]})]}),(0,d.jsxs)(D.$,{type:"submit",className:"w-full rounded-full bg-green-600 hover:bg-green-700 py-6",children:[(0,d.jsx)(m.A,{className:"h-5 w-5 mr-2"}),"Lưu Thay Đổi"]})]})})})}),(0,d.jsx)("div",{children:(0,d.jsxs)(J.Zp,{className:"overflow-hidden border-none shadow-lg bg-gradient-to-b from-gray-800 to-gray-900",children:[(0,d.jsx)("div",{className:"relative h-32 bg-gradient-to-r from-purple-600 to-blue-600 flex items-center justify-center",children:(0,d.jsx)("div",{className:"absolute -bottom-16 left-1/2 transform -translate-x-1/2",children:(0,d.jsx)("div",{className:"relative w-32 h-32 rounded-full overflow-hidden border-4 border-gray-900 shadow-xl animate-pulse-slow",children:i?(0,d.jsx)(j.default,{src:i,alt:b.fullName??b.username,width:128,height:128,className:"object-cover w-full h-full",priority:!0,onError:a=>{a.currentTarget.src="/face.png"}}):(0,d.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:(0,d.jsx)(m.A,{className:"h-16 w-16 text-white"})})})})}),(0,d.jsxs)(J.Wu,{className:"mt-20 space-y-4 text-center",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent flex items-center justify-center",children:[g.fullName||b.fullName,(g.socialLinks.youtube||g.socialLinks.spotify||g.socialLinks.appleMusic)&&(0,d.jsx)("span",{className:"ml-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm rounded-full w-6 h-6 flex items-center justify-center shadow-md",title:"Nghệ sĩ đ\xe3 x\xe1c thực",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M8.603 3.799A4.49 4.49 0 0112 2.25c1.357 0 2.573.6 3.397 1.549a4.49 4.49 0 013.498 1.307 4.491 4.491 0 011.307 3.497A4.49 4.49 0 0121.75 12a4.49 4.49 0 01-1.549 3.397 4.491 4.491 0 01-1.307 3.497 4.491 4.491 0 01-3.497 1.307A4.49 4.49 0 0112 21.75a4.49 4.49 0 01-3.397-1.549 4.49 4.49 0 01-3.498-1.306 4.491 4.491 0 01-1.307-3.498A4.49 4.49 0 012.25 12c0-1.357.6-2.573 1.549-3.397a4.49 4.49 0 011.307-3.497 4.49 4.49 0 013.497-1.307zm7.007 6.387a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})})]}),(0,d.jsxs)("p",{className:"text-gray-400 text-lg mt-1",children:["@",b.username]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,d.jsx)(r.A,{className:"h-4 w-4 text-gray-400"}),(0,d.jsx)("span",{className:"text-sm text-gray-300",children:b.email})]}),(0,d.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,d.jsx)(q.A,{className:"h-4 w-4 text-gray-400"}),(0,d.jsx)("span",{className:"text-sm text-gray-300",children:b.role})]}),(0,d.jsxs)("div",{className:"flex items-center justify-center space-x-2 col-span-full",children:[(0,d.jsx)(bf,{className:"h-4 w-4 text-gray-400"}),(0,d.jsxs)("span",{className:"text-sm text-gray-300",children:["Tham gia từ ",new Date(b.createdAt).toLocaleDateString()]})]})]}),"Label Manager"===b.role&&(0,d.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Label Management Controls"}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center",children:[(0,d.jsxs)(D.$,{type:"button",variant:"outline",size:"sm",className:"bg-gradient-to-r from-green-500/20 to-green-600/20 hover:from-green-500/40 hover:to-green-600/40 text-green-400",onClick:()=>{a("Cấp T\xedch Xanh","Đ\xe3 cấp t\xedch xanh cho nghệ sĩ th\xe0nh c\xf4ng!","success")},children:[(0,d.jsx)(bg,{icon:"fa-check-circle",solid:!0,className:"mr-2"}),"Cấp T\xedch Xanh"]}),(0,d.jsxs)(D.$,{type:"button",variant:"outline",size:"sm",className:"bg-gradient-to-r from-red-500/20 to-red-600/20 hover:from-red-500/40 hover:to-red-600/40 text-red-400",onClick:()=>{a("Hủy T\xedch Xanh","Đ\xe3 hủy t\xedch xanh của nghệ sĩ th\xe0nh c\xf4ng!","success")},children:[(0,d.jsx)(bg,{icon:"fa-times-circle",solid:!0,className:"mr-2"}),"Hủy T\xedch Xanh"]})]})]}),(0,d.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Kết nối mạng x\xe3 hội"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:Object.entries(g.socialLinks).map(([a,b])=>{if(!b)return null;let c="",e=null;switch(a){case"facebook":c=`https://www.facebook.com/${b.replace("@","")}`,e=(0,d.jsx)(bg,{icon:"fa-facebook",brands:!0,size:"lg",className:"text-blue-600"});break;case"youtube":c=b.startsWith("@")?`https://www.youtube.com/${b}`:`https://www.youtube.com/@${b}`,e=(0,d.jsx)(bg,{icon:"fa-youtube",brands:!0,size:"lg",className:"text-red-600"});break;case"tiktok":c=b.startsWith("@")?`https://www.tiktok.com/${b}`:`https://www.tiktok.com/@${b}`,e=(0,d.jsx)(bg,{icon:"fa-tiktok",brands:!0,size:"lg",className:"text-black dark:text-white"});break;case"instagram":c=`https://www.instagram.com/${b.replace("@","")}`,e=(0,d.jsx)(bg,{icon:"fa-instagram",brands:!0,size:"lg",className:"text-pink-600"});break;case"spotify":c=`https://open.spotify.com/artist/${b}`,e=(0,d.jsx)(bg,{icon:"fa-spotify",brands:!0,size:"lg",className:"text-green-600"});break;case"appleMusic":c=`https://music.apple.com/artist/${b}`,e=(0,d.jsx)(bg,{icon:"fa-apple",brands:!0,size:"lg",className:"text-gray-700 dark:text-gray-300"});break;default:c=b,e=(0,d.jsx)(bg,{icon:"fa-link",solid:!0,size:"lg",className:"text-gray-600"})}return(0,d.jsxs)("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center rounded-full px-3 py-2 bg-gradient-to-r from-gray-700/80 to-gray-800/80 backdrop-blur-sm hover:from-gray-600 hover:to-gray-700 hover:shadow-lg transition-all duration-300",children:[(0,d.jsx)("span",{className:"mr-2",children:e}),(0,d.jsx)("span",{className:"text-xs",children:"appleMusic"===a?"Apple Music":a})]},a)})})]})]})]})})]})]})}function bi({status:a}){return(0,d.jsx)("div",{className:`w-2 h-2 rounded-full ${(()=>{switch(a){case"connected":case"available":return"bg-green-500";case"disconnected":case"unavailable":return"bg-red-500";case"checking":return"bg-yellow-500";default:return"bg-gray-500"}})()}`})}var bj="Switch",[bk,bl]=(0,T.A)(bj),[bm,bn]=bk(bj),bo=f.forwardRef((a,b)=>{let{__scopeSwitch:c,name:e,checked:g,defaultChecked:h,required:i,disabled:j,value:k="on",onCheckedChange:l,form:m,...n}=a,[o,p]=f.useState(null),q=(0,S.s)(b,a=>p(a)),r=f.useRef(!1),s=!o||m||!!o.closest("form"),[t,u]=(0,V.i)({prop:g,defaultProp:h??!1,onChange:l,caller:bj});return(0,d.jsxs)(bm,{scope:c,checked:t,disabled:j,children:[(0,d.jsx)(Z.sG.button,{type:"button",role:"switch","aria-checked":t,"aria-required":i,"data-state":bs(t),"data-disabled":j?"":void 0,disabled:j,value:k,...n,ref:q,onClick:(0,U.m)(a.onClick,a=>{u(a=>!a),s&&(r.current=a.isPropagationStopped(),r.current||a.stopPropagation())})}),s&&(0,d.jsx)(br,{control:o,bubbles:!r.current,name:e,value:k,checked:t,required:i,disabled:j,form:m,style:{transform:"translateX(-100%)"}})]})});bo.displayName=bj;var bp="SwitchThumb",bq=f.forwardRef((a,b)=>{let{__scopeSwitch:c,...e}=a,f=bn(bp,c);return(0,d.jsx)(Z.sG.span,{"data-state":bs(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:b})});bq.displayName=bp;var br=f.forwardRef(({__scopeSwitch:a,control:b,checked:c,bubbles:e=!0,...g},h)=>{let i=f.useRef(null),j=(0,S.s)(i,h),k=(0,W.Z)(c),l=(0,X.X)(b);return f.useEffect(()=>{let a=i.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(k!==c&&b){let d=new Event("click",{bubbles:e});b.call(a,c),a.dispatchEvent(d)}},[k,c,e]),(0,d.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:c,...g,tabIndex:-1,ref:j,style:{...g.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function bs(a){return a?"checked":"unchecked"}br.displayName="SwitchBubbleInput";let bt=f.forwardRef(({className:a,...b},c)=>(0,d.jsx)(bo,{className:(0,ao.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...b,ref:c,children:(0,d.jsx)(bq,{className:(0,ao.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));bt.displayName=bo.displayName;let bu=(0,o.A)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var bv=c(8819);let bw=(0,o.A)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),bx=(0,o.A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),by=(0,o.A)("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),bz=(0,f.createContext)(void 0);function bA({children:a}){let[b,c]=(0,f.useState)({smtp:"checking",database:"checking",localStorage:"checking"}),e=async()=>{c(a=>({...a,smtp:"disconnected"})),c(a=>({...a,database:"disconnected"}))};return(0,d.jsx)(bz.Provider,{value:{status:b,checkAllSystems:e},children:a})}function bB(){let{user:a}=(0,e.A)(),{status:b,checkAllSystems:c}=function(){let a=(0,f.useContext)(bz);if(void 0===a)throw Error("useSystemStatus must be used within a SystemStatusProvider");return a}(),[g,h]=(0,f.useState)({appName:"AKs Studio",logoUrl:"/face.png",homeUrl:"/",version:"1.0.0"}),[i,j]=(0,f.useState)("demo"),[k,l]=(0,f.useState)({type:"gradient",gradient:"linear-gradient(135deg,rgba(102, 126, 234, 0.14) 0%,rgba(118, 75, 162, 0.17) 100%)",videoUrl:"",opacity:.3,randomVideo:!0,videoList:["dQw4w9WgXcQ","kJQP7kiw5Fk","fJ9rUzIMcZQ","9bZkp7q19f0","hTWKbfoikeg","YQHsXMglC9A","CevxZvSJLk8","JGwWNGJdvx8","RgKAFK5djSk","OPf0YbXqDm0"]}),[m,o]=(0,f.useState)({companyName:"AKs Studio",version:"1.0.0",logoUrl:"/face.png",websiteUrl:"/",description:"Digital Music Distribution"});if(!a)return(0,d.jsx)("div",{className:"p-6 min-h-screen flex items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Đang tải th\xf4ng tin"}),(0,d.jsx)("p",{className:"text-gray-500",children:"Vui l\xf2ng chờ trong gi\xe2y l\xe1t..."})]})});let p=(a,b,c="error")=>{let d=new CustomEvent("showGlobalNotification",{detail:{title:a,message:b.join(" "),type:c}});window.dispatchEvent(d)};return(0,d.jsxs)("div",{className:"p-2 md:p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsxs)("h2",{className:"text-3xl font-bold text-white flex items-center",children:[(0,d.jsx)(n.A,{className:"mr-3 text-purple-400"}),"C\xe0i đặt hệ thống"]}),(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsxs)("div",{className:"text-sm",children:[(0,d.jsx)("span",{className:"text-gray-400",children:"SMTP:"})," ",(0,d.jsx)(bi,{status:b.smtp})]}),(0,d.jsxs)("div",{className:"text-sm",children:[(0,d.jsx)("span",{className:"text-gray-400",children:"DB:"})," ",(0,d.jsx)(bi,{status:b.database})]}),(0,d.jsxs)("div",{className:"text-sm",children:[(0,d.jsx)("span",{className:"text-gray-400",children:"Storage:"})," ",(0,d.jsx)(bi,{status:b.localStorage})]})]})]}),(0,d.jsxs)(aR.tU,{defaultValue:"app",className:"space-y-6",children:[(0,d.jsxs)(aR.j7,{className:"grid w-full grid-cols-5",children:[(0,d.jsx)(aR.Xi,{value:"app",children:"Name App"}),(0,d.jsx)(aR.Xi,{value:"mode",children:"Mode"}),(0,d.jsx)(aR.Xi,{value:"background",children:"Background"}),(0,d.jsx)(aR.Xi,{value:"footer",children:"Footer"}),(0,d.jsx)(aR.Xi,{value:"guide",children:"Guide"})]}),(0,d.jsx)(aR.av,{value:"app",children:(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border border-gray-700",children:[(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center",children:[(0,d.jsx)(bu,{className:"mr-2"}),"C\xe0i đặt ứng dụng"]})}),(0,d.jsxs)(J.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"T\xean ứng dụng"}),(0,d.jsx)(O.p,{value:g.appName,onChange:a=>h({...g,appName:a.target.value}),placeholder:"[Điều chỉnh t\xean trong ứng dụng]",className:"mt-1"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"Phi\xean bản"}),(0,d.jsx)(O.p,{value:g.version,onChange:a=>h({...g,version:a.target.value}),placeholder:g.version,className:"mt-1"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"Logo URL (Favicon)"}),(0,d.jsx)(O.p,{value:g.logoUrl,onChange:a=>h({...g,logoUrl:a.target.value}),placeholder:g.logoUrl,className:"mt-1"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"Trang chủ URL (Click logo)"}),(0,d.jsx)(O.p,{value:g.homeUrl,onChange:a=>h({...g,homeUrl:a.target.value}),placeholder:g.homeUrl,className:"mt-1"})]})]}),(0,d.jsxs)("div",{className:"border border-gray-600 rounded-lg p-4 bg-gray-700",children:[(0,d.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Xem trước:"}),(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)("img",{src:g.logoUrl||process.env.COMPANY_LOGO||"/logo.svg",alt:"App Logo",className:"h-8 w-8 rounded object-cover",onError:a=>{a.target.src=process.env.COMPANY_LOGO||"/logo.svg"}}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-semibold text-white",children:g.appName}),(0,d.jsxs)("p",{className:"text-sm text-gray-400",children:["v",g.version]})]})]})]}),(0,d.jsxs)(D.$,{onClick:()=>{localStorage.setItem("appSettings_v2",JSON.stringify(g)),p("Lưu th\xe0nh c\xf4ng",["Đ\xe3 lưu c\xe0i đặt ứng dụng!"],"success");let a=document.querySelector("link[rel*='icon']");a&&(a.href=g.logoUrl),document.title=`${g.appName} - Digital Music Distribution`},className:"bg-green-500 hover:bg-green-600 text-white font-semibold rounded-full",children:[(0,d.jsx)(bv.A,{className:"h-4 w-4 mr-2"}),"Lưu c\xe0i đặt ứng dụng"]})]})]})}),(0,d.jsx)(aR.av,{value:"background",children:(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border border-gray-700",children:[(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center",children:[(0,d.jsx)(bw,{className:"mr-2"}),"C\xe0i đặt Background"]})}),(0,d.jsxs)(J.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"Loại Background"}),(0,d.jsxs)(P.l6,{value:k.type,onValueChange:a=>l({...k,type:a}),children:[(0,d.jsx)(P.bq,{className:"mt-1",children:(0,d.jsx)(P.yv,{})}),(0,d.jsxs)(P.gC,{children:[(0,d.jsx)(P.eb,{value:"gradient",children:"Gradient"}),(0,d.jsx)(P.eb,{value:"video",children:"Video YouTube"})]})]})]}),"gradient"===k.type&&(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"CSS Gradient"}),(0,d.jsx)(R.T,{value:k.gradient,onChange:a=>l({...k,gradient:a.target.value}),placeholder:"linear-gradient(135deg,rgba(102, 126, 234, 0.19) 0%,rgba(118, 75, 162, 0.2) 100%)",className:"mt-1",rows:3})]}),"video"===k.type&&(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(bt,{checked:k.randomVideo,onCheckedChange:a=>l({...k,randomVideo:a})}),(0,d.jsx)(Q.J,{children:"Video ngẫu nhi\xean"})]}),!k.randomVideo&&(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"YouTube URL"}),(0,d.jsx)(O.p,{value:k.videoUrl,onChange:a=>l({...k,videoUrl:a.target.value}),placeholder:"https://www.youtube.com/watch?v=...",className:"mt-1"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"Danh s\xe1ch Video ID (mỗi d\xf2ng một ID)"}),(0,d.jsx)(R.T,{value:k.videoList.join("\n"),onChange:a=>l({...k,videoList:a.target.value.split("\n").filter(a=>a.trim())}),placeholder:"dQw4w9WgXcQ kJQP7kiw5Fk ...",className:"mt-1",rows:6})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(Q.J,{children:["Độ mờ: ",k.opacity]}),(0,d.jsx)("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:k.opacity,onChange:a=>l({...k,opacity:Number.parseFloat(a.target.value)}),className:"w-full mt-1"})]}),(0,d.jsxs)(D.$,{onClick:()=>{localStorage.setItem("backgroundSettings_v2",JSON.stringify(k)),window.dispatchEvent(new CustomEvent("backgroundUpdate",{detail:k})),p("Lưu th\xe0nh c\xf4ng",["Đ\xe3 lưu c\xe0i đặt background!"],"success")},className:"bg-purple-500 hover:bg-purple-600 text-white font-semibold rounded-full",children:[(0,d.jsx)(bv.A,{className:"h-4 w-4 mr-2"}),"Lưu c\xe0i đặt Background"]})]})]})}),(0,d.jsx)(aR.av,{value:"footer",children:(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border border-gray-700",children:[(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center",children:[(0,d.jsx)(bx,{className:"mr-2"}),"C\xe0i đặt Footer"]})}),(0,d.jsxs)(J.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"Label records"}),(0,d.jsx)(O.p,{value:m.companyName,onChange:a=>o({...m,companyName:a.target.value}),placeholder:g.appName,className:"mt-1"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"Phi\xean bản"}),(0,d.jsx)(O.p,{value:m.version,onChange:a=>o({...m,version:a.target.value}),placeholder:"1.2.0-beta",className:"mt-1"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"Logo URL"}),(0,d.jsx)(O.p,{value:m.logoUrl,onChange:a=>o({...m,logoUrl:a.target.value}),placeholder:g.logoUrl,className:"mt-1"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"Website URL"}),(0,d.jsx)(O.p,{value:m.websiteUrl,onChange:a=>o({...m,websiteUrl:a.target.value}),placeholder:g.homeUrl,className:"mt-1"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"M\xf4 tả"}),(0,d.jsx)(O.p,{value:m.description,onChange:a=>o({...m,description:a.target.value}),placeholder:"Digital Music Distribution",className:"mt-1"})]}),(0,d.jsxs)(D.$,{onClick:()=>{localStorage.setItem("footerSettings_v2",JSON.stringify(m)),window.dispatchEvent(new CustomEvent("footerUpdate",{detail:m})),p("Lưu th\xe0nh c\xf4ng",["Đ\xe3 lưu c\xe0i đặt footer!"],"success")},className:"bg-green-500 hover:bg-green-600 text-white font-semibold rounded-full",children:[(0,d.jsx)(bv.A,{className:"h-4 w-4 mr-2"}),"Lưu c\xe0i đặt"]})]})]})}),(0,d.jsx)(aR.av,{value:"guide",children:(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border border-gray-700",children:[(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center",children:[(0,d.jsx)(by,{className:"mr-2"}),"Hướng dẫn sử dụng ",g.appName]})}),(0,d.jsx)(J.Wu,{className:"space-y-6",children:(0,d.jsxs)("div",{className:"prose prose-invert max-w-none",children:[(0,d.jsxs)("h3",{children:["\uD83D\uDE80 Hướng dẫn c\xe0i đặt v\xe0 sử dụng ",g.appName]}),(0,d.jsx)("h4",{children:"1. Đăng nhập hệ thống"}),(0,d.jsxs)("ul",{children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Label Manager:"})," admin / admin (to\xe0n quyền)"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Nghệ sĩ:"})," artist / 123456 (quyền hạn chế)"]})]}),(0,d.jsx)("h4",{children:"2. Cấu h\xecnh hệ thống (Label Manager)"}),(0,d.jsxs)("ol",{children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"C\xe0i đặt SMTP:"})," Cấu h\xecnh email để gửi th\xf4ng b\xe1o"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"C\xe0i đặt Database:"})," Kết nối database để lưu trữ dữ liệu"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"C\xe0i đặt ứng dụng:"})," T\xf9y chỉnh t\xean, logo, trang chủ"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"C\xe0i đặt Background:"})," Chọn gradient hoặc video YouTube"]})]}),(0,d.jsx)("h4",{children:"3. Quản l\xfd người d\xf9ng"}),(0,d.jsx)("p",{children:"Label Manager c\xf3 thể:"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"Tạo, sửa, x\xf3a t\xe0i khoản nghệ sĩ"}),(0,d.jsx)("li",{children:"Thay đổi th\xf4ng tin c\xe1 nh\xe2n của nghệ sĩ"}),(0,d.jsx)("li",{children:"Quản l\xfd quyền hạn v\xe0 vai tr\xf2"})]}),(0,d.jsx)("h4",{children:"4. Đăng tải nhạc"}),(0,d.jsx)("p",{children:"Cả Label Manager v\xe0 Nghệ sĩ đều c\xf3 thể:"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"Upload file nhạc (WAV, 24bit+)"}),(0,d.jsx)("li",{children:"Upload ảnh b\xeca (JPG, 4000x4000px)"}),(0,d.jsx)("li",{children:"Điền th\xf4ng tin metadata"}),(0,d.jsx)("li",{children:"Chọn ng\xe0y ph\xe1t h\xe0nh"})]}),(0,d.jsx)("h4",{children:"5. Quản l\xfd b\xe0i h\xe1t"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"Xem danh s\xe1ch submissions"}),(0,d.jsx)("li",{children:"Cập nhật trạng th\xe1i ph\xe1t h\xe0nh"}),(0,d.jsx)("li",{children:"Tải xuống file nhạc v\xe0 ảnh"}),(0,d.jsx)("li",{children:"Quản l\xfd ISRC code"})]}),(0,d.jsx)("h4",{children:"6. T\xecm kiếm ISRC"}),(0,d.jsx)("p",{children:"Sử dụng c\xf4ng cụ t\xedch hợp để:"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"Tra cứu th\xf4ng tin ISRC"}),(0,d.jsx)("li",{children:"Kiểm tra b\xe0i h\xe1t tr\xean c\xe1c platform"}),(0,d.jsx)("li",{children:"Tr\xe1nh tr\xf9ng lặp khi ph\xe1t h\xe0nh"}),(0,d.jsx)("li",{children:"Tr\xe1nh tr\xf9ng lặp khi ph\xe1t h\xe0nh"})]}),"Label Manager"===a.role&&(0,d.jsxs)("div",{className:"mt-8 p-4 bg-blue-900/30 border border-blue-500/50 rounded-lg",children:[(0,d.jsx)("h4",{children:"\uD83D\uDCCB Hướng dẫn Setup cho Label Manager"}),(0,d.jsx)("p",{children:"Để chuyển từ chế độ Demo sang Production:"}),(0,d.jsxs)("ol",{children:[(0,d.jsx)("li",{children:"Cấu h\xecnh SMTP với th\xf4ng tin email thật"}),(0,d.jsx)("li",{children:"Kết nối database (MySQL/PostgreSQL)"}),(0,d.jsx)("li",{children:"Kiểm tra localStorage hoạt động"}),(0,d.jsx)("li",{children:"Khi cả 3 hệ thống kết nối, logo BETA sẽ tự động ẩn"})]}),(0,d.jsx)("h5",{children:"Cấu h\xecnh SMTP Gmail:"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"Server: smtp.gmail.com"}),(0,d.jsx)("li",{children:"Port: 587"}),(0,d.jsx)("li",{children:"Tạo App Password trong Google Account"}),(0,d.jsx)("li",{children:"Sử dụng App Password thay v\xec mật khẩu thường"})]}),(0,d.jsx)("h5",{children:"T\xf9y chỉnh giao diện:"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"Background: Gradient CSS hoặc YouTube video"}),(0,d.jsx)("li",{children:"Logo: Upload v\xe0 set l\xe0m favicon"}),(0,d.jsx)("li",{children:"Footer: T\xf9y chỉnh th\xf4ng tin c\xf4ng ty"}),(0,d.jsx)("li",{children:"Font: Dosis (mặc định, kh\xf4ng thay đổi)"})]})]}),(0,d.jsxs)("div",{className:"mt-6 p-4 bg-gray-700 rounded-lg",children:[(0,d.jsx)("h5",{children:"\uD83D\uDCA1 Mẹo sử dụng:"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"Click v\xe0o logo để về trang chủ"}),(0,d.jsx)("li",{children:"Sử dụng t\xednh năng t\xecm kiếm ISRC trước khi ph\xe1t h\xe0nh"}),(0,d.jsx)("li",{children:"Backup dữ liệu thường xuy\xean"}),(0,d.jsx)("li",{children:"Kiểm tra trạng th\xe1i kết nối ở g\xf3c phải m\xe0n h\xecnh"})]})]})]})})]})}),(0,d.jsx)(aR.av,{value:"mode",children:(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border border-gray-700",children:[(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center font-semibold",children:[(0,d.jsx)(v.A,{className:"mr-2"}),"Chế độ ứng dụng"]})}),(0,d.jsxs)(J.Wu,{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)(Q.J,{className:"text-lg font-semibold",children:["Chế độ hiện tại: ","production"===i?"Production":"Demo"]}),(0,d.jsxs)("div",{className:"mt-2 p-4 bg-gray-700 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm",children:"Demo Mode"}),(0,d.jsx)(bt,{checked:"demo"===i,onCheckedChange:a=>{a&&"demo"!==i&&(localStorage.setItem("APP_MODE","demo"),j("demo"),window.location.reload())}})]}),(0,d.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Sử dụng dữ liệu demo, kh\xf4ng kết nối database/SMTP thực"})]})]}),(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:"mt-2 p-4 bg-gray-700 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm",children:"Production Mode"}),(0,d.jsx)(bt,{checked:"production"===i,onCheckedChange:a=>{a&&"production"!==i&&(localStorage.setItem("APP_MODE","production"),j("production"),window.location.reload())}})]}),(0,d.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Kết nối database v\xe0 SMTP thực, test ch\xednh thức"})]})})]}),(0,d.jsx)("div",{className:"space-y-4",children:(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"text-lg font-semibold",children:"Th\xf4ng tin chế độ"}),(0,d.jsxs)("div",{className:"mt-2 p-4 bg-blue-900/20 border border-blue-600 rounded-lg",children:[(0,d.jsx)("h4",{className:"font-semibold text-blue-400 mb-2",children:"\uD83D\uDD27 Production Mode"}),(0,d.jsxs)("ul",{className:"text-sm space-y-1 text-gray-300",children:[(0,d.jsx)("li",{children:"✅ Kết nối PostgreSQL Database thực"}),(0,d.jsx)("li",{children:"✅ Gửi email qua SMTP thực"}),(0,d.jsx)("li",{children:"✅ Authentication từ database"}),(0,d.jsx)("li",{children:"✅ Lưu dữ liệu v\xe0o database"}),(0,d.jsx)("li",{children:"⚠️ Cần cấu h\xecnh database v\xe0 SMTP đ\xfang"})]})]}),(0,d.jsxs)("div",{className:"mt-4 p-4 bg-yellow-900/20 border border-yellow-600 rounded-lg",children:[(0,d.jsx)("h4",{className:"font-semibold text-yellow-400 mb-2",children:"\uD83C\uDFAE Demo Mode"}),(0,d.jsxs)("ul",{className:"text-sm space-y-1 text-gray-300",children:[(0,d.jsx)("li",{children:"\uD83C\uDFAF Dữ liệu demo/mock"}),(0,d.jsx)("li",{children:"\uD83C\uDFAF Authentication giả lập"}),(0,d.jsx)("li",{children:"\uD83C\uDFAF Email chỉ hiển thị, kh\xf4ng gửi thực"}),(0,d.jsx)("li",{children:"\uD83C\uDFAF Ph\xf9 hợp để demo/test UI"}),(0,d.jsx)("li",{children:"\uD83D\uDCA1 Kh\xf4ng cần cấu h\xecnh g\xec"})]})]})]})})]}),(0,d.jsx)("div",{className:"border-t border-gray-600 pt-4",children:(0,d.jsxs)("div",{className:"bg-orange-900/20 border border-orange-600 rounded-lg p-4",children:[(0,d.jsx)("h4",{className:"font-semibold text-orange-400 mb-2",children:"⚡ Lưu \xfd quan trọng"}),(0,d.jsx)("p",{className:"text-sm text-gray-300",children:"Thay đổi chế độ sẽ reload lại ứng dụng. Đảm bảo bạn đ\xe3 cấu h\xecnh đ\xfang Database URL v\xe0 SMTP settings trong file .env.local trước khi chuyển sang Production Mode."})]})})]})]})})]}),(0,d.jsx)("div",{className:"mt-8",children:(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border border-gray-700",children:[(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center",children:[(0,d.jsx)(n.A,{className:"mr-2"}),"C\xe0i đặt hệ thống"]})}),(0,d.jsx)(J.Wu,{children:(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,d.jsxs)(J.Zp,{children:[(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center",children:[(0,d.jsx)(v.A,{className:"mr-2"}),"Trạng th\xe1i hệ thống"]})}),(0,d.jsx)(J.Wu,{children:(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("span",{children:"Nền tảng"}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,d.jsx)("span",{className:"text-sm text-green-600",children:"Online"})]})]}),(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("span",{children:"Database"}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,d.jsx)("span",{className:"text-sm text-yellow-600",children:"Demo Mode"})]})]})]})})]}),(0,d.jsxs)(J.Zp,{children:[(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center",children:[(0,d.jsx)(bw,{className:"mr-2"}),"Giao diện"]})}),(0,d.jsx)(J.Wu,{children:(0,d.jsx)("p",{className:"text-gray-600",children:"C\xe0i đặt giao diện sẽ c\xf3 trong bản cập nhật sau..."})})]}),"Label Manager"===a.role&&(0,d.jsxs)(J.Zp,{children:[(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center",children:[(0,d.jsx)(r.A,{className:"mr-2"}),"Cấu h\xecnh Email"]})}),(0,d.jsx)(J.Wu,{children:(0,d.jsx)("p",{className:"text-gray-600",children:"C\xe0i đặt SMTP c\xf3 sẵn trong Bảng điều khiển Quản trị"})})]})]})})]})})]})}let bC=(0,o.A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function bD(){let[a,b]=(0,f.useState)([]),[c,e]=(0,f.useState)(!0),[g,h]=(0,f.useState)(0);return(0,d.jsxs)("div",{className:"p-2 md:p-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,d.jsxs)("h2",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,d.jsx)(p,{className:"mr-3 text-purple-400"}),"Quản L\xfd Người D\xf9ng"]}),(0,d.jsxs)(D.$,{className:"bg-purple-600 hover:bg-purple-700",children:[(0,d.jsx)(bC,{className:"h-4 w-4 mr-2"}),"Th\xeam Người D\xf9ng"]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(0,d.jsxs)(J.Zp,{children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium",children:"Tổng Người D\xf9ng"}),(0,d.jsx)(p,{className:"h-4 w-4 text-purple-500"})]}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"text-2xl font-bold",children:c?"...":a.length}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Người d\xf9ng hoạt động"})]})]}),(0,d.jsxs)(J.Zp,{children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium",children:"Quản L\xfd Nh\xe3n Hiệu"}),(0,d.jsx)(q.A,{className:"h-4 w-4 text-blue-500"})]}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"text-2xl font-bold",children:a.filter(a=>"Label Manager"===a.role).length}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Người d\xf9ng quản trị"})]})]}),(0,d.jsxs)(J.Zp,{children:[(0,d.jsxs)(J.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,d.jsx)(J.ZB,{className:"text-sm font-medium",children:"Nghệ Sĩ"}),(0,d.jsx)(p,{className:"h-4 w-4 text-green-500"})]}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"text-2xl font-bold",children:a.filter(a=>"Artist"===a.role).length}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"T\xe0i khoản nghệ sĩ"})]})]})]}),(0,d.jsxs)(J.Zp,{children:[(0,d.jsx)(J.aR,{children:(0,d.jsx)(J.ZB,{children:"Danh S\xe1ch Người D\xf9ng"})}),(0,d.jsx)(J.Wu,{children:(0,d.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-semibold",children:a.fullName}),(0,d.jsxs)("p",{className:"text-sm text-gray-600",children:["@",a.username," • ",a.email]}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:a.role})]}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)(D.$,{variant:"outline",size:"sm",children:"Chỉnh Sửa"}),(0,d.jsx)(D.$,{variant:"destructive",size:"sm",children:"X\xf3a"})]})]},a.id))})})]})]})}let bE=(0,f.createContext)(void 0);function bF({children:a,requireRole:b,requirePermission:c,fallbackComponent:e,fallbackMessage:g="You don't have permission to access this feature."}){let{user:h}=function(){let a=(0,f.useContext)(bE);return a?{user:a.user,isAuthenticated:!!a.user,isLoading:a.loading,login:a.login,logout:a.logout}:{user:null,isAuthenticated:!1,isLoading:!1,login:async()=>!1,logout:()=>{}}}();if(!h)return null;if(b&&h.role!==b)return e||(0,d.jsxs)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[(0,d.jsx)("p",{className:"text-yellow-800 text-sm",children:g}),(0,d.jsxs)("p",{className:"text-xs text-yellow-600 mt-1",children:["Required role: ",b]})]});if(c){let a=!1;switch(c){case"systemSettings":a=a6.canAccessSystemSettings(h).allowed;break;case"debugTools":a=a6.canUseDebugTools(h).allowed;break;case"fullStatistics":a=a6.canViewFullStatistics(h).allowed;break;case"approveReject":a=a6.canApproveRejectSubmission(h).allowed}if(!a)return e||(0,d.jsxs)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[(0,d.jsx)("p",{className:"text-yellow-800 text-sm",children:g}),(0,d.jsxs)("p",{className:"text-xs text-yellow-600 mt-1",children:["Required permission: ",c]})]})}return(0,d.jsx)(d.Fragment,{children:a})}function bG(){let[a,b]=(0,f.useState)(""),c=async()=>{let a=await a1.getStatus();b(JSON.stringify(a,null,2)),a.api?a_.v.info("Database connection check successful",{component:"DebugTools",action:"checkDatabase"}):a_.v.warn("Database connection check failed",{component:"DebugTools",action:"checkDatabase",data:"API connection failed"})};return(0,d.jsx)(bF,{requirePermission:"debugTools",fallbackMessage:"Debug tools are only available for Label Managers.",children:(0,d.jsxs)(J.Zp,{className:"shadow-md",children:[(0,d.jsx)(J.aR,{children:(0,d.jsx)(J.ZB,{children:"Debug Tools"})}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsxs)(aR.tU,{defaultValue:"logs",children:[(0,d.jsxs)(aR.j7,{className:"mb-4",children:[(0,d.jsx)(aR.Xi,{value:"logs",children:"Logs"}),(0,d.jsx)(aR.Xi,{value:"db",children:"Database"}),(0,d.jsx)(aR.Xi,{value:"storage",children:"Storage"})]}),(0,d.jsx)(aR.av,{value:"logs",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)(D.$,{onClick:()=>{a_.v.debug("Test debug message",{testData:{value:123}}),a_.v.info("Test info message",{testData:{value:456}}),a_.v.warn("Test warning message",{testData:{value:789}}),a_.v.error("Test error message",{error:Error("Test error")}),b("Generated 4 test log entries")},children:"Generate Test Logs"}),(0,d.jsx)(D.$,{variant:"outline",onClick:()=>a_.v.clearLogs(),children:"Clear Logs"})]})}),(0,d.jsx)(aR.av,{value:"db",children:(0,d.jsx)("div",{className:"space-y-4",children:(0,d.jsx)(D.$,{onClick:c,children:"Check Database Connection"})})}),(0,d.jsx)(aR.av,{value:"storage",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)(D.$,{variant:"destructive",onClick:()=>{},children:"Clear All Data"}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Warning: This will clear all localStorage data including logs and submissions"})]})})]}),a&&(0,d.jsx)("div",{className:"mt-4 p-4 bg-gray-100 rounded-md",children:(0,d.jsx)("pre",{className:"text-xs overflow-auto max-h-40",children:a})})]})]})})}function bH({showModal:a}){let{user:b}=(0,e.A)(),[c,g]=(0,f.useState)(null),[h,i]=(0,f.useState)(!0),[j,k]=(0,f.useState)("overview"),[l,m]=(0,f.useState)([]),[o,r]=(0,f.useState)([]),[s,t]=(0,f.useState)(!1),[u,w]=(0,f.useState)(!1);return b?"Label Manager"!==b.role?(a_.v.warn("AdminPanelView: Access denied for non-label manager",{component:"AdminPanelView",userId:b.id,role:b.role}),(0,d.jsx)("div",{className:"p-6",children:(0,d.jsx)(J.Zp,{children:(0,d.jsxs)(J.Wu,{className:"text-center py-12",children:[(0,d.jsx)(q.A,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),(0,d.jsx)("h3",{className:"text-xl font-semibold text-red-600 mb-2",children:"Access Denied"}),(0,d.jsx)("p",{className:"text-gray-500",children:"Only Label Managers can access the Admin Panel"})]})})})):(a_.v.info("AdminPanelView: Component rendered",{component:"AdminPanelView",userId:b.id}),(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsxs)("h2",{className:"text-3xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,d.jsx)(q.A,{className:"mr-3 text-purple-400"}),"Admin Panel"]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,d.jsxs)(J.Zp,{children:[(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center",children:[(0,d.jsx)(v.A,{className:"mr-2"}),"Database"]})}),(0,d.jsx)(J.Wu,{children:(0,d.jsxs)("div",{className:"text-center py-4",children:[(0,d.jsx)("div",{className:`w-2 h-2 rounded-full mx-auto mb-2 ${h?"bg-gray-400":c?.database.connected?"bg-green-500":"bg-red-500"}`}),(0,d.jsx)("p",{className:`text-sm ${h?"text-gray-600":c?.database.connected?"text-green-600":"text-red-600"}`,children:h?"Checking...":c?.database.connected?`Connected (${c.database.type})`:"Disconnected"})]})})]}),(0,d.jsxs)(J.Zp,{children:[(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center",children:[(0,d.jsx)(p,{className:"mr-2"}),"Users"]})}),(0,d.jsx)(J.Wu,{children:(0,d.jsxs)("div",{className:"text-center py-4",children:[(0,d.jsx)("div",{className:"text-2xl font-bold",children:h?"...":c?.users.totalArtists??0}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Active Artists"})]})})]}),(0,d.jsxs)(J.Zp,{children:[(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center",children:[(0,d.jsx)(n.A,{className:"mr-2"}),"System"]})}),(0,d.jsx)(J.Wu,{children:(0,d.jsxs)("div",{className:"text-center py-4",children:[(0,d.jsx)("div",{className:"text-lg font-bold",children:h?"...":c?.system.version??"Unknown"}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:h?"Loading...":c?.system.environment??"Unknown"})]})})]})]}),(0,d.jsx)("div",{className:"mb-8",children:(0,d.jsx)(bG,{})})]})):(0,d.jsx)("div",{className:"p-6 min-h-screen flex items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Đang tải th\xf4ng tin"}),(0,d.jsx)("p",{className:"text-gray-500",children:"Vui l\xf2ng chờ trong gi\xe2y l\xe1t..."})]})})}let bI=(0,o.A)("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]),bJ=(0,o.A)("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);var bK=c(27900);let bL=(0,o.A)("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),bM=(0,o.A)("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]),bN=(0,o.A)("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),bO=(0,o.A)("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),bP=(0,o.A)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),bQ=(0,o.A)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),bR=(0,o.A)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);function bS({value:a,onChange:b,placeholder:c,mode:e="text"}){let[g,h]=(0,f.useState)(!1),[i,j]=(0,f.useState)(e),k=(c,d="")=>{let e=document.getElementById("rich-editor");if(!e)return;let f=e.selectionStart,g=e.selectionEnd,h=a.substring(f,g),i=a.substring(0,f)+c+h+d+a.substring(g);b(i,l(i)),setTimeout(()=>{e.focus(),e.setSelectionRange(f+c.length,f+c.length+h.length)},0)},l=a=>"html"===i?a:a.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/__(.*?)__/g,"<u>$1</u>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\[([^\]]+)\]$$([^)]+)$$/g,'<a href="$2">$1</a>').replace(/\n/g,"<br>"),m=[{icon:bM,action:()=>k("**","**"),title:"Bold"},{icon:bN,action:()=>k("*","*"),title:"Italic"},{icon:bO,action:()=>k("__","__"),title:"Underline"},{icon:bP,action:()=>k("`","`"),title:"Code"},{icon:bQ,action:()=>k("[","](url)"),title:"Link"},{icon:bx,action:()=>k("![","](url)"),title:"Image"}];return(0,d.jsxs)("div",{className:"border border-gray-600 rounded-lg overflow-hidden",children:[(0,d.jsxs)("div",{className:"bg-gray-700 p-2 flex items-center justify-between border-b border-gray-600",children:[(0,d.jsx)("div",{className:"flex items-center space-x-1",children:m.map((a,b)=>(0,d.jsx)(D.$,{variant:"ghost",size:"sm",onClick:a.action,className:"h-8 w-8 p-0",title:a.title,children:(0,d.jsx)(a.icon,{className:"h-4 w-4"})},b))}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(D.$,{variant:"ghost",size:"sm",onClick:()=>j("html"===i?"text":"html"),className:"text-xs",children:"html"===i?"HTML":"Text"}),(0,d.jsx)(D.$,{variant:"ghost",size:"sm",onClick:()=>h(!g),className:"h-8 w-8 p-0",title:g?"Edit":"Preview",children:g?(0,d.jsx)(bR,{className:"h-4 w-4"}):(0,d.jsx)(a8,{className:"h-4 w-4"})})]})]}),(0,d.jsx)("div",{className:"min-h-[200px]",children:g?(0,d.jsx)("div",{className:"p-4 prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:l(a)}}):(0,d.jsx)(R.T,{id:"rich-editor",value:a,onChange:a=>b(a.target.value,l(a.target.value)),placeholder:c,className:"border-0 rounded-none resize-none min-h-[200px] focus:ring-0"})}),(0,d.jsx)("div",{className:"bg-gray-750 p-2 text-xs text-gray-400",children:"text"===i?"Markdown: **bold** *italic* __underline__ `code` [link](url) ![image](url)":"HTML: <strong>bold</strong> <em>italic</em> <u>underline</u> <code>code</code>"})]})}async function bT(a){return new Promise(a=>setTimeout(()=>a({success:!0,message:"Email sent successfully."}),1e3))}function bU({showModal:a}){let[b,c]=(0,f.useState)([]),[e,g]=(0,f.useState)(null),[h,i]=(0,f.useState)(!1),[j,k]=(0,f.useState)([]),[m,o]=(0,f.useState)("Connected"),[p,q]=(0,f.useState)(new Date().toLocaleString("vi-VN")),[s,t]=(0,f.useState)({from:"",to:"",cc:"",bcc:"",subject:"",content:"",htmlContent:"",type:"text"}),[u,v]=(0,f.useState)({smtpServer:"",smtpPort:"587",smtpUsername:"",smtpPassword:"",connected:!1}),w=a=>{localStorage.setItem("emailTemplates_v2",JSON.stringify(a))},x=()=>{o("Syncing..."),setTimeout(()=>{o("Connected"),q(new Date().toLocaleString("vi-VN"))},2e3)},y=d=>{if(confirm("Bạn c\xf3 chắc muốn x\xf3a mẫu email n\xe0y?")){let f=b.filter(a=>a.id!==d);c(f),w(f),e?.id===d&&g(null),a("X\xf3a th\xe0nh c\xf4ng",["Đ\xe3 x\xf3a mẫu email"],"success")}},z=async()=>{if(!s.to||!s.subject||!s.content)return void a("Lỗi gửi email",["Vui l\xf2ng điền đầy đủ th\xf4ng tin"],"error");let b={from:s.from,to:s.to,cc:s.cc,bcc:s.bcc,subject:s.subject,textBody:"text"===s.type?s.content:"Vui l\xf2ng xem nội dung HTML.",htmlBody:"html"===s.type?s.htmlContent:void 0},c=await bT(b);if(c.success){let d=[{id:`msg_${Date.now()}`,...b,content:s.content,date:new Date().toLocaleString("vi-VN"),read:!0,type:"sent"},...j];k(d),localStorage.setItem("emailMessages_v2",JSON.stringify(d)),a("Gửi email th\xe0nh c\xf4ng",[c.message],"success"),t({from:"",to:"",cc:"",bcc:"",subject:"",content:"",htmlContent:"",type:"text"})}else a("Lỗi gửi email",[c.message],"error")},A=j.filter(a=>!a.read&&"received"===a.type).length;return(0,d.jsxs)("div",{className:"p-6 font-sans",children:[(0,d.jsxs)("h2",{className:"text-3xl font-bold text-white mb-6 flex items-center",children:[(0,d.jsx)(r.A,{className:"mr-3 text-purple-400"}),"Trung t\xe2m email","Connected"===m&&(0,d.jsx)(ba,{className:"ml-2 h-5 w-5 text-green-400"})]}),(0,d.jsxs)(aR.tU,{defaultValue:"inbox",className:"space-y-6",children:[(0,d.jsxs)(aR.j7,{className:"grid w-full grid-cols-5 font-medium",children:[(0,d.jsxs)(aR.Xi,{value:"inbox",className:"relative",children:["Hộp thư",A>0&&(0,d.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:A})]}),(0,d.jsx)(aR.Xi,{value:"compose",children:"Soạn email"}),(0,d.jsx)(aR.Xi,{value:"templates",children:"Mẫu email"}),(0,d.jsx)(aR.Xi,{value:"settings",children:"C\xe0i đặt SMTP"}),(0,d.jsx)(aR.Xi,{value:"sync",children:"Đồng bộ"})]}),(0,d.jsx)(aR.av,{value:"inbox",className:"space-y-6",children:(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center justify-between font-semibold",children:[(0,d.jsxs)("span",{className:"flex items-center",children:[(0,d.jsx)(bI,{className:"mr-2"}),"Hộp thư đến (",j.length,")"]}),(0,d.jsxs)(D.$,{onClick:x,variant:"outline",disabled:"Syncing..."===m,className:"font-medium",children:[(0,d.jsx)(bJ,{className:"mr-2 h-4 w-4"}),"Syncing..."===m?"Đang đồng bộ...":"Đồng bộ"]})]})}),(0,d.jsxs)(J.Wu,{children:[(0,d.jsx)("div",{className:"space-y-2",children:j.map(a=>(0,d.jsx)(J.Zp,{className:`cursor-pointer transition-colors ${a.read?"bg-gray-700":"bg-blue-900/30"} border-gray-600 hover:bg-gray-600`,onClick:()=>(a=>{let b=j.map(b=>b.id===a?{...b,read:!0}:b);k(b),localStorage.setItem("emailMessages_v2",JSON.stringify(b))})(a.id),children:(0,d.jsx)(J.Wu,{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,d.jsx)("span",{className:`px-2 py-1 rounded text-xs font-dosis-medium ${"sent"===a.type?"bg-green-600":"bg-blue-600"}`,children:"sent"===a.type?"Đ\xe3 gửi":"Nhận"}),!a.read&&"received"===a.type&&(0,d.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),(0,d.jsx)("h4",{className:"font-semibold text-white",children:a.subject}),(0,d.jsx)("p",{className:"text-gray-400 text-sm font-sans",children:"sent"===a.type?`Đến: ${a.to}`:`Từ: ${a.from}`}),(0,d.jsx)("p",{className:"text-gray-500 text-sm mt-1 line-clamp-2 font-sans",children:a.content})]}),(0,d.jsx)("div",{className:"text-right",children:(0,d.jsx)("p",{className:"text-xs text-gray-500 font-sans",children:a.date})})]})})},a.id))}),(0,d.jsxs)("div",{className:"mt-4 text-center text-gray-500 text-sm font-sans",children:["Lần đồng bộ cuối: ",p]})]})]})}),(0,d.jsx)(aR.av,{value:"compose",className:"space-y-6",children:(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border-gray-700 font-sans",children:[(0,d.jsxs)(J.aR,{children:[" ",(0,d.jsxs)(J.ZB,{className:"flex items-center font-semibold",children:[(0,d.jsx)(bK.A,{className:"mr-2"}),"Soạn email mới"]})]}),(0,d.jsxs)(J.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"font-medium",children:"Từ (From)"}),(0,d.jsx)(O.p,{value:s.from,onChange:a=>t({...s,from:a.target.value}),placeholder:"your-email@example.com",className:"font-sans"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"font-medium",children:"Đến (To) *"}),(0,d.jsx)(O.p,{value:s.to,onChange:a=>t({...s,to:a.target.value}),placeholder:"recipient@example.com",className:"font-sans"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"font-medium",children:"CC"}),(0,d.jsx)(O.p,{value:s.cc,onChange:a=>t({...s,cc:a.target.value}),placeholder:"cc@domain.com",className:"font-sans"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"font-medium",children:"BCC"}),(0,d.jsx)(O.p,{value:s.bcc,onChange:a=>t({...s,bcc:a.target.value}),placeholder:"bcc@domain.com",className:"font-sans"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"font-medium",children:"Chủ đề (Subject) *"}),(0,d.jsx)(O.p,{value:s.subject,onChange:a=>t({...s,subject:a.target.value}),placeholder:"Chủ đề email...",className:"font-sans"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"font-medium",children:"Ph\xe2n loại nội dung"}),(0,d.jsxs)(P.l6,{value:s.type,onValueChange:a=>t({...s,type:a}),children:[(0,d.jsx)(P.bq,{className:"w-48 font-sans",children:(0,d.jsx)(P.yv,{})}),(0,d.jsxs)(P.gC,{children:[(0,d.jsx)(P.eb,{value:"text",className:"font-sans",children:"Văn bản thuần"}),(0,d.jsx)(P.eb,{value:"html",className:"font-sans",children:"HTML"})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"font-medium",children:"Nội dung email *"}),(0,d.jsx)(bS,{value:s.content,onChange:(a,b)=>t({...s,content:a,htmlContent:b}),mode:s.type,placeholder:"Nội dung email..."})]}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsxs)(D.$,{onClick:z,className:"bg-blue-600 hover:bg-blue-700 font-medium",children:[(0,d.jsx)(bK.A,{className:"mr-2 h-4 w-4"}),"Gửi"]}),(0,d.jsx)(D.$,{variant:"outline",onClick:()=>t({from:"",to:"",cc:"",bcc:"",subject:"",content:"",htmlContent:"",type:"text"}),className:"font-medium",children:"X\xf3a form"})]})]})]})}),(0,d.jsx)(aR.av,{value:"templates",className:"space-y-6",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border-gray-700 font-sans",children:[(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center justify-between font-semibold",children:[(0,d.jsxs)("span",{className:"flex items-center",children:[(0,d.jsx)(l.A,{className:"mr-2"}),"Mẫu email (",b.length,")"]}),(0,d.jsx)(D.$,{onClick:()=>{g({id:`template_${Date.now()}`,name:"Mẫu email mới",subject:"",content:"",htmlContent:"",type:"text",variables:[]}),i(!0)},size:"sm",className:"bg-green-600 hover:bg-green-700 font-medium",children:(0,d.jsx)(a$,{className:"h-4 w-4"})})]})}),(0,d.jsx)(J.Wu,{className:"space-y-2",children:b.map(a=>(0,d.jsx)("div",{role:"button",tabIndex:0,"aria-pressed":e?.id===a.id,className:`p-3 rounded-lg cursor-pointer transition-colors email-template-card text-left w-full ${e?.id===a.id?"bg-purple-600":"bg-gray-700 hover:bg-gray-600"}`,onClick:()=>g(a),onKeyDown:b=>{("Enter"===b.key||" "===b.key)&&(b.preventDefault(),g(a))},children:(0,d.jsxs)("div",{className:"flex items-center justify-between font-sans",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"font-semibold text-white",children:a.name}),(0,d.jsx)("p",{className:"text-xs text-gray-400",children:a.type.toUpperCase()})]}),(0,d.jsxs)("div",{className:"flex space-x-1",children:[(0,d.jsx)("div",{role:"button",tabIndex:0,"aria-label":"Edit template",className:"h-8 w-8 p-0 font-sans inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground cursor-pointer",onClick:b=>{b.stopPropagation(),g(a),i(!0)},onKeyDown:b=>{("Enter"===b.key||" "===b.key)&&(b.preventDefault(),b.stopPropagation(),g(a),i(!0))},children:(0,d.jsx)(a9,{className:"h-4 w-4"})}),(0,d.jsx)("div",{role:"button",tabIndex:0,"aria-label":"Delete template",className:"h-8 w-8 p-0 text-red-400 hover:text-red-300 font-sans inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground cursor-pointer",onClick:b=>{b.stopPropagation(),y(a.id)},onKeyDown:b=>{("Enter"===b.key||" "===b.key)&&(b.preventDefault(),b.stopPropagation(),y(a.id))},children:(0,d.jsx)(aZ.A,{className:"h-4 w-4"})})]})]})},a.id))})]}),(0,d.jsx)("div",{className:"lg:col-span-2",children:e?(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border-gray-700 font-sans",children:[" ",(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center justify-between font-semibold",children:[(0,d.jsxs)("span",{children:[h?"Chỉnh sửa":"Xem"," mẫu email"]}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsxs)(D.$,{onClick:()=>(b=>{let c=b.variables.map(a=>`[${a}]`).join(", ");navigator.clipboard.writeText(c),a("Copy th\xe0nh c\xf4ng",[`Đ\xe3 copy c\xe1c biến: ${c}`],"success")})(e),variant:"outline",size:"sm",className:"font-medium",children:[(0,d.jsx)(be,{className:"mr-2 h-4 w-4"}),"Copy biến"]}),(0,d.jsxs)(D.$,{onClick:()=>{if(!e)return;let b={tennghesi:"Nguyễn Văn A",tenbaihat:"B\xe0i h\xe1t test",id:"MH123456",trangthai:"Đ\xe3 duyệt, đang chờ ph\xe1t h\xe0nh!",ngaygui:new Date().toLocaleDateString("vi-VN"),ngayphathanh:new Date(Date.now()+6048e5).toLocaleDateString("vi-VN"),tenmanager:"An Kun Studio",email:"manager@yourdomain.com",tenlabel:"An Kun Studio",username:"test_user",vaitro:"Nghệ sĩ"},c=e.content;Object.entries(b).forEach(([a,b])=>{c=c.replace(RegExp(`\\[${a}\\]`,"g"),b)}),a("Test email",[c],"success")},variant:"outline",size:"sm",className:"font-medium",children:[(0,d.jsx)(bL,{className:"mr-2 h-4 w-4"}),"Test"]}),h?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(D.$,{onClick:()=>{if(!e)return;let d=b.filter(a=>a.id!==e.id);d.push(e),c(d),w(d),i(!1),a("Lưu th\xe0nh c\xf4ng",[`Đ\xe3 lưu mẫu email "${e.name}"`],"success")},className:"bg-green-600 hover:bg-green-700 font-medium",children:"Lưu"}),(0,d.jsx)(D.$,{variant:"outline",onClick:()=>i(!1),className:"font-medium",children:"Hủy"})]}):(0,d.jsxs)(D.$,{variant:"outline",onClick:()=>i(!0),className:"font-medium",children:[(0,d.jsx)(a9,{className:"mr-2 h-4 w-4"}),"Sửa"]})]})]})}),(0,d.jsxs)(J.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"font-medium",children:"T\xean mẫu"}),(0,d.jsx)(O.p,{value:e.name,onChange:a=>g({...e,name:a.target.value}),disabled:!h,className:"font-sans"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"font-medium",children:"Chủ đề email"}),(0,d.jsx)(O.p,{value:e.subject,onChange:a=>g({...e,subject:a.target.value}),disabled:!h,placeholder:"Chủ đề email...",className:"font-sans"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"font-medium",children:"Loại nội dung"}),(0,d.jsxs)(P.l6,{value:e.type,onValueChange:a=>g({...e,type:a}),disabled:!h,children:[(0,d.jsx)(P.bq,{className:"font-sans",children:(0,d.jsx)(P.yv,{})}),(0,d.jsxs)(P.gC,{children:[(0,d.jsx)(P.eb,{value:"text",className:"font-sans",children:"Văn bản thuần"}),(0,d.jsx)(P.eb,{value:"html",className:"font-sans",children:"HTML"})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"font-medium",children:"Nội dung email"}),h?(0,d.jsx)(bS,{value:e.content,onChange:(a,b)=>g({...e,content:a,htmlContent:b}),mode:e.type,placeholder:"Nội dung email..."}):(0,d.jsx)("div",{className:"border border-gray-600 rounded-lg p-4 min-h-[200px] bg-gray-700",children:"html"===e.type?(0,d.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content}}):(0,d.jsx)("pre",{className:"whitespace-pre-wrap text-sm font-sans",children:e.content})})]}),(0,d.jsxs)("div",{children:[" ",(0,d.jsx)(Q.J,{className:"font-medium",children:"Biến sẵn c\xf3"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:["tennghesi","tenbaihat","id","trangthai","ngaygui","ngayphathanh","tenmanager","email","tenlabel","username","vaitro"].map(a=>(0,d.jsxs)("button",{type:"button",className:"px-2 py-1 bg-purple-600 text-white text-xs rounded cursor-pointer hover:bg-purple-700",onClick:()=>{if(h){let b=e.content+`[${a}]`;g({...e,content:b})}},onKeyDown:b=>{if(("Enter"===b.key||" "===b.key)&&h){b.preventDefault();let c=e.content+`[${a}]`;g({...e,content:c})}},tabIndex:0,"aria-label":`Ch\xe8n biến ${a}`,children:["[",a,"]"]},a))})]})]})]}):(0,d.jsx)(J.Zp,{className:"bg-gray-800 border-gray-700",children:(0,d.jsxs)(J.Wu,{className:"p-8 text-center",children:[(0,d.jsx)(l.A,{className:"mx-auto h-12 w-12 text-gray-500 mb-4 font-sans"}),(0,d.jsx)("p",{className:"text-gray-400 font-sans",children:"Chọn một mẫu email để xem hoặc chỉnh sửa"})]})})})]})}),(0,d.jsx)(aR.av,{value:"settings",className:"space-y-6",children:(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border-gray-700 font-sans",children:[(0,d.jsxs)(J.aR,{children:[" ",(0,d.jsxs)(J.ZB,{className:"flex items-center font-semibold",children:[(0,d.jsx)(n.A,{className:"mr-2"}),"C\xe0i đặt SMTP"]})]}),(0,d.jsxs)(J.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"font-dosis-medium",children:"SMTP Server"}),(0,d.jsx)(O.p,{value:u.smtpServer,onChange:a=>v({...u,smtpServer:a.target.value}),placeholder:"smtp.mail.me.com",className:"font-dosis"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"font-dosis-medium",children:"Port"}),(0,d.jsx)(O.p,{value:u.smtpPort,onChange:a=>v({...u,smtpPort:a.target.value}),placeholder:"587",className:"font-dosis"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"font-dosis-medium",children:"Username"}),(0,d.jsx)(O.p,{value:u.smtpUsername,onChange:a=>v({...u,smtpUsername:a.target.value}),placeholder:"your-email@example.com",className:"font-dosis"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{className:"font-dosis-medium",children:"Password"}),(0,d.jsx)(O.p,{type:"password",value:u.smtpPassword||"",onChange:a=>v({...u,smtpPassword:a.target.value}),placeholder:"grsa-aaxz-midn-pjta",className:"font-dosis"})]})]}),(0,d.jsx)("div",{className:"flex items-center space-x-2",children:u.connected?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ba,{className:"h-5 w-5 text-green-400"}),(0,d.jsx)("span",{className:"text-green-400 font-dosis",children:"Đ\xe3 kết nối (theo c\xe0i đặt đ\xe3 lưu)"})]}):(0,d.jsx)("span",{className:"text-yellow-400 font-dosis",children:"Chưa kết nối hoặc chưa lưu c\xe0i đặt."})}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsxs)(D.$,{onClick:()=>{localStorage.setItem("emailSettings_v2",JSON.stringify({...u,connected:!1})),a("Lưu th\xe0nh c\xf4ng",["Đ\xe3 lưu c\xe0i đặt SMTP. Vui l\xf2ng test lại kết nối."],"success")},className:"bg-green-600 hover:bg-green-700 font-dosis-medium",children:[(0,d.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"Lưu c\xe0i đặt"]}),(0,d.jsxs)(D.$,{variant:"outline",onClick:async()=>{if(!u.smtpUsername)return void a("Lỗi Test SMTP",["Vui l\xf2ng nhập Username SMTP."],"error");let b={from:u.smtpUsername,to:u.smtpUsername,subject:`Test Email - Email Center - ${new Date().toISOString()}`,textBody:`Đ\xe2y l\xe0 email test từ Trung t\xe2m Email.
Cấu h\xecnh SMTP của bạn hoạt động b\xecnh thường!`},c=await bT(b);v({...u,connected:c.success}),a(c.success?"Test SMTP Th\xe0nh C\xf4ng":"Test SMTP Thất Bại",[c.message],c.success?"success":"error")},className:"font-dosis-medium",children:[(0,d.jsx)(bL,{className:"mr-2 h-4 w-4"}),"Test kết nối"]})]})]})]})}),(0,d.jsx)(aR.av,{value:"sync",className:"space-y-6",children:(0,d.jsxs)(J.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center font-dosis-semibold",children:[(0,d.jsx)(bJ,{className:"mr-2"}),"Đồng bộ email"]})}),(0,d.jsxs)(J.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h4",{className:"font-dosis-semibold",children:"Trạng th\xe1i đồng bộ:"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-700 rounded",children:[(0,d.jsx)("span",{className:"font-dosis",children:"SMTP Connection"}),(0,d.jsx)("span",{className:"px-2 py-1 bg-green-600 text-white rounded text-sm font-dosis-medium",children:"Connected"})]}),(0,d.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-700 rounded",children:[(0,d.jsx)("span",{className:"font-dosis",children:"Email Sync"}),(0,d.jsx)("span",{className:`px-2 py-1 rounded text-sm font-dosis-medium ${"Connected"===m?"bg-green-600 text-white":"bg-yellow-600 text-white"}`,children:m})]}),(0,d.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-700 rounded",children:[(0,d.jsx)("span",{className:"font-dosis",children:"Auto Sync"}),(0,d.jsx)("span",{className:"px-2 py-1 bg-blue-600 text-white rounded text-sm font-dosis-medium",children:"Enabled"})]})]})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h4",{className:"font-dosis-semibold",children:"Thao t\xe1c:"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)(D.$,{onClick:x,className:"w-full bg-blue-600 hover:bg-blue-700 font-dosis-medium",disabled:"Syncing..."===m,children:[(0,d.jsx)(bJ,{className:"h-4 w-4 mr-2"}),"Syncing..."===m?"Đang đồng bộ...":"Đồng bộ ngay"]}),(0,d.jsxs)(D.$,{onClick:()=>a("Backup th\xe0nh c\xf4ng",["Đ\xe3 backup to\xe0n bộ email"],"success"),className:"w-full bg-green-600 hover:bg-green-700 font-dosis-medium",children:[(0,d.jsx)(a4,{className:"h-4 w-4 mr-2"}),"Backup email"]}),(0,d.jsxs)(D.$,{onClick:()=>a("C\xe0i đặt đ\xe3 lưu",["Đ\xe3 bật tự động đồng bộ mỗi 30 gi\xe2y"],"success"),className:"w-full bg-purple-600 hover:bg-purple-700 font-dosis-medium",children:[(0,d.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"C\xe0i đặt auto-sync"]})]})]})]}),(0,d.jsxs)("div",{className:"border-t border-gray-600 pt-4",children:[(0,d.jsx)("h4",{className:"font-dosis-semibold mb-2",children:"Lịch sử đồng bộ:"}),(0,d.jsxs)("div",{className:"text-sm text-gray-400 space-y-1 font-dosis",children:[(0,d.jsxs)("p",{children:["• ",p," - Email sync completed"]}),(0,d.jsxs)("p",{children:["• ",new Date(Date.now()-18e5).toLocaleString("vi-VN")," - SMTP connection verified"]}),(0,d.jsxs)("p",{children:["• ",new Date(Date.now()-36e5).toLocaleString("vi-VN")," - Auto-sync enabled"]})]})]})]})]})})]})]})}var bV=c(6839);function bW({notifications:a,onRemove:b}){return a&&0!==a.length?(0,d.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:a.map(a=>(0,d.jsx)("div",{className:`max-w-sm p-4 rounded-lg shadow-lg backdrop-blur-md border ${(a=>{switch(a){case"success":return"bg-green-600/90 border-green-500";case"info":return"bg-blue-600/90 border-blue-500";case"warning":return"bg-yellow-600/90 border-yellow-500";default:return"bg-red-600/90 border-red-500"}})(a.type)}`,children:(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"font-semibold text-white",children:a.title}),(0,d.jsx)("p",{className:"text-sm text-gray-100",children:a.message})]}),(0,d.jsx)(D.$,{variant:"ghost",size:"sm",onClick:()=>b(a.id),className:"p-1 h-auto text-white hover:bg-white/20",children:(0,d.jsx)(x.A,{className:"h-4 w-4"})})]})},a.id))}):null}function bX(){return null}var bY=c(59821),bZ=c(69327),b$=c(78122);let b_=(0,o.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),b0=(0,o.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);function b1(){let{user:a}=(0,e.A)(),[b,c]=(0,f.useState)([]),[g,h]=(0,f.useState)([]),[i,j]=(0,f.useState)("all"),[k,m]=(0,f.useState)("all-components"),[n,o]=(0,f.useState)(""),[p,q]=(0,f.useState)(!0),r=async()=>{try{let a=await fetch("/api/logs"),b=await a.json();if(b.success)c(b.logs||[]);else{console.error("Failed to fetch logs:",b.error);let a=a_.v.getLogs();c(a)}}catch(a){console.error("Error fetching logs:",a),c(a_.v.getLogs())}};return a?"Label Manager"!==a.role?(0,d.jsx)("div",{className:"p-6 min-h-screen flex items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Kh\xf4ng c\xf3 quyền truy cập"}),(0,d.jsx)("p",{className:"text-gray-500",children:"Chỉ Label Manager mới c\xf3 thể xem logs"})]})}):(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,d.jsxs)("h2",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,d.jsx)(l.A,{className:"mr-3 text-purple-400"}),"System Logs (",g.length,")"]}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsxs)(D.$,{variant:"outline",onClick:()=>q(!p),className:p?"bg-green-600/20":"",children:[(0,d.jsx)(b$.A,{className:"h-4 w-4 mr-2"}),"Auto Refresh"]}),(0,d.jsxs)(D.$,{variant:"outline",onClick:()=>{let a=new Blob([a_.v.exportLogs()],{type:"application/json"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download=`aks-studio-logs-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(b)},children:[(0,d.jsx)(a4,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,d.jsxs)(D.$,{variant:"destructive",onClick:()=>{a_.v.clearLogs(),c([]),h([])},children:[(0,d.jsx)(aZ.A,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]}),(0,d.jsxs)(J.Zp,{className:"mb-6",children:[(0,d.jsx)(J.aR,{children:(0,d.jsxs)(J.ZB,{className:"flex items-center",children:[(0,d.jsx)(b_,{className:"mr-2"}),"Filters"]})}),(0,d.jsx)(J.Wu,{children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"Level"}),(0,d.jsxs)(P.l6,{value:i,onValueChange:a=>j(a),children:[(0,d.jsx)(P.bq,{children:(0,d.jsx)(P.yv,{})}),(0,d.jsxs)(P.gC,{children:[(0,d.jsx)(P.eb,{value:"all",children:"All Levels"}),(0,d.jsx)(P.eb,{value:"debug",children:"Debug"}),(0,d.jsx)(P.eb,{value:"info",children:"Info"}),(0,d.jsx)(P.eb,{value:"warn",children:"Warning"}),(0,d.jsx)(P.eb,{value:"error",children:"Error"})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"Component"}),(0,d.jsxs)(P.l6,{value:k,onValueChange:m,children:[(0,d.jsx)(P.bq,{children:(0,d.jsx)(P.yv,{placeholder:"All Components"})}),(0,d.jsxs)(P.gC,{children:[(0,d.jsx)(P.eb,{value:"all-components",children:"All Components"}),b.map(a=>a.component).filter(Boolean).filter((a,b,c)=>c.indexOf(a)===b).filter(a=>a).map(a=>(0,d.jsx)(P.eb,{value:a,children:a},a))]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"Search"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(b0,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),(0,d.jsx)(O.p,{placeholder:"Search logs...",value:n,onChange:a=>o(a.target.value),className:"pl-8"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(Q.J,{children:"Actions"}),(0,d.jsxs)(D.$,{variant:"outline",onClick:r,className:"w-full",children:[(0,d.jsx)(b$.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]})})]}),(0,d.jsx)(J.Zp,{children:(0,d.jsx)(J.Wu,{className:"p-0",children:(0,d.jsx)(bZ.F,{className:"h-[600px]",children:0===g.length?(0,d.jsxs)("div",{className:"p-8 text-center text-gray-400",children:[(0,d.jsx)(l.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,d.jsx)("p",{children:"No logs found matching the current filters."})]}):(0,d.jsx)("div",{className:"space-y-2 p-4",children:g.map((a,b)=>(0,d.jsx)(J.Zp,{className:"bg-gray-50",children:(0,d.jsxs)(J.Wu,{className:"p-4",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(bY.E,{className:`${(a=>{switch(a){case"debug":default:return"bg-gray-500";case"info":return"bg-blue-500";case"warn":return"bg-yellow-500";case"error":return"bg-red-500"}})(a.level)} text-white`,children:a.level.toUpperCase()}),a.component&&(0,d.jsx)(bY.E,{variant:"outline",children:a.component}),a.action&&(0,d.jsx)(bY.E,{variant:"secondary",children:a.action})]}),(0,d.jsx)("span",{className:"text-xs text-gray-400",children:new Date(a.timestamp).toLocaleString()})]}),(0,d.jsx)("p",{className:"text-gray-700 mb-2",children:a.message}),a.userId&&(0,d.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["User: ",a.userId]}),a.data&&(0,d.jsxs)("details",{className:"mt-2",children:[(0,d.jsx)("summary",{className:"text-sm text-gray-500 cursor-pointer hover:text-gray-700",children:"Show Data"}),(0,d.jsx)(R.T,{value:JSON.stringify(a.data,null,2),readOnly:!0,className:"mt-2 font-mono text-xs",rows:6})]})]})},`${a.id}-${b}`))})})})})]}):(0,d.jsx)("div",{className:"p-6 min-h-screen flex items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Đang tải th\xf4ng tin"}),(0,d.jsx)("p",{className:"text-gray-500",children:"Vui l\xf2ng chờ trong gi\xe2y l\xe1t..."})]})})}function b2(){let{user:a}=(0,e.A)(),[b,c]=(0,f.useState)("dashboard"),[g,h]=(0,f.useState)([]),[i,j]=(0,f.useState)([]);(0,f.useCallback)(async()=>{if(a){a_.v.debug("MainAppView: Loading submissions",{userId:a.id,component:"MainAppView",action:"loadSubmissions"});try{let b=await fetch("/api/submissions"),c=await b.json(),d=c.data??c.submissions??[];h(d),a_.v.info("MainAppView: Submissions loaded successfully",{count:d.length,userId:a.id,component:"MainAppView"})}catch(b){a_.v.error("MainAppView: Failed to load submissions",b,{userId:a.id,component:"MainAppView",action:"loadSubmissions"})}}},[a]);let k=async a=>{try{let b=await fetch("/api/submissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});(await b.json()).success&&(h(b=>[a,...b]),m("Th\xe0nh c\xf4ng","Đ\xe3 gửi submission th\xe0nh c\xf4ng!","success"))}catch(a){console.error("Failed to add submission:",a),m("Lỗi","Kh\xf4ng thể gửi submission","error")}},l=async(a,b)=>{try{let c=await fetch(`/api/submissions/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:b})});(await c.json()).success&&(h(c=>c.map(c=>c.id===a?{...c,status:b}:c)),m("Cập nhật","Đ\xe3 cập nhật trạng th\xe1i","success"))}catch(a){console.error("Failed to update status:",a),m("Lỗi","Kh\xf4ng thể cập nhật trạng th\xe1i","error")}},m=(a,b,c="success")=>{let d=Array.isArray(b)?b.join(", "):b,e={id:`${Date.now()}-${Math.random().toString(36).substring(2,9)}`,title:a,message:d,type:c,timestamp:new Date};j(a=>[e,...a]),setTimeout(()=>{var a;return a=e.id,void j(b=>b.filter(b=>b.id!==a))},5e3)};return(0,d.jsx)(bA,{children:(0,d.jsxs)("div",{className:"flex min-h-screen bg-background relative main-container",children:[(0,d.jsx)(bV.DynamicBackground,{}),(0,d.jsx)(I,{currentView:b,onViewChange:c}),(0,d.jsx)("div",{className:"w-full min-h-screen",children:(0,d.jsx)("main",{className:"flex-1 relative pt-20 min-h-screen",children:(0,d.jsxs)("div",{className:"min-h-screen bg-background transition-colors duration-300 pb-8",children:["dashboard"===b&&(0,d.jsx)(N,{onViewChange:c}),"upload"===b&&(0,d.jsx)(a2,{onSubmissionAdded:k,showModal:m}),"submissions"===b&&(0,d.jsx)(bc,{submissions:g,viewType:"all",onUpdateStatus:l,showModal:m,onViewChange:c}),"profile"===b&&(0,d.jsx)(bh,{showModal:m}),"settings"===b&&(0,d.jsx)(bB,{}),"users"===b&&a?.role==="Label Manager"&&(0,d.jsx)(bD,{}),"admin"===b&&a?.role==="Label Manager"&&(0,d.jsx)(bH,{showModal:m}),"email"===b&&(0,d.jsx)(bU,{showModal:m}),"logs"===b&&a?.role==="Label Manager"&&(0,d.jsx)(b1,{})]})})}),(0,d.jsx)(bW,{notifications:i,onRemove:a=>{j(b=>b.filter(b=>b.id!==a))}}),(0,d.jsx)(bX,{})]})})}function b3(){return(0,d.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 text-white p-8",children:(0,d.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,d.jsx)("h1",{className:"text-4xl font-bold mb-6",children:"DMG - Fallback Mode"}),(0,d.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-6 mb-8",children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Debugging Mode Active"}),(0,d.jsx)("p",{className:"text-gray-300 mb-4",children:"This is a fallback view to diagnose rendering issues. If you see this page, it means the application is having trouble rendering the main view."}),(0,d.jsxs)("div",{className:"bg-gray-900 p-4 rounded-md mb-6",children:[(0,d.jsx)("h3",{className:"text-xl text-yellow-400 mb-2",children:"Troubleshooting Steps:"}),(0,d.jsxs)("ol",{className:"list-decimal pl-6 space-y-2 text-gray-300",children:[(0,d.jsx)("li",{children:"Check the browser console for JavaScript errors"}),(0,d.jsx)("li",{children:"Clear browser cache and cookies"}),(0,d.jsx)("li",{children:"Clear localStorage by clicking the button below"}),(0,d.jsx)("li",{children:"Verify that all required API endpoints are responding"})]})]}),(0,d.jsxs)("div",{className:"flex space-x-4",children:[(0,d.jsx)("button",{onClick:()=>{try{localStorage.clear(),alert("LocalStorage cleared successfully. The page will now reload."),window.location.href="/"}catch(a){alert(`Error clearing localStorage: ${a}`)}},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md",children:"Clear LocalStorage"}),(0,d.jsx)("button",{onClick:()=>{window.location.reload()},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md",children:"Reload Page"})]})]}),(0,d.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-6",children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Debug Information"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"bg-gray-900 p-3 rounded-md",children:[(0,d.jsx)("h3",{className:"text-yellow-400 text-lg mb-2",children:"Browser Info"}),(0,d.jsx)("p",{className:"text-gray-300",children:navigator.userAgent})]}),(0,d.jsxs)("div",{className:"bg-gray-900 p-3 rounded-md",children:[(0,d.jsx)("h3",{className:"text-yellow-400 text-lg mb-2",children:"Screen Size"}),(0,d.jsxs)("p",{className:"text-gray-300",children:[window.innerWidth," x ",window.innerHeight]})]})]})]})]})})}function b4(){let[a,b]=(0,f.useState)(!1);return"fallback"===new URLSearchParams("").get("mode")||a?(0,d.jsx)(b3,{}):(0,d.jsx)(b5,{fallback:(0,d.jsx)(b3,{}),children:(0,d.jsx)(e.O,{children:(0,d.jsx)(b2,{})})})}class b5 extends g().Component{constructor(a){super(a),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(a,b){console.error("❌ ERROR BOUNDARY CAUGHT ERROR:",a,b)}render(){return this.state.hasError?this.props.fallback:this.props.children}}},55629:(a,b,c)=>{"use strict";c.d(b,{SQ:()=>m,_2:()=>n,lp:()=>o,mB:()=>p,rI:()=>k,ty:()=>l});var d=c(60687),e=c(43210),f=c(26312),g=c(14952),h=c(13964),i=c(65822),j=c(96241);let k=f.bL,l=f.l9;f.YJ,f.ZL,f.Pb,f.z6,e.forwardRef(({className:a,inset:b,children:c,...e},h)=>(0,d.jsxs)(f.ZP,{ref:h,className:(0,j.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",b&&"pl-8",a),...e,children:[c,(0,d.jsx)(g.A,{className:"ml-auto"})]})).displayName=f.ZP.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.G5,{ref:c,className:(0,j.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...b})).displayName=f.G5.displayName;let m=e.forwardRef(({className:a,sideOffset:b=4,...c},e)=>(0,d.jsx)(f.ZL,{children:(0,d.jsx)(f.UC,{ref:e,sideOffset:b,className:(0,j.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...c})}));m.displayName=f.UC.displayName;let n=e.forwardRef(({className:a,inset:b,...c},e)=>(0,d.jsx)(f.q7,{ref:e,className:(0,j.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",b&&"pl-8",a),...c}));n.displayName=f.q7.displayName,e.forwardRef(({className:a,children:b,checked:c,...e},g)=>(0,d.jsxs)(f.H_,{ref:g,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:c,...e,children:[(0,d.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(f.VF,{children:(0,d.jsx)(h.A,{className:"h-4 w-4"})})}),b]})).displayName=f.H_.displayName,e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(f.hN,{ref:e,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[(0,d.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(f.VF,{children:(0,d.jsx)(i.A,{className:"h-2 w-2 fill-current"})})}),b]})).displayName=f.hN.displayName;let o=e.forwardRef(({className:a,inset:b,...c},e)=>(0,d.jsx)(f.JU,{ref:e,className:(0,j.cn)("px-2 py-1.5 text-sm font-semibold",b&&"pl-8",a),...c}));o.displayName=f.JU.displayName;let p=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.wv,{ref:c,className:(0,j.cn)("-mx-1 my-1 h-px bg-muted",a),...b}));p.displayName=f.wv.displayName},56496:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>B.default,__next_app__:()=>H,handler:()=>J,pages:()=>G,routeModule:()=>I,tree:()=>F});var d=c(65239),e=c(48088),f=c(47220),g=c(81289),h=c(26191),i=c(14823),j=c(71998),k=c(92603),l=c(54649),m=c(32781),n=c(82602),o=c(61268),p=c(4853),q=c(261),r=c(5052),s=c(9977),t=c(26713),u=c(43365),v=c(71454),w=c(67778),x=c(46143),y=c(39105),z=c(38171),A=c(86439),B=c(46076),C=c(30893),D=c(52836),E={};for(let a in C)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(E[a]=()=>C[a]);c.d(b,E);let F=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,90597)),"F:\\studio.ankun\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,58014)),"F:\\studio.ankun\\app\\layout.tsx"],error:[()=>Promise.resolve().then(c.bind(c,52608)),"F:\\studio.ankun\\app\\error.tsx"],loading:[()=>Promise.resolve().then(c.bind(c,99766)),"F:\\studio.ankun\\app\\loading.tsx"],"global-error":[()=>Promise.resolve().then(c.bind(c,46076)),"F:\\studio.ankun\\app\\global-error.tsx"],"not-found":[()=>Promise.resolve().then(c.bind(c,46818)),"F:\\studio.ankun\\app\\not-found.tsx"],"global-error":[()=>Promise.resolve().then(c.bind(c,46076)),"F:\\studio.ankun\\app\\global-error.tsx"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,29868,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,79615,23)),"next/dist/client/components/builtin/unauthorized.js"]}],G=["F:\\studio.ankun\\app\\page.tsx"],H={require:c,loadChunk:()=>Promise.resolve()},I=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:F},distDir:".next",projectDir:""});async function J(a,b,c){var d;let E="/page";"/index"===E&&(E="/");let K="false",L=(0,h.getRequestMeta)(a,"postponed"),M=(0,h.getRequestMeta)(a,"minimalMode"),N=await I.prepare(a,b,{srcPage:E,multiZoneDraftMode:K});if(!N)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:O,query:P,params:Q,parsedUrl:R,pageIsDynamic:S,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,serverActionsManifest:W,clientReferenceManifest:X,subresourceIntegrityManifest:Y,prerenderManifest:Z,isDraftMode:$,resolvedPathname:_,revalidateOnlyGenerated:aa,routerServerContext:ab,nextConfig:ac}=N,ad=R.pathname||"/",ae=(0,q.normalizeAppPath)(E),{isOnDemandRevalidate:af}=N,ag=Z.dynamicRoutes[ae],ah=Z.routes[_],ai=!!(ag||ah||Z.routes[ae]),aj=a.headers["user-agent"]||"",ak=(0,t.getBotType)(aj),al=(0,o.isHtmlBotRequest)(a),am=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??!!a.headers[s.NEXT_ROUTER_PREFETCH_HEADER],an=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[s.RSC_HEADER],ao=(0,r.getIsPossibleServerAction)(a),ap=(0,l.checkIsAppPPREnabled)(ac.experimental.ppr)&&(null==(d=Z.routes[ae]??Z.dynamicRoutes[ae])?void 0:d.renderingMode)==="PARTIALLY_STATIC",aq=!1,ar=!1,as=ap?L:void 0,at=ap&&an&&!am,au=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),av=!aj||(0,o.shouldServeStreamingMetadata)(aj,ac.htmlLimitedBots);al&&ap&&(ai=!1,av=!1);let aw=!0===I.isDev||!ai||"string"==typeof L||at,ax=al&&ap,ay=null;$||!ai||aw||ao||as||at||(ay=_);let az=ay;!az&&I.isDev&&(az=_);let aA={...C,tree:F,pages:G,GlobalError:B.default,handler:J,routeModule:I,__next_app__:H};W&&X&&(0,n.setReferenceManifestsSingleton)({page:E,clientReferenceManifest:X,serverActionsManifest:W,serverModuleMap:(0,p.createServerModuleMap)({serverActionsManifest:W})});let aB=a.method||"GET",aC=(0,g.getTracer)(),aD=aC.getActiveScopeSpan();try{let d=async(c,d)=>{let e=new k.NodeNextRequest(a),f=new k.NodeNextResponse(b);return I.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aC.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aB} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aB} ${a.url}`)})},f=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:P,params:Q,page:ae,sharedContext:{buildId:O},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aA,Component:(0,j.T)(aA),params:Q,routeModule:I,page:E,postponed:f,shouldWaitOnAllReady:ax,serveStreamingMetadata:av,supportsDynamicResponse:"string"==typeof f||aw,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,subresourceIntegrityManifest:Y,serverActionsManifest:W,clientReferenceManifest:X,setIsrStatus:null==ab?void 0:ab.setIsrStatus,dir:I.projectDir,isDraftMode:$,isRevalidate:ai&&!f&&!at,botType:ak,isOnDemandRevalidate:af,isPossibleServerAction:ao,assetPrefix:ac.assetPrefix,nextConfigOutput:ac.output,crossOrigin:ac.crossOrigin,trailingSlash:ac.trailingSlash,previewProps:Z.preview,deploymentId:ac.deploymentId,enableTainting:ac.experimental.taint,htmlLimitedBots:ac.htmlLimitedBots,devtoolSegmentExplorer:ac.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ac.reactMaxHeadersLength,multiZoneDraftMode:K,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ac.experimental.cacheLife,basePath:ac.basePath,serverActions:ac.experimental.serverActions,...aq?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:aq}:{},experimental:{isRoutePPREnabled:ap,expireTime:ac.expireTime,staleTimes:ac.experimental.staleTimes,dynamicIO:!!ac.experimental.dynamicIO,clientSegmentCache:!!ac.experimental.clientSegmentCache,dynamicOnHover:!!ac.experimental.dynamicOnHover,inlineCss:!!ac.experimental.inlineCss,authInterrupts:!!ac.experimental.authInterrupts,clientTraceMetadata:ac.experimental.clientTraceMetadata||[]},waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>I.onRequestError(a,b,d,ab),err:(0,h.getRequestMeta)(a,"invokeError"),dev:I.isDev}},k=await d(e,i),{metadata:l}=k,{cacheControl:m,headers:n={},fetchTags:o}=l;if(o&&(n[x.NEXT_CACHE_TAGS_HEADER]=o),a.fetchMetrics=l.fetchMetrics,ai&&(null==m?void 0:m.revalidate)===0&&!I.isDev&&!ap){let a=l.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${_}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:u.CachedRouteKind.APP_PAGE,html:k,headers:n,rscData:l.flightData,postponed:l.postponed,status:l.statusCode,segmentData:l.segmentData},cacheControl:m}},l=async({hasResolved:d,previousCacheEntry:g,isRevalidating:i,span:j})=>{let k,l=!1===I.isDev,n=d||b.writableEnded;if(af&&aa&&!g&&!M)return(null==ab?void 0:ab.render404)?await ab.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ag&&(k=(0,v.parseFallbackField)(ag.fallback)),k===v.FallbackMode.PRERENDER&&(0,t.isBot)(aj)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),(null==g?void 0:g.isStale)===-1&&(af=!0),af&&(k!==v.FallbackMode.NOT_FOUND||g)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),!M&&k!==v.FallbackMode.BLOCKING_STATIC_RENDER&&az&&!n&&!$&&S&&(l||!ah)){let b;if((l||ag)&&k===v.FallbackMode.NOT_FOUND)throw new A.NoFallbackError;if(ap&&!an){if(b=await I.handleResponse({cacheKey:l?ae:null,req:a,nextConfig:ac,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:Z,isRoutePPREnabled:ap,responseGenerator:async()=>f({span:j,postponed:void 0,fallbackRouteParams:l||ar?(0,m.u)(ae):null}),waitUntil:c.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=af||i||!as?void 0:as;if(aq&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:u.CachedRouteKind.PAGES,html:w.default.fromStatic(""),pageData:{},headers:void 0,status:void 0}};let p=S&&ap&&((0,h.getRequestMeta)(a,"renderFallbackShell")||ar)?(0,m.u)(ad):null;return f({span:j,postponed:o,fallbackRouteParams:p})},n=async d=>{var g,i,j,k,m;let n,o=await I.handleResponse({cacheKey:ay,responseGenerator:a=>l({span:d,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:af,isRoutePPREnabled:ap,req:a,nextConfig:ac,prerenderManifest:Z,waitUntil:c.waitUntil});if($&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),I.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!o){if(ay)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(g=o.value)?void 0:g.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(j=o.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof o.value.postponed;ai&&!at&&(!p||am)&&(M||b.setHeader("x-nextjs-cache",af?"REVALIDATED":o.isMiss?"MISS":o.isStale?"STALE":"HIT"),b.setHeader(s.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=o;if(as)n={revalidate:0,expire:void 0};else if(M&&an&&!am&&ap)n={revalidate:0,expire:void 0};else if(!I.isDev)if($)n={revalidate:0,expire:void 0};else if(ai){if(o.cacheControl)if("number"==typeof o.cacheControl.revalidate){if(o.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${o.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});n={revalidate:o.cacheControl.revalidate,expire:(null==(k=o.cacheControl)?void 0:k.expire)??ac.expireTime}}else n={revalidate:x.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(n={revalidate:0,expire:void 0});if(o.cacheControl=n,"string"==typeof au&&(null==q?void 0:q.kind)===u.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(m=q.headers)?void 0:m[x.NEXT_CACHE_TAGS_HEADER];M&&ai&&c&&"string"==typeof c&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(au);return void 0!==d?(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(d),cacheControl:o.cacheControl}):(b.statusCode=204,(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(""),cacheControl:o.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...o,value:{...o.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&as)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(M&&ai||delete a[x.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let t=null==(i=q.headers)?void 0:i[x.NEXT_CACHE_TAGS_HEADER];if(M&&ai&&t&&"string"==typeof t&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,t),!q.status||an&&ap||(b.statusCode=q.status),!M&&q.status&&D.RedirectStatusCode[q.status]&&an&&(b.statusCode=200),p&&b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"1"),an&&!$){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:q.html,cacheControl:at?{revalidate:0,expire:void 0}:o.cacheControl})}return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(q.rscData),cacheControl:o.cacheControl})}let v=q.html;if(!p||M)return(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:o.cacheControl});if(aq)return v.chain(new ReadableStream({start(a){a.enqueue(y.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}});let A=new TransformStream;return v.chain(A.readable),f({span:d,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(A.writable)}).catch(a=>{A.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}})};if(!aD)return await aC.withPropagatedContext(a.headers,()=>aC.trace(i.BaseServerSpan.handleRequest,{spanName:`${aB} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aB,"http.target":a.url}},n));await n(aD)}catch(b){throw aD||b instanceof A.NoFallbackError||await I.onRequestError(a,b,{routerKind:"App Router",routePath:E,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ai,isOnDemandRevalidate:af})},ab),b}}},59821:(a,b,c)=>{"use strict";c.d(b,{E:()=>h});var d=c(60687);c(43210);var e=c(24224),f=c(96241);let g=(0,e.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function h({className:a,variant:b,...c}){return(0,d.jsx)("div",{className:(0,f.cn)(g({variant:b}),a),...c})}},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63974:(a,b,c)=>{"use strict";c.d(b,{bq:()=>m,eb:()=>q,gC:()=>p,l6:()=>k,yv:()=>l});var d=c(60687),e=c(43210),f=c(25911),g=c(78272),h=c(3589),i=c(13964),j=c(96241);let k=f.bL;f.YJ;let l=f.WT,m=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(f.l9,{ref:e,className:(0,j.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...c,children:[b,(0,d.jsx)(f.In,{asChild:!0,children:(0,d.jsx)(g.A,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=f.l9.displayName;let n=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.PP,{ref:c,className:(0,j.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,d.jsx)(h.A,{className:"h-4 w-4"})}));n.displayName=f.PP.displayName;let o=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.wn,{ref:c,className:(0,j.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,d.jsx)(g.A,{className:"h-4 w-4"})}));o.displayName=f.wn.displayName;let p=e.forwardRef(({className:a,children:b,position:c="popper",...e},g)=>(0,d.jsx)(f.ZL,{children:(0,d.jsxs)(f.UC,{ref:g,className:(0,j.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===c&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:c,...e,children:[(0,d.jsx)(n,{}),(0,d.jsx)(f.LM,{className:(0,j.cn)("p-1","popper"===c&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:b}),(0,d.jsx)(o,{})]})}));p.displayName=f.UC.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.JU,{ref:c,className:(0,j.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...b})).displayName=f.JU.displayName;let q=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(f.q7,{ref:e,className:(0,j.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[(0,d.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(f.VF,{children:(0,d.jsx)(i.A,{className:"h-4 w-4"})})}),(0,d.jsx)(f.p4,{children:b})]}));q.displayName=f.q7.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.wv,{ref:c,className:(0,j.cn)("-mx-1 my-1 h-px bg-muted",a),...b})).displayName=f.wv.displayName},70373:(a,b,c)=>{"use strict";c.d(b,{BK:()=>j,eu:()=>i,q5:()=>k});var d=c(60687),e=c(43210),f=c.n(e),g=c(11096),h=c(96241);let i=f().forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.bL,{ref:c,className:(0,h.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...b}));i.displayName=g.bL.displayName;let j=f().forwardRef(({className:a,...b},c)=>(0,d.jsx)(g._V,{ref:c,className:(0,h.cn)("aspect-square h-full w-full",a),...b}));j.displayName=g._V.displayName;let k=f().forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.H4,{ref:c,className:(0,h.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...b}));k.displayName=g.H4.displayName},85910:(a,b,c)=>{"use strict";c.d(b,{Xi:()=>j,av:()=>k,j7:()=>i,tU:()=>h});var d=c(60687),e=c(43210),f=c(55146),g=c(96241);let h=f.bL,i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.B8,{ref:c,className:(0,g.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...b}));i.displayName=f.B8.displayName;let j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.l9,{ref:c,className:(0,g.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...b}));j.displayName=f.l9.displayName;let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.UC,{ref:c,className:(0,g.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...b}));k.displayName=f.UC.displayName},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},90597:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(61369).registerClientReference)(function(){throw Error("Attempted to call the default export of \"F:\\\\studio.ankun\\\\app\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\studio.ankun\\app\\page.tsx","default")},95679:(a,b,c)=>{Promise.resolve().then(c.bind(c,90597))}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[985,414,501,255,242],()=>b(b.s=56496));module.exports=c})();